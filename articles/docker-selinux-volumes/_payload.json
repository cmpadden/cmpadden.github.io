[{"data":1,"prerenderedAt":240},["ShallowReactive",2],{"page-data":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"draft":6,"tags":11,"categories":14,"excerpt":16,"body":26,"_type":234,"_id":235,"_source":236,"_file":237,"_stem":238,"_extension":239},"/articles/docker-selinux-volumes","articles",false,"","Docker Volume Permissions with SELinux","Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes.","2019-12-26",[12,13],"docker","selinux",[15],"linux",{"type":17,"children":18},"root",[19],{"type":20,"tag":21,"props":22,"children":23},"element","p",{},[24],{"type":25,"value":9},"text",{"type":17,"children":27,"toc":232},[28,32,53,57,139,160,168,173,190,199,226],{"type":20,"tag":21,"props":29,"children":30},{},[31],{"type":25,"value":9},{"type":20,"tag":33,"props":34,"children":38},"pre",{"code":35,"language":36,"meta":7,"className":37,"style":7},"mkdir: can't create directory '/data': Permission denied\n","txt","language-txt shiki shiki-themes github-dark",[39],{"type":20,"tag":40,"props":41,"children":42},"code",{"__ignoreMap":7},[43],{"type":20,"tag":44,"props":45,"children":48},"span",{"class":46,"line":47},"line",1,[49],{"type":20,"tag":44,"props":50,"children":51},{},[52],{"type":25,"value":35},{"type":20,"tag":54,"props":55,"children":56},"hr",{},[],{"type":20,"tag":33,"props":58,"children":62},{"code":59,"language":60,"meta":7,"className":61,"style":7},"$ docker info --format '{{json .SecurityOptions}}'\n[\n  \"name=seccomp,profile=/etc/docker/seccomp.json\",\n  \"name=selinux\"\n]\n","bash","language-bash shiki shiki-themes github-dark",[63],{"type":20,"tag":40,"props":64,"children":65},{"__ignoreMap":7},[66,97,107,121,130],{"type":20,"tag":44,"props":67,"children":68},{"class":46,"line":47},[69,75,81,86,92],{"type":20,"tag":44,"props":70,"children":72},{"style":71},"--shiki-default:#B392F0",[73],{"type":25,"value":74},"$",{"type":20,"tag":44,"props":76,"children":78},{"style":77},"--shiki-default:#9ECBFF",[79],{"type":25,"value":80}," docker",{"type":20,"tag":44,"props":82,"children":83},{"style":77},[84],{"type":25,"value":85}," info",{"type":20,"tag":44,"props":87,"children":89},{"style":88},"--shiki-default:#79B8FF",[90],{"type":25,"value":91}," --format",{"type":20,"tag":44,"props":93,"children":94},{"style":77},[95],{"type":25,"value":96}," '{{json .SecurityOptions}}'\n",{"type":20,"tag":44,"props":98,"children":100},{"class":46,"line":99},2,[101],{"type":20,"tag":44,"props":102,"children":104},{"style":103},"--shiki-default:#E1E4E8",[105],{"type":25,"value":106},"[\n",{"type":20,"tag":44,"props":108,"children":110},{"class":46,"line":109},3,[111,116],{"type":20,"tag":44,"props":112,"children":113},{"style":77},[114],{"type":25,"value":115},"  \"name=seccomp,profile=/etc/docker/seccomp.json\"",{"type":20,"tag":44,"props":117,"children":118},{"style":103},[119],{"type":25,"value":120},",\n",{"type":20,"tag":44,"props":122,"children":124},{"class":46,"line":123},4,[125],{"type":20,"tag":44,"props":126,"children":127},{"style":77},[128],{"type":25,"value":129},"  \"name=selinux\"\n",{"type":20,"tag":44,"props":131,"children":133},{"class":46,"line":132},5,[134],{"type":20,"tag":44,"props":135,"children":136},{"style":103},[137],{"type":25,"value":138},"]\n",{"type":20,"tag":21,"props":140,"children":141},{},[142,144,150,152,158],{"type":25,"value":143},"It turns out that this can be resolved by appending the ",{"type":20,"tag":40,"props":145,"children":147},{"className":146},[],[148],{"type":25,"value":149},":z",{"type":25,"value":151}," flag to the volume\nmappings in the ",{"type":20,"tag":40,"props":153,"children":155},{"className":154},[],[156],{"type":25,"value":157},"docker-compose.yml",{"type":25,"value":159}," file, indicating that the volume content\nis shared.",{"type":20,"tag":33,"props":161,"children":163},{"code":162},"services:\n  server:\n    volumes:\n      - ./data:/data:z\n",[164],{"type":20,"tag":40,"props":165,"children":166},{"__ignoreMap":7},[167],{"type":25,"value":162},{"type":20,"tag":21,"props":169,"children":170},{},[171],{"type":25,"value":172},"From the Docker documentation:",{"type":20,"tag":174,"props":175,"children":176},"blockquote",{},[177],{"type":20,"tag":21,"props":178,"children":179},{},[180,182,188],{"type":25,"value":181},"The ",{"type":20,"tag":40,"props":183,"children":185},{"className":184},[],[186],{"type":25,"value":187},"z",{"type":25,"value":189}," option tells Docker that two containers share the volume content. As\na result, Docker labels the content with a shared content label. Shared\nvolume labels allow all containers to read/write content.",{"type":20,"tag":21,"props":191,"children":192},{},[193],{"type":20,"tag":194,"props":195,"children":196},"strong",{},[197],{"type":25,"value":198},"References",{"type":20,"tag":200,"props":201,"children":202},"ul",{},[203,216],{"type":20,"tag":204,"props":205,"children":206},"li",{},[207],{"type":20,"tag":208,"props":209,"children":213},"a",{"href":210,"rel":211},"https://docs.docker.com/engine/reference/commandline/info/",[212],"nofollow",[214],{"type":25,"value":215},"Docker Docs: Docker Info",{"type":20,"tag":204,"props":217,"children":218},{},[219],{"type":20,"tag":208,"props":220,"children":223},{"href":221,"rel":222},"https://docs.docker.com/engine/reference/commandline/run/#mount-volumes-from-container---volumes-from",[212],[224],{"type":25,"value":225},"Docker Docs: Mounting Volumes",{"type":20,"tag":227,"props":228,"children":229},"style",{},[230],{"type":25,"value":231},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":99,"depth":99,"links":233},[],"markdown","content:articles:docker-selinux-volumes.md","content","articles/docker-selinux-volumes.md","articles/docker-selinux-volumes","md",1738464309377]
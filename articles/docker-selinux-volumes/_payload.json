[{"data":1,"prerenderedAt":172},["ShallowReactive",2],{"/articles/docker-selinux-volumes":3},{"id":4,"title":5,"body":6,"categories":152,"date":154,"description":155,"extension":156,"img":157,"meta":158,"navigation":164,"path":165,"seo":166,"stem":167,"tags":168,"__hash__":171},"content/articles/docker-selinux-volumes.md","Docker Volume Permissions with SELinux",{"type":7,"value":8,"toc":150},"minimal",[9,13,30,33,88,99,107,110,120,126,146],[10,11,12],"p",{},"Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes.",[14,15,20],"pre",{"className":16,"code":17,"language":18,"meta":19,"style":19},"language-txt shiki shiki-themes github-light github-dark","mkdir: can't create directory '/data': Permission denied\n","txt","",[21,22,23],"code",{"__ignoreMap":19},[24,25,28],"span",{"class":26,"line":27},"line",1,[24,29,17],{},[31,32],"hr",{},[14,34,38],{"className":35,"code":36,"language":37,"meta":19,"style":19},"language-bash shiki shiki-themes github-light github-dark","$ docker info --format '{{json .SecurityOptions}}'\n[\n  \"name=seccomp,profile=/etc/docker/seccomp.json\",\n  \"name=selinux\"\n]\n","bash",[21,39,40,60,67,76,82],{"__ignoreMap":19},[24,41,42,46,50,53,57],{"class":26,"line":27},[24,43,45],{"class":44},"svtaR","$",[24,47,49],{"class":48},"sVz-a"," docker",[24,51,52],{"class":48}," info",[24,54,56],{"class":55},"sAKX4"," --format",[24,58,59],{"class":48}," '{{json .SecurityOptions}}'\n",[24,61,63],{"class":26,"line":62},2,[24,64,66],{"class":65},"sPIjM","[\n",[24,68,70,73],{"class":26,"line":69},3,[24,71,72],{"class":48},"  \"name=seccomp,profile=/etc/docker/seccomp.json\"",[24,74,75],{"class":65},",\n",[24,77,79],{"class":26,"line":78},4,[24,80,81],{"class":48},"  \"name=selinux\"\n",[24,83,85],{"class":26,"line":84},5,[24,86,87],{"class":65},"]\n",[10,89,90,91,94,95,98],{},"It turns out that this can be resolved by appending the ",[21,92,93],{},":z"," flag to the volume\nmappings in the ",[21,96,97],{},"docker-compose.yml"," file, indicating that the volume content\nis shared.",[14,100,105],{"className":101,"code":103,"language":104},[102],"language-text","services:\n  server:\n    volumes:\n      - ./data:/data:z\n","text",[21,106,103],{"__ignoreMap":19},[10,108,109],{},"From the Docker documentation:",[111,112,113],"blockquote",{},[10,114,115,116,119],{},"The ",[21,117,118],{},"z"," option tells Docker that two containers share the volume content. As\na result, Docker labels the content with a shared content label. Shared\nvolume labels allow all containers to read/write content.",[10,121,122],{},[123,124,125],"strong",{},"References",[127,128,129,139],"ul",{},[130,131,132],"li",{},[133,134,138],"a",{"href":135,"rel":136},"https://docs.docker.com/engine/reference/commandline/info/",[137],"nofollow","Docker Docs: Docker Info",[130,140,141],{},[133,142,145],{"href":143,"rel":144},"https://docs.docker.com/engine/reference/commandline/run/#mount-volumes-from-container---volumes-from",[137],"Docker Docs: Mounting Volumes",[147,148,149],"style",{},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .svtaR, html code.shiki .svtaR{--shiki-light:#6F42C1;--shiki-default:#B392F0}html pre.shiki code .sVz-a, html code.shiki .sVz-a{--shiki-light:#032F62;--shiki-default:#9ECBFF}html pre.shiki code .sAKX4, html code.shiki .sAKX4{--shiki-light:#005CC5;--shiki-default:#79B8FF}html pre.shiki code .sPIjM, html code.shiki .sPIjM{--shiki-light:#24292E;--shiki-default:#E1E4E8}",{"title":19,"searchDepth":62,"depth":62,"links":151},[],[153],"linux","2019-12-26T00:00:00.000Z","Unfamiliar with running Docker on a SELinux enabled system, I found myself\\nrunning into a bunch of file permission errors while creating volumes.","md",null,{"draft":159,"excerpt":160},false,{"type":7,"value":161},[162],[10,163,12],{},true,"/articles/docker-selinux-volumes",{"title":5,"description":12},"articles/docker-selinux-volumes",[169,170],"docker","selinux","jVkiaVnxAgmqgooGyzTQaUh2zStLUBGREz8PH3beqqI",1754059406616]
[{"data":1,"prerenderedAt":5584},["ShallowReactive",2],{"articles":3},[4,807,1024,1207,1528,2511,3144,3433,3512,3627,3742,4101,4483,5273,5404],{"id":5,"title":6,"body":7,"categories":781,"date":783,"description":784,"extension":785,"img":786,"meta":787,"navigation":85,"path":799,"seo":800,"stem":801,"tags":802,"__hash__":806},"content/articles/nuxt-p5js-3d-models.md","Render three-dimensional models in NuxtContent with p5js",{"type":8,"value":9,"toc":779},"minimal",[10,31,44,147,154,159,170,178,195,201,772,775],[11,12,13,14,18,19,22,23,30],"p",{},"Three-dimensional models, whether they be of the format ",[15,16,17],"code",{},".obj"," or ",[15,20,21],{},".stl",", can be easily rendered in your Nuxt project by using the ",[24,25,29],"a",{"href":26,"rel":27},"https://p5js.org/",[28],"nofollow","p5js.org"," library.",[11,32,33,34,37,38,43],{},"I've been using p5 for a while now to tinker and explore generative art, some of which can be found in the ",[24,35,36],{"href":36},"/playground"," section of this website. To use it with Nuxt, a ",[24,39,42],{"href":40,"rel":41},"https://github.com/cmpadden/cmpadden.github.io/blob/70ba674acdbe80c4a41b510a9b54edcddb19f489/plugins/p5.client.js",[28],"client-side plugin"," was created like so:",[45,46,51],"pre",{"className":47,"code":48,"language":49,"meta":50,"style":50},"language-js shiki shiki-themes github-dark","// plugins/p5.client.js\nimport p5 from 'p5'\n\nexport default defineNuxtPlugin(() => {\n  return {\n    provide: {\n      p5, p5\n    }\n  }\n})\n","js","",[15,52,53,62,80,87,109,117,123,129,135,141],{"__ignoreMap":50},[54,55,58],"span",{"class":56,"line":57},"line",1,[54,59,61],{"class":60},"sAwPA","// plugins/p5.client.js\n",[54,63,65,69,73,76],{"class":56,"line":64},2,[54,66,68],{"class":67},"snl16","import",[54,70,72],{"class":71},"s95oV"," p5 ",[54,74,75],{"class":67},"from",[54,77,79],{"class":78},"sU2Wk"," 'p5'\n",[54,81,83],{"class":56,"line":82},3,[54,84,86],{"emptyLinePlaceholder":85},true,"\n",[54,88,90,93,96,100,103,106],{"class":56,"line":89},4,[54,91,92],{"class":67},"export",[54,94,95],{"class":67}," default",[54,97,99],{"class":98},"svObZ"," defineNuxtPlugin",[54,101,102],{"class":71},"(() ",[54,104,105],{"class":67},"=>",[54,107,108],{"class":71}," {\n",[54,110,112,115],{"class":56,"line":111},5,[54,113,114],{"class":67},"  return",[54,116,108],{"class":71},[54,118,120],{"class":56,"line":119},6,[54,121,122],{"class":71},"    provide: {\n",[54,124,126],{"class":56,"line":125},7,[54,127,128],{"class":71},"      p5, p5\n",[54,130,132],{"class":56,"line":131},8,[54,133,134],{"class":71},"    }\n",[54,136,138],{"class":56,"line":137},9,[54,139,140],{"class":71},"  }\n",[54,142,144],{"class":56,"line":143},10,[54,145,146],{"class":71},"})\n",[11,148,149,150,153],{},"As I've been exploring 3d-printing lately, I wanted a way to showcase some of the models I've created directly on this website. So, the ",[15,151,152],{},"ModelPreview"," component was created, which you can see in use below.",[155,156],"model-preview",{":background-color":157,"path":158},"50","/models/eevee.stl",[11,160,161,162,165,166,169],{},"The Vue component was embedded in our markdown using the following syntax is used. The ",[15,163,164],{},"path"," prop with the location of the file we want to render; in this case, that file is served on the website as well in the ",[15,167,168],{},"public/models"," folder.",[45,171,176],{"className":172,"code":174,"language":175},[173],"language-text",":ModelPreview{path=\"/models/eevee.stl\"}\n","text",[15,177,174],{"__ignoreMap":50},[11,179,180,181,184,185,188,189,194],{},"The component was registered globally by using the ",[15,182,183],{},"ModelPreview.global.vue"," filename so that it was accessible in our markdown. Alternatively, this could have been accomplished by placing the component in the ",[15,186,187],{},"components/content"," folder. However, I wanted to use this component in both markdown and Vue files. See the ",[24,190,193],{"href":191,"rel":192},"https://content.nuxt.com/usage/markdown#vue-components",[28],"NuxtContent"," documentation for more details.",[11,196,197,198,200],{},"The full source code for the ",[15,199,152],{}," component at the time of this writing can be found below. Not too bad!",[45,202,204],{"className":47,"code":203,"language":49,"meta":50,"style":50},"\u003Ctemplate>\n    \u003Cdiv id=\"canvas\" class=\"h-64\" />\n\u003C/template>\n\n\u003Cscript setup lang=\"ts\">\nconst { $p5 } = useNuxtApp();\n\nconst { path, backgroundColor = 100 } = defineProps \u003C { path: string, backgroundColor?: Number } > ()\n\nonMounted(() => {\nconsole.log(backgroundColor);\n    const sketch = (s) => {\n        const c = document.getElementById(\"canvas\");\n\n        const WIDTH = c.clientWidth;\n        const HEIGHT = c.clientHeight;\n\n        let model;\n        let angle;\n        let rotate = true;\n\n        s.preload = () => {\n            model = s.loadModel(path, true);\n        };\n\n        s.setup = () => {\n            s.createCanvas(WIDTH, HEIGHT, s.WEBGL);\n        };\n\n        s.mouseClicked = () => {\n            rotate = false; // disable object rotation on click\n        };\n\n        s.draw = () => {\n            s.background(backgroundColor);\n            s.lights();\n\n            if (rotate) {\n                angle = s.frameCount * 0.005;\n            }\n            s.rotateX(angle);\n            s.rotateY(angle);\n            s.orbitControl();\n\n            s.model(model);\n        };\n    };\n\n    new $p5(sketch, \"canvas\");\n});\n\u003C/script>\n",[15,205,206,218,246,255,259,279,284,288,308,312,317,329,355,380,385,398,411,416,425,433,449,454,472,494,500,505,521,549,554,559,575,592,597,602,618,628,639,644,653,672,678,689,699,709,714,725,730,736,741,757,763],{"__ignoreMap":50},[54,207,208,211,215],{"class":56,"line":57},[54,209,210],{"class":71},"\u003C",[54,212,214],{"class":213},"s4JwU","template",[54,216,217],{"class":71},">\n",[54,219,220,223,226,229,232,235,238,240,243],{"class":56,"line":64},[54,221,222],{"class":71},"    \u003C",[54,224,225],{"class":213},"div",[54,227,228],{"class":98}," id",[54,230,231],{"class":67},"=",[54,233,234],{"class":78},"\"canvas\"",[54,236,237],{"class":98}," class",[54,239,231],{"class":67},[54,241,242],{"class":78},"\"h-64\"",[54,244,245],{"class":71}," />\n",[54,247,248,251,253],{"class":56,"line":82},[54,249,250],{"class":71},"\u003C/",[54,252,214],{"class":213},[54,254,217],{"class":71},[54,256,257],{"class":56,"line":89},[54,258,86],{"emptyLinePlaceholder":85},[54,260,261,263,266,269,272,274,277],{"class":56,"line":111},[54,262,210],{"class":71},[54,264,265],{"class":213},"script",[54,267,268],{"class":98}," setup",[54,270,271],{"class":98}," lang",[54,273,231],{"class":67},[54,275,276],{"class":78},"\"ts\"",[54,278,217],{"class":71},[54,280,281],{"class":56,"line":119},[54,282,283],{"class":71},"const { $p5 } = useNuxtApp();\n",[54,285,286],{"class":56,"line":125},[54,287,86],{"emptyLinePlaceholder":85},[54,289,290,293,295,299,302,305],{"class":56,"line":131},[54,291,292],{"class":71},"const { path, backgroundColor ",[54,294,231],{"class":67},[54,296,298],{"class":297},"sDLfK"," 100",[54,300,301],{"class":71}," } = defineProps \u003C { path: string, backgroundColor",[54,303,304],{"class":67},"?:",[54,306,307],{"class":71}," Number } > ()\n",[54,309,310],{"class":56,"line":137},[54,311,86],{"emptyLinePlaceholder":85},[54,313,314],{"class":56,"line":143},[54,315,316],{"class":71},"onMounted(() => {\n",[54,318,320,323,326],{"class":56,"line":319},11,[54,321,322],{"class":71},"console.",[54,324,325],{"class":98},"log",[54,327,328],{"class":71},"(backgroundColor);\n",[54,330,332,335,338,341,344,348,351,353],{"class":56,"line":331},12,[54,333,334],{"class":71},"    const ",[54,336,337],{"class":98},"sketch",[54,339,340],{"class":67}," =",[54,342,343],{"class":71}," (",[54,345,347],{"class":346},"s9osk","s",[54,349,350],{"class":71},") ",[54,352,105],{"class":67},[54,354,108],{"class":71},[54,356,358,361,364,366,369,372,375,377],{"class":56,"line":357},13,[54,359,360],{"class":67},"        const",[54,362,363],{"class":297}," c",[54,365,340],{"class":67},[54,367,368],{"class":71}," document.",[54,370,371],{"class":98},"getElementById",[54,373,374],{"class":71},"(",[54,376,234],{"class":78},[54,378,379],{"class":71},");\n",[54,381,383],{"class":56,"line":382},14,[54,384,86],{"emptyLinePlaceholder":85},[54,386,388,390,393,395],{"class":56,"line":387},15,[54,389,360],{"class":67},[54,391,392],{"class":297}," WIDTH",[54,394,340],{"class":67},[54,396,397],{"class":71}," c.clientWidth;\n",[54,399,401,403,406,408],{"class":56,"line":400},16,[54,402,360],{"class":67},[54,404,405],{"class":297}," HEIGHT",[54,407,340],{"class":67},[54,409,410],{"class":71}," c.clientHeight;\n",[54,412,414],{"class":56,"line":413},17,[54,415,86],{"emptyLinePlaceholder":85},[54,417,419,422],{"class":56,"line":418},18,[54,420,421],{"class":67},"        let",[54,423,424],{"class":71}," model;\n",[54,426,428,430],{"class":56,"line":427},19,[54,429,421],{"class":67},[54,431,432],{"class":71}," angle;\n",[54,434,436,438,441,443,446],{"class":56,"line":435},20,[54,437,421],{"class":67},[54,439,440],{"class":71}," rotate ",[54,442,231],{"class":67},[54,444,445],{"class":297}," true",[54,447,448],{"class":71},";\n",[54,450,452],{"class":56,"line":451},21,[54,453,86],{"emptyLinePlaceholder":85},[54,455,457,460,463,465,468,470],{"class":56,"line":456},22,[54,458,459],{"class":71},"        s.",[54,461,462],{"class":98},"preload",[54,464,340],{"class":67},[54,466,467],{"class":71}," () ",[54,469,105],{"class":67},[54,471,108],{"class":71},[54,473,475,478,480,483,486,489,492],{"class":56,"line":474},23,[54,476,477],{"class":71},"            model ",[54,479,231],{"class":67},[54,481,482],{"class":71}," s.",[54,484,485],{"class":98},"loadModel",[54,487,488],{"class":71},"(path, ",[54,490,491],{"class":297},"true",[54,493,379],{"class":71},[54,495,497],{"class":56,"line":496},24,[54,498,499],{"class":71},"        };\n",[54,501,503],{"class":56,"line":502},25,[54,504,86],{"emptyLinePlaceholder":85},[54,506,508,510,513,515,517,519],{"class":56,"line":507},26,[54,509,459],{"class":71},[54,511,512],{"class":98},"setup",[54,514,340],{"class":67},[54,516,467],{"class":71},[54,518,105],{"class":67},[54,520,108],{"class":71},[54,522,524,527,530,532,535,538,541,544,547],{"class":56,"line":523},27,[54,525,526],{"class":71},"            s.",[54,528,529],{"class":98},"createCanvas",[54,531,374],{"class":71},[54,533,534],{"class":297},"WIDTH",[54,536,537],{"class":71},", ",[54,539,540],{"class":297},"HEIGHT",[54,542,543],{"class":71},", s.",[54,545,546],{"class":297},"WEBGL",[54,548,379],{"class":71},[54,550,552],{"class":56,"line":551},28,[54,553,499],{"class":71},[54,555,557],{"class":56,"line":556},29,[54,558,86],{"emptyLinePlaceholder":85},[54,560,562,564,567,569,571,573],{"class":56,"line":561},30,[54,563,459],{"class":71},[54,565,566],{"class":98},"mouseClicked",[54,568,340],{"class":67},[54,570,467],{"class":71},[54,572,105],{"class":67},[54,574,108],{"class":71},[54,576,578,581,583,586,589],{"class":56,"line":577},31,[54,579,580],{"class":71},"            rotate ",[54,582,231],{"class":67},[54,584,585],{"class":297}," false",[54,587,588],{"class":71},"; ",[54,590,591],{"class":60},"// disable object rotation on click\n",[54,593,595],{"class":56,"line":594},32,[54,596,499],{"class":71},[54,598,600],{"class":56,"line":599},33,[54,601,86],{"emptyLinePlaceholder":85},[54,603,605,607,610,612,614,616],{"class":56,"line":604},34,[54,606,459],{"class":71},[54,608,609],{"class":98},"draw",[54,611,340],{"class":67},[54,613,467],{"class":71},[54,615,105],{"class":67},[54,617,108],{"class":71},[54,619,621,623,626],{"class":56,"line":620},35,[54,622,526],{"class":71},[54,624,625],{"class":98},"background",[54,627,328],{"class":71},[54,629,631,633,636],{"class":56,"line":630},36,[54,632,526],{"class":71},[54,634,635],{"class":98},"lights",[54,637,638],{"class":71},"();\n",[54,640,642],{"class":56,"line":641},37,[54,643,86],{"emptyLinePlaceholder":85},[54,645,647,650],{"class":56,"line":646},38,[54,648,649],{"class":67},"            if",[54,651,652],{"class":71}," (rotate) {\n",[54,654,656,659,661,664,667,670],{"class":56,"line":655},39,[54,657,658],{"class":71},"                angle ",[54,660,231],{"class":67},[54,662,663],{"class":71}," s.frameCount ",[54,665,666],{"class":67},"*",[54,668,669],{"class":297}," 0.005",[54,671,448],{"class":71},[54,673,675],{"class":56,"line":674},40,[54,676,677],{"class":71},"            }\n",[54,679,681,683,686],{"class":56,"line":680},41,[54,682,526],{"class":71},[54,684,685],{"class":98},"rotateX",[54,687,688],{"class":71},"(angle);\n",[54,690,692,694,697],{"class":56,"line":691},42,[54,693,526],{"class":71},[54,695,696],{"class":98},"rotateY",[54,698,688],{"class":71},[54,700,702,704,707],{"class":56,"line":701},43,[54,703,526],{"class":71},[54,705,706],{"class":98},"orbitControl",[54,708,638],{"class":71},[54,710,712],{"class":56,"line":711},44,[54,713,86],{"emptyLinePlaceholder":85},[54,715,717,719,722],{"class":56,"line":716},45,[54,718,526],{"class":71},[54,720,721],{"class":98},"model",[54,723,724],{"class":71},"(model);\n",[54,726,728],{"class":56,"line":727},46,[54,729,499],{"class":71},[54,731,733],{"class":56,"line":732},47,[54,734,735],{"class":71},"    };\n",[54,737,739],{"class":56,"line":738},48,[54,740,86],{"emptyLinePlaceholder":85},[54,742,744,747,750,753,755],{"class":56,"line":743},49,[54,745,746],{"class":67},"    new",[54,748,749],{"class":98}," $p5",[54,751,752],{"class":71},"(sketch, ",[54,754,234],{"class":78},[54,756,379],{"class":71},[54,758,760],{"class":56,"line":759},50,[54,761,762],{"class":71},"});\n",[54,764,766,768,770],{"class":56,"line":765},51,[54,767,250],{"class":71},[54,769,265],{"class":213},[54,771,217],{"class":71},[11,773,774],{},"Looking forward to sharing more models soon!",[776,777,778],"style",{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s4JwU, html code.shiki .s4JwU{--shiki-default:#85E89D}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}",{"title":50,"searchDepth":64,"depth":64,"links":780},[],[782],"examples","2024-12-31T00:00:00.000Z","Three-dimensional models, whether they be of the format .obj or .stl, can be easily rendered in your Nuxt project by using the p5js.org library.","md",null,{"excerpt":788},{"type":8,"value":789},[790],[11,791,13,792,18,794,22,796,30],{},[15,793,17],{},[15,795,21],{},[24,797,29],{"href":26,"rel":798},[28],"/articles/nuxt-p5js-3d-models",{"title":6,"description":784},"articles/nuxt-p5js-3d-models",[803,804,805],"nuxt","p5js","3d","PajYZQHTFbAQs70Rg6Aa7FERpHnDcANoVRKBo1nBZSI",{"id":808,"title":809,"body":810,"categories":1001,"date":1004,"description":1005,"extension":785,"img":786,"meta":1006,"navigation":85,"path":1017,"seo":1018,"stem":1019,"tags":1020,"__hash__":1023},"content/articles/ssh-ed25519-sk-yubikey.md","Configuring a YubiKey for use with OpenSSH",{"type":8,"value":811,"toc":999},[812,824,833,839,848,859,862,877,884,893,896,921,929,986,996],[11,813,814,819,820,823],{},[24,815,818],{"href":816,"rel":817},"https://www.yubico.com/",[28],"YubiKey's"," are a convenient way to introduce a physical form of two factor authentication into ones workflow. They support a variety of protocols, but in this guide we will walk through how to configure a YubiKey for use with OpenSSH via the \"new\" ",[15,821,822],{},"ed25519-sk"," key type that supports FIDO compliant hardware keys.",[11,825,826,827,832],{},"In ",[24,828,831],{"href":829,"rel":830},"https://www.openssh.com/txt/release-8.2",[28],"release 8.2 of OpenSSH"," support for FIDO devices was added with public key types \"ecdsa-sk\" and \"ed25519-sk\" (-sk standing for \"security key\"). This key type is supported by YubiKey's with firmware version 5.2.3 or higher.",[834,835,836],"blockquote",{},[11,837,838],{},"This release adds support for FIDO/U2F hardware authenticators to OpenSSH. U2F/FIDO are open standards for inexpensive two-factor authentication hardware that are widely used for website authentication.  In OpenSSH FIDO devices are supported by new public key types \"ecdsa-sk\" and \"ed25519-sk\", along with corresponding certificate types.",[11,840,841,842,847],{},"Let's get started by installing the latest version of OpenSSH via ",[24,843,846],{"href":844,"rel":845},"https://brew.sh/",[28],"Homebrew",", along with the YubiKey Manager (ykman) CLI. The version of OpenSSH included with macOS is not compatible.",[45,849,853],{"className":850,"code":851,"language":852,"meta":50,"style":50},"language-sh shiki shiki-themes github-dark","$ brew install openssh ykman\n","sh",[15,854,855],{"__ignoreMap":50},[54,856,857],{"class":56,"line":57},[54,858,851],{},[11,860,861],{},"Then, let's confirm that our YubiKey has a firmware that is greater than 5.2.3:",[45,863,865],{"className":850,"code":864,"language":852,"meta":50,"style":50},"$ ykman list\nYubiKey 5Ci (5.4.3) [OTP+FIDO+CCID]\n",[15,866,867,872],{"__ignoreMap":50},[54,868,869],{"class":56,"line":57},[54,870,871],{},"$ ykman list\n",[54,873,874],{"class":56,"line":64},[54,875,876],{},"YubiKey 5Ci (5.4.3) [OTP+FIDO+CCID]\n",[11,878,879,880,883],{},"Next, we'll go ahead and enable a pin on our device via the ",[15,881,882],{},"change-pin"," command, as this a requirement for our use.",[45,885,887],{"className":850,"code":886,"language":852,"meta":50,"style":50},"$ ykman fido access change-pin\n",[15,888,889],{"__ignoreMap":50},[54,890,891],{"class":56,"line":57},[54,892,886],{},[11,894,895],{},"And last, we'll generate the key on our device!",[45,897,899],{"className":850,"code":898,"language":852,"meta":50,"style":50},"$ ssh-keygen -t ed25519-sk -O resident\nGenerating public/private ed25519-sk key pair.\nYou may need to touch your authenticator to authorize key generation.\n...\n",[15,900,901,906,911,916],{"__ignoreMap":50},[54,902,903],{"class":56,"line":57},[54,904,905],{},"$ ssh-keygen -t ed25519-sk -O resident\n",[54,907,908],{"class":56,"line":64},[54,909,910],{},"Generating public/private ed25519-sk key pair.\n",[54,912,913],{"class":56,"line":82},[54,914,915],{},"You may need to touch your authenticator to authorize key generation.\n",[54,917,918],{"class":56,"line":89},[54,919,920],{},"...\n",[11,922,923,924,928],{},"We specify ",[925,926,927],"em",{},"resident"," to indicate that the key handle is to be stored on the YubiKey itself, since we will be using this device with multiple computers.",[45,930,934],{"className":931,"code":932,"language":933,"meta":50,"style":50},"language-txt shiki shiki-themes github-dark","resident\n        Indicate that the key handle should be stored on the FIDO\n        authenticator itself.  This makes it easier to use the\n        authenticator on multiple computers.  Resident keys may be\n        supported on FIDO2 authenticators and typically require that a PIN\n        be set on the authenticator prior to generation.  Resident keys\n        may be loaded off the authenticator using ssh-add(1).  Storing\n        both parts of a key on a FIDO authenticator increases the\n        likelihood of an attacker being able to use a stolen authenticator\n        device.\n","txt",[15,935,936,941,946,951,956,961,966,971,976,981],{"__ignoreMap":50},[54,937,938],{"class":56,"line":57},[54,939,940],{},"resident\n",[54,942,943],{"class":56,"line":64},[54,944,945],{},"        Indicate that the key handle should be stored on the FIDO\n",[54,947,948],{"class":56,"line":82},[54,949,950],{},"        authenticator itself.  This makes it easier to use the\n",[54,952,953],{"class":56,"line":89},[54,954,955],{},"        authenticator on multiple computers.  Resident keys may be\n",[54,957,958],{"class":56,"line":111},[54,959,960],{},"        supported on FIDO2 authenticators and typically require that a PIN\n",[54,962,963],{"class":56,"line":119},[54,964,965],{},"        be set on the authenticator prior to generation.  Resident keys\n",[54,967,968],{"class":56,"line":125},[54,969,970],{},"        may be loaded off the authenticator using ssh-add(1).  Storing\n",[54,972,973],{"class":56,"line":131},[54,974,975],{},"        both parts of a key on a FIDO authenticator increases the\n",[54,977,978],{"class":56,"line":137},[54,979,980],{},"        likelihood of an attacker being able to use a stolen authenticator\n",[54,982,983],{"class":56,"line":143},[54,984,985],{},"        device.\n",[11,987,988,989,18,992,995],{},"And that's all it takes -- simple enough. Now, when interacting with ",[925,990,991],{},"ssh",[925,993,994],{},"git"," you will be prompted to touch the YubiKey to bring that little bit of physical 2FA.",[776,997,998],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":50,"searchDepth":64,"depth":64,"links":1000},[],[1002,1003],"tooling","tips","2024-06-09T00:00:00.000Z","YubiKey's are a convenient way to introduce a physical form of two factor authentication into ones workflow. They support a variety of protocols, but in this guide we will walk through how to configure a YubiKey for use with OpenSSH via the \"new\" ed25519-sk key type that supports FIDO compliant hardware keys.",{"draft":1007,"excerpt":1008},false,{"type":8,"value":1009},[1010],[11,1011,1012,819,1015,823],{},[24,1013,818],{"href":816,"rel":1014},[28],[15,1016,822],{},"/articles/ssh-ed25519-sk-yubikey",{"title":809,"description":1005},"articles/ssh-ed25519-sk-yubikey",[1021,1022],"unix","configurations","EsuD6B-6aacxqbT-UAYHOgGtLSumC_WFaGSvKnwShJ8",{"id":1025,"title":1026,"body":1027,"categories":1185,"date":1186,"description":1187,"extension":785,"img":786,"meta":1188,"navigation":85,"path":1200,"seo":1201,"stem":1202,"tags":1203,"__hash__":1206},"content/articles/vim-fugitive-gpg-pinentry.md","Using pinentry-mac to sign commits from vim-fugitive",{"type":8,"value":1028,"toc":1181},[1029,1046,1051,1072,1076,1079,1100,1110,1116,1122,1141,1144,1175,1178],[11,1030,1031,1032,1037,1038,1041,1042,1045],{},"In order to sign git commits from within Vim using a plugin like ",[24,1033,1036],{"href":1034,"rel":1035},"https://github.com/tpope/vim-fugitive",[28],"tpope/vim-fugitive",", it is necessary to configure the ",[15,1039,1040],{},"gpg-agent"," to use a GUI based ",[15,1043,1044],{},"pinentry-program",".",[1047,1048,1050],"h2",{"id":1049},"preface","Preface",[11,1052,1053,1054,1059,1060,1041,1062,1064,1065,1068,1069,1045],{},"The man, the myth, the legend, Timothy Popallopollis himself ",[24,1055,1058],{"href":1056,"rel":1057},"https://github.com/tpope/vim-fugitive/issues/846#issuecomment-253816577",[28],"recommends"," configuring your ",[15,1061,1040],{},[15,1063,1044],{},". On macOS this can be done quite by simply installing ",[15,1066,1067],{},"pinentry-mac",", and updating your ",[15,1070,1071],{},"gpg-agent.conf",[1047,1073,1075],{"id":1074},"configuration","Configuration",[11,1077,1078],{},"First things first, let's install the pinentry program.",[45,1080,1084],{"className":1081,"code":1082,"language":1083,"meta":50,"style":50},"language-bash shiki shiki-themes github-dark","$ brew install pinentry-mac\n","bash",[15,1085,1086],{"__ignoreMap":50},[54,1087,1088,1091,1094,1097],{"class":56,"line":57},[54,1089,1090],{"class":98},"$",[54,1092,1093],{"class":78}," brew",[54,1095,1096],{"class":78}," install",[54,1098,1099],{"class":78}," pinentry-mac\n",[11,1101,1102,1103,1105,1106,1109],{},"Then, all we need to do is set the ",[15,1104,1044],{}," option in your ",[15,1107,1108],{},"~/.gnupg/gpg-agent.conf"," file.",[45,1111,1114],{"className":1112,"code":1113,"language":175},[173],"default-cache-ttl 600\nmax-cache-ttl 7200\npinentry-program /opt/homebrew/bin/pinentry-mac\n",[15,1115,1113],{"__ignoreMap":50},[11,1117,1118,1119,1045],{},"If your don't know the path to your pinentry program, you can throw down a quick ",[15,1120,1121],{},"which",[45,1123,1125],{"className":1081,"code":1124,"language":1083,"meta":50,"style":50},"$ which pinentry-mac\n/opt/homebrew/bin/pinentry-mac\n",[15,1126,1127,1136],{"__ignoreMap":50},[54,1128,1129,1131,1134],{"class":56,"line":57},[54,1130,1090],{"class":98},[54,1132,1133],{"class":78}," which",[54,1135,1099],{"class":78},[54,1137,1138],{"class":56,"line":64},[54,1139,1140],{"class":98},"/opt/homebrew/bin/pinentry-mac\n",[11,1142,1143],{},"Or use your Homebrew prefix.",[45,1145,1147],{"className":1081,"code":1146,"language":1083,"meta":50,"style":50},"$ echo $(brew --prefix)/bin/pinentry-mac\n/opt/homebrew/bin/pinentry-mac\n",[15,1148,1149,1171],{"__ignoreMap":50},[54,1150,1151,1153,1156,1159,1162,1165,1168],{"class":56,"line":57},[54,1152,1090],{"class":98},[54,1154,1155],{"class":78}," echo",[54,1157,1158],{"class":71}," $(",[54,1160,1161],{"class":98},"brew",[54,1163,1164],{"class":297}," --prefix",[54,1166,1167],{"class":71},")",[54,1169,1170],{"class":78},"/bin/pinentry-mac\n",[54,1172,1173],{"class":56,"line":64},[54,1174,1140],{"class":98},[11,1176,1177],{},"But that's all it takes. Now, you should be prompted to enter your gpg pin in an external window when signing commits from vim.",[776,1179,1180],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}",{"title":50,"searchDepth":64,"depth":64,"links":1182},[1183,1184],{"id":1049,"depth":64,"text":1050},{"id":1074,"depth":64,"text":1075},[1002,1003],"2024-05-11T00:00:00.000Z","In order to sign git commits from within Vim using a plugin like tpope/vim-fugitive, it is necessary to configure the gpg-agent to use a GUI based pinentry-program.",{"draft":1007,"excerpt":1189},{"type":8,"value":1190},[1191],[11,1192,1031,1193,1037,1196,1041,1198,1045],{},[24,1194,1036],{"href":1034,"rel":1195},[28],[15,1197,1040],{},[15,1199,1044],{},"/articles/vim-fugitive-gpg-pinentry",{"title":1026,"description":1187},"articles/vim-fugitive-gpg-pinentry",[1204,1205],"vim","tip","Ce19MdudjD8vmCEgz7MrTkpnn2IR5GC9GvS-Xjn95KI",{"id":1208,"title":1209,"body":1210,"categories":1504,"date":1506,"description":1507,"extension":785,"img":786,"meta":1508,"navigation":85,"path":1522,"seo":1523,"stem":1524,"tags":1525,"__hash__":1527},"content/articles/podcast-transcription-whispercpp.md","Easily Transcribe Podcasts with Whisper.cpp",{"type":8,"value":1211,"toc":1499},[1212,1233,1237,1257,1287,1293,1350,1357,1363,1406,1409,1488,1491,1497],[11,1213,1214,1215,1220,1221,1226,1227,1232],{},"If you've ever had the need to transcribe a podcast, lecture, or some other audio recording, it turns out it's surprisingly easy with the extremely impressive ",[24,1216,1219],{"href":1217,"rel":1218},"https://github.com/ggerganov/whisper.cpp",[28],"whisper.cpp"," project. This high-performance fork of ",[24,1222,1225],{"href":1223,"rel":1224},"https://github.com/openai/whisper",[28],"OpenAI's Whisper"," can run on all sorts of hardware -- including my M1 Mac Mini. Let's walk through an example from start-to-finish of transcribing an episode of the ",[24,1228,1231],{"href":1229,"rel":1230},"https://podcasts.apple.com/us/podcast/alter-everything/id1356137854",[28],"Alter Everything"," podcast.",[1047,1234,1236],{"id":1235},"obtain-audio-files","Obtain Audio File(s)",[11,1238,1239,1240,1243,1244,1247,1248,1250,1251,1253,1254,1045],{},"First, let's get the ",[15,1241,1242],{},"wav"," file from YouTube using the ",[15,1245,1246],{},"youtube-dl"," utility. It should be noted that ",[15,1249,1219],{}," expects ",[15,1252,1242],{}," filetypes, and this utility defaults to ",[15,1255,1256],{},"mp3",[45,1258,1260],{"className":850,"code":1259,"language":852,"meta":50,"style":50}," $ youtube-dl \\\n    --extract-audio \\\n    --audio-format wav \\\n    --output podcast.wav \\\n    \"https://www.youtube.com/watch?v=CoUN690wSYQ\"\n",[15,1261,1262,1267,1272,1277,1282],{"__ignoreMap":50},[54,1263,1264],{"class":56,"line":57},[54,1265,1266],{}," $ youtube-dl \\\n",[54,1268,1269],{"class":56,"line":64},[54,1270,1271],{},"    --extract-audio \\\n",[54,1273,1274],{"class":56,"line":82},[54,1275,1276],{},"    --audio-format wav \\\n",[54,1278,1279],{"class":56,"line":89},[54,1280,1281],{},"    --output podcast.wav \\\n",[54,1283,1284],{"class":56,"line":111},[54,1285,1286],{},"    \"https://www.youtube.com/watch?v=CoUN690wSYQ\"\n",[11,1288,1289,1290,1292],{},"This file has a 44.1 kHz sample rate, and ",[15,1291,1219],{}," expects 16 kHz, so let's go ahead and convert that.",[45,1294,1296],{"className":850,"code":1295,"language":852,"meta":50,"style":50}," $ file podcast.wav\npodcast.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 44100 Hz\n\n $ ffmpeg -i podcast.wav -ar 16000 podcast-16khz.wav\n\n $ file podcast-16khz.wav\npodcast-16khz.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 16000 Hz\n\n# NOTE: it looks like it's possible to specify this conversion as a post-process as a\n# flag to the `youtube-dl` command -- I will explore this further next time...\n# youtube-dl --extract-audio --audio-quality 0 --audio-format mp3 --postprocessor-args \"-ar 44100\" %dl%\n",[15,1297,1298,1303,1308,1312,1317,1321,1326,1331,1335,1340,1345],{"__ignoreMap":50},[54,1299,1300],{"class":56,"line":57},[54,1301,1302],{}," $ file podcast.wav\n",[54,1304,1305],{"class":56,"line":64},[54,1306,1307],{},"podcast.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 44100 Hz\n",[54,1309,1310],{"class":56,"line":82},[54,1311,86],{"emptyLinePlaceholder":85},[54,1313,1314],{"class":56,"line":89},[54,1315,1316],{}," $ ffmpeg -i podcast.wav -ar 16000 podcast-16khz.wav\n",[54,1318,1319],{"class":56,"line":111},[54,1320,86],{"emptyLinePlaceholder":85},[54,1322,1323],{"class":56,"line":119},[54,1324,1325],{}," $ file podcast-16khz.wav\n",[54,1327,1328],{"class":56,"line":125},[54,1329,1330],{},"podcast-16khz.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 16000 Hz\n",[54,1332,1333],{"class":56,"line":131},[54,1334,86],{"emptyLinePlaceholder":85},[54,1336,1337],{"class":56,"line":137},[54,1338,1339],{},"# NOTE: it looks like it's possible to specify this conversion as a post-process as a\n",[54,1341,1342],{"class":56,"line":143},[54,1343,1344],{},"# flag to the `youtube-dl` command -- I will explore this further next time...\n",[54,1346,1347],{"class":56,"line":319},[54,1348,1349],{},"# youtube-dl --extract-audio --audio-quality 0 --audio-format mp3 --postprocessor-args \"-ar 44100\" %dl%\n",[1047,1351,1353,1354,1356],{"id":1352},"build-whispercpp-transcribe-audio","Build ",[15,1355,1219],{}," & Transcribe Audio",[11,1358,1359,1360,1362],{},"Then, let's get the latest version of ",[15,1361,1219],{},", download the English Whisper model, and build the example.",[45,1364,1366],{"className":850,"code":1365,"language":852,"meta":50,"style":50},"# Clone the `whisper.cpp` repository\n $ git clone --depth 1 git@github.com:ggerganov/whisper.cpp && cd whisper.cpp\n\n# Download the English Whisper model in `ggml` format\n $ bash ./models/download-ggml-model.sh base.en\n\n# Build the main example\n $ make\n",[15,1367,1368,1373,1378,1382,1387,1392,1396,1401],{"__ignoreMap":50},[54,1369,1370],{"class":56,"line":57},[54,1371,1372],{},"# Clone the `whisper.cpp` repository\n",[54,1374,1375],{"class":56,"line":64},[54,1376,1377],{}," $ git clone --depth 1 git@github.com:ggerganov/whisper.cpp && cd whisper.cpp\n",[54,1379,1380],{"class":56,"line":82},[54,1381,86],{"emptyLinePlaceholder":85},[54,1383,1384],{"class":56,"line":89},[54,1385,1386],{},"# Download the English Whisper model in `ggml` format\n",[54,1388,1389],{"class":56,"line":111},[54,1390,1391],{}," $ bash ./models/download-ggml-model.sh base.en\n",[54,1393,1394],{"class":56,"line":119},[54,1395,86],{"emptyLinePlaceholder":85},[54,1397,1398],{"class":56,"line":125},[54,1399,1400],{},"# Build the main example\n",[54,1402,1403],{"class":56,"line":131},[54,1404,1405],{}," $ make\n",[11,1407,1408],{},"And finally, let's transcribe that podcast!",[45,1410,1412],{"className":850,"code":1411,"language":852,"meta":50,"style":50}," $ ./main \\\n    -m ~/workspace/whisper.cpp/models/ggml-base.en.bin \\\n    -f ~/Downloads/podcast-16khz.wav \\\n    --output-vtt \\\n    --output-file out\n\n# whisper_print_timings:     load time =   114.71 ms\n# whisper_print_timings:     fallbacks =   0 p /   0 h\n# whisper_print_timings:      mel time =   692.20 ms\n# whisper_print_timings:   sample time = 22278.10 ms / 27893 runs (    0.80 ms per run)\n# whisper_print_timings:   encode time = 10000.75 ms /    55 runs (  181.83 ms per run)\n# whisper_print_timings:   decode time =   331.77 ms /    54 runs (    6.14 ms per run)\n# whisper_print_timings:   batchd time = 45236.73 ms / 27566 runs (    1.64 ms per run)\n# whisper_print_timings:   prompt time =  1921.90 ms / 11832 runs (    0.16 ms per run)\n# whisper_print_timings:    total time = 80709.54 ms\n",[15,1413,1414,1419,1424,1429,1434,1439,1443,1448,1453,1458,1463,1468,1473,1478,1483],{"__ignoreMap":50},[54,1415,1416],{"class":56,"line":57},[54,1417,1418],{}," $ ./main \\\n",[54,1420,1421],{"class":56,"line":64},[54,1422,1423],{},"    -m ~/workspace/whisper.cpp/models/ggml-base.en.bin \\\n",[54,1425,1426],{"class":56,"line":82},[54,1427,1428],{},"    -f ~/Downloads/podcast-16khz.wav \\\n",[54,1430,1431],{"class":56,"line":89},[54,1432,1433],{},"    --output-vtt \\\n",[54,1435,1436],{"class":56,"line":111},[54,1437,1438],{},"    --output-file out\n",[54,1440,1441],{"class":56,"line":119},[54,1442,86],{"emptyLinePlaceholder":85},[54,1444,1445],{"class":56,"line":125},[54,1446,1447],{},"# whisper_print_timings:     load time =   114.71 ms\n",[54,1449,1450],{"class":56,"line":131},[54,1451,1452],{},"# whisper_print_timings:     fallbacks =   0 p /   0 h\n",[54,1454,1455],{"class":56,"line":137},[54,1456,1457],{},"# whisper_print_timings:      mel time =   692.20 ms\n",[54,1459,1460],{"class":56,"line":143},[54,1461,1462],{},"# whisper_print_timings:   sample time = 22278.10 ms / 27893 runs (    0.80 ms per run)\n",[54,1464,1465],{"class":56,"line":319},[54,1466,1467],{},"# whisper_print_timings:   encode time = 10000.75 ms /    55 runs (  181.83 ms per run)\n",[54,1469,1470],{"class":56,"line":331},[54,1471,1472],{},"# whisper_print_timings:   decode time =   331.77 ms /    54 runs (    6.14 ms per run)\n",[54,1474,1475],{"class":56,"line":357},[54,1476,1477],{},"# whisper_print_timings:   batchd time = 45236.73 ms / 27566 runs (    1.64 ms per run)\n",[54,1479,1480],{"class":56,"line":382},[54,1481,1482],{},"# whisper_print_timings:   prompt time =  1921.90 ms / 11832 runs (    0.16 ms per run)\n",[54,1484,1485],{"class":56,"line":387},[54,1486,1487],{},"# whisper_print_timings:    total time = 80709.54 ms\n",[11,1489,1490],{},"A full podcast transcribed in ~80 seconds on an M1 Mac Mini -- not too bad!",[45,1492,1495],{"className":1493,"code":1494,"language":175},[173],"# out.vtt\n\n00:00:00.000 --> 00:00:06.480\n >> Hi everyone. We recently launched a short engagement feedback survey for the Alter Everything\n\n00:00:06.480 --> 00:00:11.360\n podcast. Click the link in the episode description wherever you're listening to let us know what\n\n00:00:11.360 --> 00:00:16.320\n you think and help us improve our show.\n\n00:00:16.320 --> 00:00:21.200\n Welcome to Alter Everything, a podcast about data science and analytics culture. I'm Megan\n\n00:00:21.200 --> 00:00:26.440\n Dibble and today I'm talking with Nick Schrock, CTO and founder of Dagster Labs. We discussed\n\n00:00:26.440 --> 00:00:31.560\n data engineering trends, challenges in the field, why he started his company, and what\n\n00:00:31.560 --> 00:00:38.960\n makes him excited about the future of data engineering. Let's get started.\n\n00:00:38.960 --> 00:00:42.720\n >> Hi, Nick. It's great to have you on our show today. Thanks for being here.\n\n00:00:42.720 --> 00:00:43.920\n >> Thanks for having me.\n\n00:00:43.920 --> 00:00:48.280\n >> Yeah. Could you start off by giving an introduction to yourself for our listeners?\n\n00:00:48.280 --> 00:00:52.920\n >> Sure. My name is Nick Schrock. I'm the CTO and founder of Dagster Labs. There's the\n\n00:00:52.920 --> 00:00:59.520\n company behind Dagster, which is a data orchestration framework. Prior to doing this, I was an engineer\n\n00:00:59.520 --> 00:01:05.960\n at Facebook from 2009, 2017. While I was there, I found a team called product infrastructure\n\n00:01:05.960 --> 00:01:09.800\n whose goal was to make our application developers more efficient and productive, and a bunch\n\n00:01:09.800 --> 00:01:13.840\n of open source work came out of that actually, one of which was React, which I had nothing\n\n00:01:13.840 --> 00:01:18.040\n to do with, but actually the CEO of Dagster Labs co-created and I personally co-created\n\n00:01:18.040 --> 00:01:22.640\n GraphQL. So as I like to say, Pete and I were present at the creation of the full hipster\n\n00:01:22.640 --> 00:01:28.680\n stack. I moved on to Facebook in 2017, figuring out what to do next, and this data engineering\n\n00:01:28.680 --> 00:01:32.960\n and data orchestration problem really got me hooked actually quite soon after I left,\n\n00:01:32.960 --> 00:01:36.280\n and the rest is history. I'm sure we'll get into that more.\n",[15,1496,1494],{"__ignoreMap":50},[776,1498,998],{},{"title":50,"searchDepth":64,"depth":64,"links":1500},[1501,1502],{"id":1235,"depth":64,"text":1236},{"id":1352,"depth":64,"text":1503},"Build whisper.cpp & Transcribe Audio",[1505],"programming","2024-01-08T00:00:00.000Z","If you've ever had the need to transcribe a podcast, lecture, or some other audio recording, it turns out it's surprisingly easy with the extremely impressive whisper.cpp project. This high-performance fork of OpenAI's Whisper can run on all sorts of hardware -- including my M1 Mac Mini. Let's walk through an example from start-to-finish of transcribing an episode of the Alter Everything podcast.",{"draft":1007,"excerpt":1509},{"type":8,"value":1510},[1511],[11,1512,1214,1513,1220,1516,1226,1519,1232],{},[24,1514,1219],{"href":1217,"rel":1515},[28],[24,1517,1225],{"href":1223,"rel":1518},[28],[24,1520,1231],{"href":1229,"rel":1521},[28],"/articles/podcast-transcription-whispercpp",{"title":1209,"description":1507},"articles/podcast-transcription-whispercpp",[1219,1526],"ml","Qz60XaFRwKk9-LkpYS3ba85-ezm9fuknFXW1ZuFkwBM",{"id":1529,"title":1530,"body":1531,"categories":2493,"date":2494,"description":2495,"extension":785,"img":786,"meta":2496,"navigation":85,"path":2505,"seo":2506,"stem":2507,"tags":2508,"__hash__":2510},"content/articles/nuxt-content-rss-feed.md","How To Add an RSS Feed to a Nuxt Website",{"type":8,"value":1532,"toc":2488},[1533,1542,1544,1559,1563,1572,1593,1603,1620,2131,2150,2192,2196,2203,2206,2222,2228,2437,2445,2485],[11,1534,1535,1536,1541],{},"If you are a user of ",[24,1537,1540],{"href":1538,"rel":1539},"https://content.nuxt.com/",[28],"Nuxt Content"," and you wish to configure an RSS feed for your website, it's a surprisingly straight forward process! In this article, we will walk through the code changes required to host an RSS feed for both a statically generated, and Universal Nuxt application.",[1047,1543,1050],{"id":1049},[11,1545,1546,1547,1552,1553,1558],{},"In version 2 of Nuxt, the community module, ",[24,1548,1551],{"href":1549,"rel":1550},"https://github.com/nuxt-community/feed-module",[28],"nuxt-community/feed-module"," was a popular choice for adding an RSS feed to your website. However, there has been an unresolved ",[24,1554,1557],{"href":1555,"rel":1556},"https://github.com/nuxt-community/feed-module/issues/106",[28],"open issue"," since April 1st, 2022 to add support for Nuxt v3. Thankfully, implementing this feature without a module is relatively straight forward.",[1047,1560,1562],{"id":1561},"instructions","Instructions",[11,1564,1565,1566,1571],{},"First, install the ",[24,1567,1570],{"href":1568,"rel":1569},"https://www.npmjs.com/package/feed",[28],"feed"," library into your project:",[45,1573,1577],{"className":1574,"code":1575,"language":1576,"meta":50,"style":50},"language-shell shiki shiki-themes github-dark","npm i -D feed\n","shell",[15,1578,1579],{"__ignoreMap":50},[54,1580,1581,1584,1587,1590],{"class":56,"line":57},[54,1582,1583],{"class":98},"npm",[54,1585,1586],{"class":78}," i",[54,1588,1589],{"class":297}," -D",[54,1591,1592],{"class":78}," feed\n",[11,1594,1595,1596,1599,1600,1045],{},"Then, create a ",[15,1597,1598],{},"server/"," folder in your project if it does not already exist, and create a file named ",[15,1601,1602],{},"server/routes/atom.ts",[11,1604,1605,1606,1608,1609,1611,1612,1615,1616,1619],{},"Here, we will leverage the ",[15,1607,1570],{}," library and construct an XML representation of our Nuxt content. As you can see, we first define our ",[15,1610,1570],{}," with metadata associated with our RSS feed. This will be used by RSS readers to provide context to the end user. Then, we query our Nuxt content with ",[15,1613,1614],{},"serverQueryContent"," and append a ",[15,1617,1618],{},"feed.addItem"," for each article.",[45,1621,1625],{"className":1622,"code":1623,"language":1624,"meta":50,"style":50},"language-ts shiki shiki-themes github-dark","import { serverQueryContent } from '#content/server';\nimport { Feed } from 'feed';\n\nconst BASE_URL = \"https://mywebsite.com\"\nconst AUTHOR_NAME = \"Firstname Lastname\"\n\nexport default defineEventHandler(async (event) => {\n\n    const feed = new Feed({\n      title: \"My Title\",\n      description: \"My Description\",\n      id: BASE_URL,\n      link: BASE_URL,\n      language: \"en\",\n      image: `${BASE_URL}/images/placeholder.png`,\n      favicon: `${BASE_URL}/favicon.ico`,\n      copyright: `All rights reserved ${new Date().getFullYear()}, ${AUTHOR_NAME}`,\n      updated: new Date(),\n      generator: \"Nuxt static site generation + Feed for Node.js\",\n      feedLinks: {\n        atom: `${BASE_URL}/atom`\n      },\n      author: {\n        name: AUTHOR_NAME,\n      }\n    });\n\n    const articles = await serverQueryContent(event).find();\n\n    articles.forEach((article) => {\n      feed.addItem({\n        title: article.title ? article.title : \"Missing Title\",\n        id: article._path,\n        link: `${BASE_URL}${article._path}`,\n        description: article.description,\n        author: [\n          {\n            name: AUTHOR_NAME,\n          },\n        ],\n        date: new Date(article.date),\n        image: article.cover_image ? `${BASE_URL}/${article.cover_image}` : undefined\n      });\n    });\n\n    return feed.atom1();\n});\n","ts",[15,1626,1627,1641,1655,1659,1672,1684,1688,1713,1717,1736,1747,1757,1767,1776,1786,1801,1815,1849,1861,1871,1876,1888,1893,1898,1907,1912,1917,1921,1944,1948,1968,1978,1997,2002,2025,2030,2035,2040,2049,2054,2059,2071,2101,2106,2110,2114,2127],{"__ignoreMap":50},[54,1628,1629,1631,1634,1636,1639],{"class":56,"line":57},[54,1630,68],{"class":67},[54,1632,1633],{"class":71}," { serverQueryContent } ",[54,1635,75],{"class":67},[54,1637,1638],{"class":78}," '#content/server'",[54,1640,448],{"class":71},[54,1642,1643,1645,1648,1650,1653],{"class":56,"line":64},[54,1644,68],{"class":67},[54,1646,1647],{"class":71}," { Feed } ",[54,1649,75],{"class":67},[54,1651,1652],{"class":78}," 'feed'",[54,1654,448],{"class":71},[54,1656,1657],{"class":56,"line":82},[54,1658,86],{"emptyLinePlaceholder":85},[54,1660,1661,1664,1667,1669],{"class":56,"line":89},[54,1662,1663],{"class":67},"const",[54,1665,1666],{"class":297}," BASE_URL",[54,1668,340],{"class":67},[54,1670,1671],{"class":78}," \"https://mywebsite.com\"\n",[54,1673,1674,1676,1679,1681],{"class":56,"line":111},[54,1675,1663],{"class":67},[54,1677,1678],{"class":297}," AUTHOR_NAME",[54,1680,340],{"class":67},[54,1682,1683],{"class":78}," \"Firstname Lastname\"\n",[54,1685,1686],{"class":56,"line":119},[54,1687,86],{"emptyLinePlaceholder":85},[54,1689,1690,1692,1694,1697,1699,1702,1704,1707,1709,1711],{"class":56,"line":125},[54,1691,92],{"class":67},[54,1693,95],{"class":67},[54,1695,1696],{"class":98}," defineEventHandler",[54,1698,374],{"class":71},[54,1700,1701],{"class":67},"async",[54,1703,343],{"class":71},[54,1705,1706],{"class":346},"event",[54,1708,350],{"class":71},[54,1710,105],{"class":67},[54,1712,108],{"class":71},[54,1714,1715],{"class":56,"line":131},[54,1716,86],{"emptyLinePlaceholder":85},[54,1718,1719,1722,1725,1727,1730,1733],{"class":56,"line":137},[54,1720,1721],{"class":67},"    const",[54,1723,1724],{"class":297}," feed",[54,1726,340],{"class":67},[54,1728,1729],{"class":67}," new",[54,1731,1732],{"class":98}," Feed",[54,1734,1735],{"class":71},"({\n",[54,1737,1738,1741,1744],{"class":56,"line":143},[54,1739,1740],{"class":71},"      title: ",[54,1742,1743],{"class":78},"\"My Title\"",[54,1745,1746],{"class":71},",\n",[54,1748,1749,1752,1755],{"class":56,"line":319},[54,1750,1751],{"class":71},"      description: ",[54,1753,1754],{"class":78},"\"My Description\"",[54,1756,1746],{"class":71},[54,1758,1759,1762,1765],{"class":56,"line":331},[54,1760,1761],{"class":71},"      id: ",[54,1763,1764],{"class":297},"BASE_URL",[54,1766,1746],{"class":71},[54,1768,1769,1772,1774],{"class":56,"line":357},[54,1770,1771],{"class":71},"      link: ",[54,1773,1764],{"class":297},[54,1775,1746],{"class":71},[54,1777,1778,1781,1784],{"class":56,"line":382},[54,1779,1780],{"class":71},"      language: ",[54,1782,1783],{"class":78},"\"en\"",[54,1785,1746],{"class":71},[54,1787,1788,1791,1794,1796,1799],{"class":56,"line":387},[54,1789,1790],{"class":71},"      image: ",[54,1792,1793],{"class":78},"`${",[54,1795,1764],{"class":297},[54,1797,1798],{"class":78},"}/images/placeholder.png`",[54,1800,1746],{"class":71},[54,1802,1803,1806,1808,1810,1813],{"class":56,"line":400},[54,1804,1805],{"class":71},"      favicon: ",[54,1807,1793],{"class":78},[54,1809,1764],{"class":297},[54,1811,1812],{"class":78},"}/favicon.ico`",[54,1814,1746],{"class":71},[54,1816,1817,1820,1823,1826,1829,1832,1835,1838,1841,1844,1847],{"class":56,"line":413},[54,1818,1819],{"class":71},"      copyright: ",[54,1821,1822],{"class":78},"`All rights reserved ${",[54,1824,1825],{"class":67},"new",[54,1827,1828],{"class":98}," Date",[54,1830,1831],{"class":78},"().",[54,1833,1834],{"class":98},"getFullYear",[54,1836,1837],{"class":78},"()",[54,1839,1840],{"class":78},"}, ${",[54,1842,1843],{"class":297},"AUTHOR_NAME",[54,1845,1846],{"class":78},"}`",[54,1848,1746],{"class":71},[54,1850,1851,1854,1856,1858],{"class":56,"line":418},[54,1852,1853],{"class":71},"      updated: ",[54,1855,1825],{"class":67},[54,1857,1828],{"class":98},[54,1859,1860],{"class":71},"(),\n",[54,1862,1863,1866,1869],{"class":56,"line":427},[54,1864,1865],{"class":71},"      generator: ",[54,1867,1868],{"class":78},"\"Nuxt static site generation + Feed for Node.js\"",[54,1870,1746],{"class":71},[54,1872,1873],{"class":56,"line":435},[54,1874,1875],{"class":71},"      feedLinks: {\n",[54,1877,1878,1881,1883,1885],{"class":56,"line":451},[54,1879,1880],{"class":71},"        atom: ",[54,1882,1793],{"class":78},[54,1884,1764],{"class":297},[54,1886,1887],{"class":78},"}/atom`\n",[54,1889,1890],{"class":56,"line":456},[54,1891,1892],{"class":71},"      },\n",[54,1894,1895],{"class":56,"line":474},[54,1896,1897],{"class":71},"      author: {\n",[54,1899,1900,1903,1905],{"class":56,"line":496},[54,1901,1902],{"class":71},"        name: ",[54,1904,1843],{"class":297},[54,1906,1746],{"class":71},[54,1908,1909],{"class":56,"line":502},[54,1910,1911],{"class":71},"      }\n",[54,1913,1914],{"class":56,"line":507},[54,1915,1916],{"class":71},"    });\n",[54,1918,1919],{"class":56,"line":523},[54,1920,86],{"emptyLinePlaceholder":85},[54,1922,1923,1925,1928,1930,1933,1936,1939,1942],{"class":56,"line":551},[54,1924,1721],{"class":67},[54,1926,1927],{"class":297}," articles",[54,1929,340],{"class":67},[54,1931,1932],{"class":67}," await",[54,1934,1935],{"class":98}," serverQueryContent",[54,1937,1938],{"class":71},"(event).",[54,1940,1941],{"class":98},"find",[54,1943,638],{"class":71},[54,1945,1946],{"class":56,"line":556},[54,1947,86],{"emptyLinePlaceholder":85},[54,1949,1950,1953,1956,1959,1962,1964,1966],{"class":56,"line":561},[54,1951,1952],{"class":71},"    articles.",[54,1954,1955],{"class":98},"forEach",[54,1957,1958],{"class":71},"((",[54,1960,1961],{"class":346},"article",[54,1963,350],{"class":71},[54,1965,105],{"class":67},[54,1967,108],{"class":71},[54,1969,1970,1973,1976],{"class":56,"line":577},[54,1971,1972],{"class":71},"      feed.",[54,1974,1975],{"class":98},"addItem",[54,1977,1735],{"class":71},[54,1979,1980,1983,1986,1989,1992,1995],{"class":56,"line":594},[54,1981,1982],{"class":71},"        title: article.title ",[54,1984,1985],{"class":67},"?",[54,1987,1988],{"class":71}," article.title ",[54,1990,1991],{"class":67},":",[54,1993,1994],{"class":78}," \"Missing Title\"",[54,1996,1746],{"class":71},[54,1998,1999],{"class":56,"line":599},[54,2000,2001],{"class":71},"        id: article._path,\n",[54,2003,2004,2007,2009,2011,2014,2016,2018,2021,2023],{"class":56,"line":604},[54,2005,2006],{"class":71},"        link: ",[54,2008,1793],{"class":78},[54,2010,1764],{"class":297},[54,2012,2013],{"class":78},"}${",[54,2015,1961],{"class":71},[54,2017,1045],{"class":78},[54,2019,2020],{"class":71},"_path",[54,2022,1846],{"class":78},[54,2024,1746],{"class":71},[54,2026,2027],{"class":56,"line":620},[54,2028,2029],{"class":71},"        description: article.description,\n",[54,2031,2032],{"class":56,"line":630},[54,2033,2034],{"class":71},"        author: [\n",[54,2036,2037],{"class":56,"line":641},[54,2038,2039],{"class":71},"          {\n",[54,2041,2042,2045,2047],{"class":56,"line":646},[54,2043,2044],{"class":71},"            name: ",[54,2046,1843],{"class":297},[54,2048,1746],{"class":71},[54,2050,2051],{"class":56,"line":655},[54,2052,2053],{"class":71},"          },\n",[54,2055,2056],{"class":56,"line":674},[54,2057,2058],{"class":71},"        ],\n",[54,2060,2061,2064,2066,2068],{"class":56,"line":680},[54,2062,2063],{"class":71},"        date: ",[54,2065,1825],{"class":67},[54,2067,1828],{"class":98},[54,2069,2070],{"class":71},"(article.date),\n",[54,2072,2073,2076,2078,2081,2083,2086,2088,2090,2093,2095,2098],{"class":56,"line":691},[54,2074,2075],{"class":71},"        image: article.cover_image ",[54,2077,1985],{"class":67},[54,2079,2080],{"class":78}," `${",[54,2082,1764],{"class":297},[54,2084,2085],{"class":78},"}/${",[54,2087,1961],{"class":71},[54,2089,1045],{"class":78},[54,2091,2092],{"class":71},"cover_image",[54,2094,1846],{"class":78},[54,2096,2097],{"class":67}," :",[54,2099,2100],{"class":297}," undefined\n",[54,2102,2103],{"class":56,"line":701},[54,2104,2105],{"class":71},"      });\n",[54,2107,2108],{"class":56,"line":711},[54,2109,1916],{"class":71},[54,2111,2112],{"class":56,"line":716},[54,2113,86],{"emptyLinePlaceholder":85},[54,2115,2116,2119,2122,2125],{"class":56,"line":727},[54,2117,2118],{"class":67},"    return",[54,2120,2121],{"class":71}," feed.",[54,2123,2124],{"class":98},"atom1",[54,2126,638],{"class":71},[54,2128,2129],{"class":56,"line":732},[54,2130,762],{"class":71},[11,2132,2133,2134,2137,2138,2141,2142,2145,2146,2149],{},"And that's just about it! Except, if you are statically generating your website with the ",[15,2135,2136],{},"nuxt generate"," command, you will need to configure this server-side route to be pre-rendered on site generation.  This is as simple as adding a ",[15,2139,2140],{},"nitro"," ",[15,2143,2144],{},"prerender"," definition in your ",[15,2147,2148],{},"nuxt.config.ts"," file, like so:",[45,2151,2153],{"className":1622,"code":2152,"language":1624,"meta":50,"style":50},"nitro: {\n  prerender: {\n    routes: ['/atom']\n  }\n}\n",[15,2154,2155,2162,2169,2183,2187],{"__ignoreMap":50},[54,2156,2157,2159],{"class":56,"line":57},[54,2158,2140],{"class":98},[54,2160,2161],{"class":71},": {\n",[54,2163,2164,2167],{"class":56,"line":64},[54,2165,2166],{"class":98},"  prerender",[54,2168,2161],{"class":71},[54,2170,2171,2174,2177,2180],{"class":56,"line":82},[54,2172,2173],{"class":98},"    routes",[54,2175,2176],{"class":71},": [",[54,2178,2179],{"class":78},"'/atom'",[54,2181,2182],{"class":71},"]\n",[54,2184,2185],{"class":56,"line":89},[54,2186,140],{"class":71},[54,2188,2189],{"class":56,"line":111},[54,2190,2191],{"class":71},"}\n",[1047,2193,2195],{"id":2194},"bonus","Bonus",[11,2197,2198,2199,2202],{},"You may also be interested in adding a ",[15,2200,2201],{},"sitemap.xml"," to your website. This can be done in almost an identical fashion!",[11,2204,2205],{},"Install the dependency:",[45,2207,2209],{"className":1574,"code":2208,"language":1576,"meta":50,"style":50},"npm i -D sitemap\n",[15,2210,2211],{"__ignoreMap":50},[54,2212,2213,2215,2217,2219],{"class":56,"line":57},[54,2214,1583],{"class":98},[54,2216,1586],{"class":78},[54,2218,1589],{"class":297},[54,2220,2221],{"class":78}," sitemap\n",[11,2223,2224,2225,1991],{},"Create a route at ",[15,2226,2227],{},"server/routes/sitemap.xml.ts",[45,2229,2231],{"className":1622,"code":2230,"language":1624,"meta":50,"style":50},"import { serverQueryContent } from '#content/server';\nimport { SitemapStream, streamToPromise } from 'sitemap';\n\nexport default defineEventHandler(async (event) => {\n    const articles = await serverQueryContent(event).find();\n\n    const sitemap = new SitemapStream({ hostname: 'https://my-website.com/' });\n\n    // Add non nuxt content endpoints here\n    sitemap.write({ url: '/' });\n    sitemap.write({ url: '/articles' });\n\n    // Dynamically generate routes for Nuxt markdown content\n    articles.forEach((article) => sitemap.write({ url: article._path, changefreq: 'monthly' }));\n    sitemap.end();\n\n    return (await streamToPromise(sitemap));\n});\n",[15,2232,2233,2245,2259,2263,2285,2303,2307,2330,2334,2339,2355,2368,2372,2377,2405,2414,2418,2433],{"__ignoreMap":50},[54,2234,2235,2237,2239,2241,2243],{"class":56,"line":57},[54,2236,68],{"class":67},[54,2238,1633],{"class":71},[54,2240,75],{"class":67},[54,2242,1638],{"class":78},[54,2244,448],{"class":71},[54,2246,2247,2249,2252,2254,2257],{"class":56,"line":64},[54,2248,68],{"class":67},[54,2250,2251],{"class":71}," { SitemapStream, streamToPromise } ",[54,2253,75],{"class":67},[54,2255,2256],{"class":78}," 'sitemap'",[54,2258,448],{"class":71},[54,2260,2261],{"class":56,"line":82},[54,2262,86],{"emptyLinePlaceholder":85},[54,2264,2265,2267,2269,2271,2273,2275,2277,2279,2281,2283],{"class":56,"line":89},[54,2266,92],{"class":67},[54,2268,95],{"class":67},[54,2270,1696],{"class":98},[54,2272,374],{"class":71},[54,2274,1701],{"class":67},[54,2276,343],{"class":71},[54,2278,1706],{"class":346},[54,2280,350],{"class":71},[54,2282,105],{"class":67},[54,2284,108],{"class":71},[54,2286,2287,2289,2291,2293,2295,2297,2299,2301],{"class":56,"line":111},[54,2288,1721],{"class":67},[54,2290,1927],{"class":297},[54,2292,340],{"class":67},[54,2294,1932],{"class":67},[54,2296,1935],{"class":98},[54,2298,1938],{"class":71},[54,2300,1941],{"class":98},[54,2302,638],{"class":71},[54,2304,2305],{"class":56,"line":119},[54,2306,86],{"emptyLinePlaceholder":85},[54,2308,2309,2311,2314,2316,2318,2321,2324,2327],{"class":56,"line":125},[54,2310,1721],{"class":67},[54,2312,2313],{"class":297}," sitemap",[54,2315,340],{"class":67},[54,2317,1729],{"class":67},[54,2319,2320],{"class":98}," SitemapStream",[54,2322,2323],{"class":71},"({ hostname: ",[54,2325,2326],{"class":78},"'https://my-website.com/'",[54,2328,2329],{"class":71}," });\n",[54,2331,2332],{"class":56,"line":131},[54,2333,86],{"emptyLinePlaceholder":85},[54,2335,2336],{"class":56,"line":137},[54,2337,2338],{"class":60},"    // Add non nuxt content endpoints here\n",[54,2340,2341,2344,2347,2350,2353],{"class":56,"line":143},[54,2342,2343],{"class":71},"    sitemap.",[54,2345,2346],{"class":98},"write",[54,2348,2349],{"class":71},"({ url: ",[54,2351,2352],{"class":78},"'/'",[54,2354,2329],{"class":71},[54,2356,2357,2359,2361,2363,2366],{"class":56,"line":319},[54,2358,2343],{"class":71},[54,2360,2346],{"class":98},[54,2362,2349],{"class":71},[54,2364,2365],{"class":78},"'/articles'",[54,2367,2329],{"class":71},[54,2369,2370],{"class":56,"line":331},[54,2371,86],{"emptyLinePlaceholder":85},[54,2373,2374],{"class":56,"line":357},[54,2375,2376],{"class":60},"    // Dynamically generate routes for Nuxt markdown content\n",[54,2378,2379,2381,2383,2385,2387,2389,2391,2394,2396,2399,2402],{"class":56,"line":382},[54,2380,1952],{"class":71},[54,2382,1955],{"class":98},[54,2384,1958],{"class":71},[54,2386,1961],{"class":346},[54,2388,350],{"class":71},[54,2390,105],{"class":67},[54,2392,2393],{"class":71}," sitemap.",[54,2395,2346],{"class":98},[54,2397,2398],{"class":71},"({ url: article._path, changefreq: ",[54,2400,2401],{"class":78},"'monthly'",[54,2403,2404],{"class":71}," }));\n",[54,2406,2407,2409,2412],{"class":56,"line":387},[54,2408,2343],{"class":71},[54,2410,2411],{"class":98},"end",[54,2413,638],{"class":71},[54,2415,2416],{"class":56,"line":400},[54,2417,86],{"emptyLinePlaceholder":85},[54,2419,2420,2422,2424,2427,2430],{"class":56,"line":413},[54,2421,2118],{"class":67},[54,2423,343],{"class":71},[54,2425,2426],{"class":67},"await",[54,2428,2429],{"class":98}," streamToPromise",[54,2431,2432],{"class":71},"(sitemap));\n",[54,2434,2435],{"class":56,"line":418},[54,2436,762],{"class":71},[11,2438,2439,2440,2442,2443,1991],{},"And add the ",[15,2441,2144],{}," entry in your ",[15,2444,2148],{},[45,2446,2448],{"className":1622,"code":2447,"language":1624,"meta":50,"style":50},"nitro: {\n  prerender: {\n    routes: ['/sitemap.xml', '/atom']\n  }\n}\n",[15,2449,2450,2456,2462,2477,2481],{"__ignoreMap":50},[54,2451,2452,2454],{"class":56,"line":57},[54,2453,2140],{"class":98},[54,2455,2161],{"class":71},[54,2457,2458,2460],{"class":56,"line":64},[54,2459,2166],{"class":98},[54,2461,2161],{"class":71},[54,2463,2464,2466,2468,2471,2473,2475],{"class":56,"line":82},[54,2465,2173],{"class":98},[54,2467,2176],{"class":71},[54,2469,2470],{"class":78},"'/sitemap.xml'",[54,2472,537],{"class":71},[54,2474,2179],{"class":78},[54,2476,2182],{"class":71},[54,2478,2479],{"class":56,"line":89},[54,2480,140],{"class":71},[54,2482,2483],{"class":56,"line":111},[54,2484,2191],{"class":71},[776,2486,2487],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}",{"title":50,"searchDepth":64,"depth":64,"links":2489},[2490,2491,2492],{"id":1049,"depth":64,"text":1050},{"id":1561,"depth":64,"text":1562},{"id":2194,"depth":64,"text":2195},[1505],"2024-01-06T00:00:00.000Z","If you are a user of Nuxt Content and you wish to configure an RSS feed for your website, it's a surprisingly straight forward process! In this article, we will walk through the code changes required to host an RSS feed for both a statically generated, and Universal Nuxt application.",{"draft":1007,"cover_image":2497,"excerpt":2498},"/images/nuxt-content-rss-feed.jpg",{"type":8,"value":2499},[2500],[11,2501,1535,2502,1541],{},[24,2503,1540],{"href":1538,"rel":2504},[28],"/articles/nuxt-content-rss-feed",{"title":1530,"description":2495},"articles/nuxt-content-rss-feed",[803,2509],"rss","qDNoobAycXp_w9fPqpVkFH3iDmavUdj4MzJJflIT07k",{"id":2512,"title":2513,"body":2514,"categories":3128,"date":3129,"description":3130,"extension":785,"img":786,"meta":3131,"navigation":85,"path":3137,"seo":3138,"stem":3139,"tags":3140,"__hash__":3143},"content/articles/fennel-initial-exploration.md","Impressions of Fennel with Hammerspoon",{"type":8,"value":2515,"toc":3122},[2516,2519,2539,2543,2552,2556,2573,2595,2602,2617,2734,2738,2755,2802,2840,2847,3018,3089,3096,3100,3103,3112,3119],[11,2517,2518],{},"A while back I read an introductory book on Lisp programming titled, \"The Little\nSchemer\". This book opened my mind to new (to me) programming paradigms, and left me\nwith a strong desire to find a way to incorporate Lisp programming into my every day\nlife. It took some time, but I believe I've found what I've been looking for: Fennel.",[11,2520,2521,2522,2527,2528,2533,2534,1045],{},"The ",[24,2523,2526],{"href":2524,"rel":2525},"https://fennel-lang.org/",[28],"Fennel"," programming language is a dialect of Lisp that boasts compatibility with\nLua, and it just so happens that two of my favorite applications are configured with\nexactly that language: ",[24,2529,2532],{"href":2530,"rel":2531},"https://www.hammerspoon.org/",[28],"Hammerspoon",", and ",[24,2535,2538],{"href":2536,"rel":2537},"https://neovim.io/",[28],"Neovim",[1047,2540,2542],{"id":2541},"initial-observations","Initial Observations",[11,2544,2545,2546,2551],{},"To initially explore Fennel, I wanted to start small. My Hammerspoon configuration\nconsists of 7 ",[24,2547,2550],{"href":2548,"rel":2549},"https://github.com/cmpadden/dotfiles/tree/795749fa17e1310bb001bb7deaa22be8689f0027/hammerspoon/.hammerspoon/modules",[28],"modules"," that I use for operations such as: launching applications,\nmanaging windows, keeping my computer from going to sleep, and general operating system\nautomation. So the plan is to translate these modules into Fennel, while maintaining\nwithout breaking the existing functionality. However, at this point, I wasn't even sure\nhow to embed Fennel into my project...",[1047,2553,2555],{"id":2554},"integrating-fennel-with-hammerspoon","Integrating Fennel with Hammerspoon",[11,2557,2558,2559,2564,2565,2568,2569,2572],{},"While official documentation exists describing how to ",[24,2560,2563],{"href":2561,"rel":2562},"https://fennel-lang.org/setup#embedding-fennel",[28],"embed fennel"," into your\nproject; it didn't provide me with enough clarity to know my next steps on integrating\nit with Hammerspoon. I found a few resources online demonstrating how to extend the\n",[15,2566,2567],{},"package.path"," and ",[15,2570,2571],{},"package.cpath"," properties in Lua, but I was unable to get this to\nwork.",[2574,2575,2576,2583,2589],"ul",{},[2577,2578,2579],"li",{},[24,2580,2581],{"href":2581,"rel":2582},"https://blog.exupero.org/hammerspoon-with-fennel/",[28],[2577,2584,2585],{},[24,2586,2587],{"href":2587,"rel":2588},"https://github.com/Hammerspoon/hammerspoon/issues/2377#issuecomment-636331435",[28],[2577,2590,2591],{},[24,2592,2593],{"href":2593,"rel":2594},"https://github.com/agzam/spacehammer/blob/master/init.lua",[28],[11,2596,2597,2598,2601],{},"Ultimately, I opted to include the ",[15,2599,2600],{},"fennel.lua"," file to my Hammerspoon configuration,\nand while not ideal, it does make the configuration nicely self-contained. I'll leave it\nas a future task to include the module installed with LuaRocks.",[11,2603,2604,2605,2608,2609,2612,2613,2616],{},"With Fennel now included in my Hammerspoon configuration, all I need to do is configure\nthe ",[15,2606,2607],{},"fennel.path"," to point to the ",[15,2610,2611],{},"*.fnl"," files in the ",[15,2614,2615],{},".hammerspoon/"," directory, and\nttranslating these modules can begin!",[45,2618,2622],{"className":2619,"code":2620,"language":2621,"meta":50,"style":50},"language-lua shiki shiki-themes github-dark","-- init.lua\n\nlocal fennel = require('fennel')\n\nfennel.path = package.path .. \";\" .. os.getenv(\"HOME\") .. \"/.hammerspoon/?.fnl\"\n\ntable.insert(package.loaders or package.searchers, fennel.searcher)\n\nrequire 'main'\n","lua",[15,2623,2624,2629,2633,2654,2658,2694,2698,2722,2726],{"__ignoreMap":50},[54,2625,2626],{"class":56,"line":57},[54,2627,2628],{"class":60},"-- init.lua\n",[54,2630,2631],{"class":56,"line":64},[54,2632,86],{"emptyLinePlaceholder":85},[54,2634,2635,2638,2641,2643,2646,2648,2651],{"class":56,"line":82},[54,2636,2637],{"class":67},"local",[54,2639,2640],{"class":71}," fennel ",[54,2642,231],{"class":67},[54,2644,2645],{"class":297}," require",[54,2647,374],{"class":71},[54,2649,2650],{"class":78},"'fennel'",[54,2652,2653],{"class":71},")\n",[54,2655,2656],{"class":56,"line":89},[54,2657,86],{"emptyLinePlaceholder":85},[54,2659,2660,2663,2665,2667,2670,2673,2676,2679,2682,2684,2687,2689,2691],{"class":56,"line":111},[54,2661,2662],{"class":71},"fennel.",[54,2664,164],{"class":98},[54,2666,340],{"class":67},[54,2668,2669],{"class":297}," package.path",[54,2671,2672],{"class":67}," ..",[54,2674,2675],{"class":78}," \";\" ",[54,2677,2678],{"class":67},"..",[54,2680,2681],{"class":297}," os.getenv",[54,2683,374],{"class":71},[54,2685,2686],{"class":78},"\"HOME\"",[54,2688,350],{"class":71},[54,2690,2678],{"class":67},[54,2692,2693],{"class":78}," \"/.hammerspoon/?.fnl\"\n",[54,2695,2696],{"class":56,"line":119},[54,2697,86],{"emptyLinePlaceholder":85},[54,2699,2700,2703,2705,2708,2711,2714,2717,2720],{"class":56,"line":125},[54,2701,2702],{"class":297},"table.insert",[54,2704,374],{"class":71},[54,2706,2707],{"class":297},"package.loaders",[54,2709,2710],{"class":67}," or",[54,2712,2713],{"class":297}," package.searchers",[54,2715,2716],{"class":71},", fennel.",[54,2718,2719],{"class":98},"searcher",[54,2721,2653],{"class":71},[54,2723,2724],{"class":56,"line":131},[54,2725,86],{"emptyLinePlaceholder":85},[54,2727,2728,2731],{"class":56,"line":137},[54,2729,2730],{"class":297},"require",[54,2732,2733],{"class":78}," 'main'\n",[1047,2735,2737],{"id":2736},"translating-lua-to-fennel","Translating Lua to Fennel",[11,2739,2740,2741,2746,2747,2750,2751,2754],{},"As a Fennel novice, I was happy to see that the Fennel project provides an online\ncross-compiler for Lua and Fennel called ",[24,2742,2745],{"href":2743,"rel":2744},"https://fennel-lang.org/see",[28],"anti-fennel",", and while it can generate some\nstrange-looking Fennel code, it was an extremely useful tool for me to get\nup-and-running right away. For example, by pasting the simple ",[15,2748,2749],{},"sleep"," function\nfrom the ",[15,2752,2753],{},"helpers"," module into the compiler:",[45,2756,2758],{"className":2619,"code":2757,"language":2621,"meta":50,"style":50},"function sleep(ms)\n    os.execute(\"sleep \" .. tonumber(ms) / 1000)\nend\n",[15,2759,2760,2771,2797],{"__ignoreMap":50},[54,2761,2762,2765,2768],{"class":56,"line":57},[54,2763,2764],{"class":67},"function",[54,2766,2767],{"class":98}," sleep",[54,2769,2770],{"class":71},"(ms)\n",[54,2772,2773,2776,2778,2781,2783,2786,2789,2792,2795],{"class":56,"line":64},[54,2774,2775],{"class":297},"    os.execute",[54,2777,374],{"class":71},[54,2779,2780],{"class":78},"\"sleep \" ",[54,2782,2678],{"class":67},[54,2784,2785],{"class":297}," tonumber",[54,2787,2788],{"class":71},"(ms) ",[54,2790,2791],{"class":67},"/",[54,2793,2794],{"class":297}," 1000",[54,2796,2653],{"class":71},[54,2798,2799],{"class":56,"line":82},[54,2800,2801],{"class":67},"end\n",[45,2803,2807],{"className":2804,"code":2805,"language":2806,"meta":50,"style":50},"language-lisp shiki shiki-themes github-dark","(fn sleep [ms]\n  (os.execute (.. \"sleep \" (/ (tonumber ms) 1000))))\n","lisp",[15,2808,2809,2819],{"__ignoreMap":50},[54,2810,2811,2814,2816],{"class":56,"line":57},[54,2812,2813],{"class":71},"(fn ",[54,2815,2749],{"class":297},[54,2817,2818],{"class":71}," [ms]\n",[54,2820,2821,2824,2827,2829,2831,2834,2837],{"class":56,"line":64},[54,2822,2823],{"class":71},"  (os.execute (.. ",[54,2825,2826],{"class":78},"\"sleep \"",[54,2828,343],{"class":71},[54,2830,2791],{"class":297},[54,2832,2833],{"class":71}," (tonumber ms) ",[54,2835,2836],{"class":297},"1000",[54,2838,2839],{"class":71},"))))\n",[11,2841,2842,2843,2846],{},"As another example, here is the output for my ",[925,2844,2845],{},"caffeine"," toggle:",[45,2848,2850],{"className":2619,"code":2849,"language":2621,"meta":50,"style":50},"hs.hotkey.bind(HYPER, \"0\", function()\n  hs.caffeinate.toggle(\"displayIdle\")\n  if hs.caffeinate.get(\"displayIdle\") then\n    helpers:show(\"Caffeine Enabled\", nil, helpers.styles.success, helpers.assets.check)\n  else\n    helpers:show(\"Caffeine Disabled\", nil, helpers.styles.error, helpers.assets.ban)\n  end\nend)\n",[15,2851,2852,2878,2898,2922,2965,2970,3007,3012],{"__ignoreMap":50},[54,2853,2854,2857,2860,2862,2865,2868,2871,2873,2875],{"class":56,"line":57},[54,2855,2856],{"class":71},"hs.",[54,2858,2859],{"class":98},"hotkey",[54,2861,1045],{"class":71},[54,2863,2864],{"class":297},"bind",[54,2866,2867],{"class":71},"(HYPER, ",[54,2869,2870],{"class":78},"\"0\"",[54,2872,537],{"class":71},[54,2874,2764],{"class":67},[54,2876,2877],{"class":71},"()\n",[54,2879,2880,2883,2886,2888,2891,2893,2896],{"class":56,"line":64},[54,2881,2882],{"class":71},"  hs.",[54,2884,2885],{"class":98},"caffeinate",[54,2887,1045],{"class":71},[54,2889,2890],{"class":297},"toggle",[54,2892,374],{"class":71},[54,2894,2895],{"class":78},"\"displayIdle\"",[54,2897,2653],{"class":71},[54,2899,2900,2903,2906,2908,2910,2913,2915,2917,2919],{"class":56,"line":82},[54,2901,2902],{"class":67},"  if",[54,2904,2905],{"class":71}," hs.",[54,2907,2885],{"class":98},[54,2909,1045],{"class":71},[54,2911,2912],{"class":297},"get",[54,2914,374],{"class":71},[54,2916,2895],{"class":78},[54,2918,350],{"class":71},[54,2920,2921],{"class":67},"then\n",[54,2923,2924,2927,2929,2932,2934,2937,2939,2942,2945,2948,2950,2953,2955,2958,2960,2963],{"class":56,"line":89},[54,2925,2926],{"class":98},"    helpers",[54,2928,1991],{"class":71},[54,2930,2931],{"class":297},"show",[54,2933,374],{"class":71},[54,2935,2936],{"class":78},"\"Caffeine Enabled\"",[54,2938,537],{"class":71},[54,2940,2941],{"class":297},"nil",[54,2943,2944],{"class":71},", helpers.",[54,2946,2947],{"class":98},"styles",[54,2949,1045],{"class":71},[54,2951,2952],{"class":98},"success",[54,2954,2944],{"class":71},[54,2956,2957],{"class":98},"assets",[54,2959,1045],{"class":71},[54,2961,2962],{"class":98},"check",[54,2964,2653],{"class":71},[54,2966,2967],{"class":56,"line":111},[54,2968,2969],{"class":67},"  else\n",[54,2971,2972,2974,2976,2978,2980,2983,2985,2987,2989,2991,2993,2996,2998,3000,3002,3005],{"class":56,"line":119},[54,2973,2926],{"class":98},[54,2975,1991],{"class":71},[54,2977,2931],{"class":297},[54,2979,374],{"class":71},[54,2981,2982],{"class":78},"\"Caffeine Disabled\"",[54,2984,537],{"class":71},[54,2986,2941],{"class":297},[54,2988,2944],{"class":71},[54,2990,2947],{"class":98},[54,2992,1045],{"class":71},[54,2994,2995],{"class":98},"error",[54,2997,2944],{"class":71},[54,2999,2957],{"class":98},[54,3001,1045],{"class":71},[54,3003,3004],{"class":98},"ban",[54,3006,2653],{"class":71},[54,3008,3009],{"class":56,"line":125},[54,3010,3011],{"class":67},"  end\n",[54,3013,3014,3016],{"class":56,"line":131},[54,3015,2411],{"class":67},[54,3017,2653],{"class":71},[45,3019,3021],{"className":2804,"code":3020,"language":2806,"meta":50,"style":50},"(hs.hotkey.bind HYPER :0\n  (fn [] (hs.caffeinate.toggle :displayIdle)\n    (if (hs.caffeinate.get :displayIdle)\n      (helpers:show \"Caffeine Enabled\" nil helpers.styles.success helpers.assets.check)\n      (helpers:show \"Caffeine Disabled\" nil helpers.styles.error helpers.assets.ban)))) \n",[15,3022,3023,3031,3041,3056,3074],{"__ignoreMap":50},[54,3024,3025,3028],{"class":56,"line":57},[54,3026,3027],{"class":71},"(hs.hotkey.bind HYPER ",[54,3029,3030],{"class":98},":0\n",[54,3032,3033,3036,3039],{"class":56,"line":64},[54,3034,3035],{"class":71},"  (fn [] (hs.caffeinate.toggle ",[54,3037,3038],{"class":98},":displayIdle",[54,3040,2653],{"class":71},[54,3042,3043,3046,3049,3052,3054],{"class":56,"line":82},[54,3044,3045],{"class":71},"    (",[54,3047,3048],{"class":67},"if",[54,3050,3051],{"class":71}," (hs.caffeinate.get ",[54,3053,3038],{"class":98},[54,3055,2653],{"class":71},[54,3057,3058,3061,3063,3066,3068,3071],{"class":56,"line":89},[54,3059,3060],{"class":71},"      (",[54,3062,2753],{"class":297},[54,3064,3065],{"class":71},":show ",[54,3067,2936],{"class":78},[54,3069,3070],{"class":297}," nil",[54,3072,3073],{"class":71}," helpers.styles.success helpers.assets.check)\n",[54,3075,3076,3078,3080,3082,3084,3086],{"class":56,"line":111},[54,3077,3060],{"class":71},[54,3079,2753],{"class":297},[54,3081,3065],{"class":71},[54,3083,2982],{"class":78},[54,3085,3070],{"class":297},[54,3087,3088],{"class":71}," helpers.styles.error helpers.assets.ban))))\n",[11,3090,3091,3092,3095],{},"This was especially helpful for more gnarly modules like the ",[15,3093,3094],{},"window"," module used for\nwindow management, and seeing the Lua and Fennel code side-by-side was a kick starter in\nlearning the language!",[1047,3097,3099],{"id":3098},"next-steps","Next Steps",[11,3101,3102],{},"While my Fennel Hammerspoon configuration now works with parity to its Lua counterpart,\nI have not yet added new features or modules. I look forward to writing new Fennel code,\nand deepen my understanding of Lisp and the Fennel programming language.",[11,3104,3105,3106,3111],{},"Additionally, before beginning this endeavor, I was already aware of projects like\n",[24,3107,3110],{"href":3108,"rel":3109},"https://github.com/agzam/spacehammer",[28],"spacehammer","; a wildly impressive Hammerspoon configuration written in Fennel, but,\nI wanted to start small and learn the integration myself. However, with the basics out\nof the way, I hope to explore this project further, and seek lessons-learned for the\nconfiguration of my own.",[11,3113,3114,3115],{},"The full pull-request for translating my Lua Hammerspoon configuration to Fennel can be\nfound here: ",[24,3116,3117],{"href":3117,"rel":3118},"https://github.com/cmpadden/dotfiles/pull/19/files",[28],[776,3120,3121],{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":50,"searchDepth":64,"depth":64,"links":3123},[3124,3125,3126,3127],{"id":2541,"depth":64,"text":2542},{"id":2554,"depth":64,"text":2555},{"id":2736,"depth":64,"text":2737},{"id":3098,"depth":64,"text":3099},[2806],"2023-10-22T00:00:00.000Z","A while back I read an introductory book on Lisp programming titled, \"The Little\\nSchemer\". This book opened my mind to new (to me) programming paradigms, and left me\\nwith a strong desire to find a way to incorporate Lisp programming into my every day\\nlife. It took some time, but I believe I've found what I've been looking for: Fennel.",{"draft":1007,"cover_image":3132,"excerpt":3133},"/images/dall-e-fennel-hammer.jpeg",{"type":8,"value":3134},[3135],[11,3136,2518],{},"/articles/fennel-initial-exploration",{"title":2513,"description":2518},"articles/fennel-initial-exploration",[2806,3141,3142],"hammerspoon","fennel","oPz--_lu8lNLkeWFcwl8qfqIibgx5S8KVG_y_486EKY",{"id":3145,"title":3146,"body":3147,"categories":3413,"date":3415,"description":3416,"extension":785,"img":786,"meta":3417,"navigation":85,"path":3426,"seo":3427,"stem":3429,"tags":3430,"__hash__":3432},"content/articles/doctl.md","Exploring the Digital Ocean `doctl` Utility",{"type":8,"value":3148,"toc":3411},[3149,3160,3166,3195,3207,3216,3219,3243,3246,3295,3302,3326,3333,3342,3345,3385,3388,3397,3406,3409],[11,3150,3151,3152,3155,3156,3159],{},"I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean ",[15,3153,3154],{},"doctl"," command line utility.\nThis proved to be an ",[925,3157,3158],{},"extremely"," easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.",[11,3161,3162,3163,1045],{},"To start things off, I had to install and setup authentication to Digital Ocean. Doing\nthis on my Mac machine, I opted to use ",[24,3164,846],{"href":844,"rel":3165},[28],[45,3167,3169],{"className":850,"code":3168,"language":852,"meta":50,"style":50},"# install `doctl`\nbrew install doctl\n\n# setup authentication\ndoctl auth init\n",[15,3170,3171,3176,3181,3185,3190],{"__ignoreMap":50},[54,3172,3173],{"class":56,"line":57},[54,3174,3175],{},"# install `doctl`\n",[54,3177,3178],{"class":56,"line":64},[54,3179,3180],{},"brew install doctl\n",[54,3182,3183],{"class":56,"line":82},[54,3184,86],{"emptyLinePlaceholder":85},[54,3186,3187],{"class":56,"line":89},[54,3188,3189],{},"# setup authentication\n",[54,3191,3192],{"class":56,"line":111},[54,3193,3194],{},"doctl auth init\n",[11,3196,3197,3198,3203,3204,1045],{},"While the online ",[24,3199,3202],{"href":3200,"rel":3201},"https://docs.digitalocean.com/reference/doctl/reference/compute/droplet/create/",[28],"documentation"," is fantastic, I instead found myself mostly referencing the outputs of ",[15,3205,3206],{},"--help",[45,3208,3210],{"className":850,"code":3209,"language":852,"meta":50,"style":50},"doctl compute droplet create --help\n",[15,3211,3212],{"__ignoreMap":50},[54,3213,3214],{"class":56,"line":57},[54,3215,3209],{},[11,3217,3218],{},"I had to find the image name of the version of Ubuntu I wanted to install:",[45,3220,3222],{"className":850,"code":3221,"language":852,"meta":50,"style":50},"doctl compute image list --public | grep ubuntu-22\n\n# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n",[15,3223,3224,3229,3233,3238],{"__ignoreMap":50},[54,3225,3226],{"class":56,"line":57},[54,3227,3228],{},"doctl compute image list --public | grep ubuntu-22\n",[54,3230,3231],{"class":56,"line":64},[54,3232,86],{"emptyLinePlaceholder":85},[54,3234,3235],{"class":56,"line":82},[54,3236,3237],{},"# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n",[54,3239,3240],{"class":56,"line":89},[54,3241,3242],{},"# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n",[11,3244,3245],{},"And also the slug of the compute size:",[45,3247,3249],{"className":850,"code":3248,"language":852,"meta":50,"style":50},"doctl compute size list\n\n# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n",[15,3250,3251,3256,3260,3265,3270,3275,3280,3285,3290],{"__ignoreMap":50},[54,3252,3253],{"class":56,"line":57},[54,3254,3255],{},"doctl compute size list\n",[54,3257,3258],{"class":56,"line":64},[54,3259,86],{"emptyLinePlaceholder":85},[54,3261,3262],{"class":56,"line":82},[54,3263,3264],{},"# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n",[54,3266,3267],{"class":56,"line":89},[54,3268,3269],{},"# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n",[54,3271,3272],{"class":56,"line":111},[54,3273,3274],{},"# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n",[54,3276,3277],{"class":56,"line":119},[54,3278,3279],{},"# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n",[54,3281,3282],{"class":56,"line":125},[54,3283,3284],{},"# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n",[54,3286,3287],{"class":56,"line":131},[54,3288,3289],{},"# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n",[54,3291,3292],{"class":56,"line":137},[54,3293,3294],{},"# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n",[11,3296,3297,3298,3301],{},"I've also configured a few SSH keys with Digital Ocean, and I can have the key (specified by ID) provisioned to the machine using the ",[15,3299,3300],{},"--ssh-keys"," flag.",[45,3303,3305],{"className":850,"code":3304,"language":852,"meta":50,"style":50},"doctl compute ssh-key list\n\n# ID      Name    FingerPrint\n# 1234    mini    \u003Credacted>\n",[15,3306,3307,3312,3316,3321],{"__ignoreMap":50},[54,3308,3309],{"class":56,"line":57},[54,3310,3311],{},"doctl compute ssh-key list\n",[54,3313,3314],{"class":56,"line":64},[54,3315,86],{"emptyLinePlaceholder":85},[54,3317,3318],{"class":56,"line":82},[54,3319,3320],{},"# ID      Name    FingerPrint\n",[54,3322,3323],{"class":56,"line":89},[54,3324,3325],{},"# 1234    mini    \u003Credacted>\n",[11,3327,3328,3329,3332],{},"Also, I wanted to install a few packages to the box upon creation, this can be done easily with the ",[15,3330,3331],{},"--user-data-file"," flag to run an initialization script.",[45,3334,3336],{"className":850,"code":3335,"language":852,"meta":50,"style":50},"echo 'apt install -y imagemagick zip' > bootstrap.sh\n",[15,3337,3338],{"__ignoreMap":50},[54,3339,3340],{"class":56,"line":57},[54,3341,3335],{},[11,3343,3344],{},"Putting it all together, here is the simple command for creating a small compute instance!",[45,3346,3348],{"className":850,"code":3347,"language":852,"meta":50,"style":50},"doctl compute droplet create \\\n    --image ubuntu-22-10-x64 \\\n    --size s-1vcpu-512mb-10gb \\\n    --region nyc1 \\\n    --ssh-keys 1234 \\\n    --user-data-file boostrap.sh \\\n    ephemeral\n",[15,3349,3350,3355,3360,3365,3370,3375,3380],{"__ignoreMap":50},[54,3351,3352],{"class":56,"line":57},[54,3353,3354],{},"doctl compute droplet create \\\n",[54,3356,3357],{"class":56,"line":64},[54,3358,3359],{},"    --image ubuntu-22-10-x64 \\\n",[54,3361,3362],{"class":56,"line":82},[54,3363,3364],{},"    --size s-1vcpu-512mb-10gb \\\n",[54,3366,3367],{"class":56,"line":89},[54,3368,3369],{},"    --region nyc1 \\\n",[54,3371,3372],{"class":56,"line":111},[54,3373,3374],{},"    --ssh-keys 1234 \\\n",[54,3376,3377],{"class":56,"line":119},[54,3378,3379],{},"    --user-data-file boostrap.sh \\\n",[54,3381,3382],{"class":56,"line":125},[54,3383,3384],{},"    ephemeral\n",[11,3386,3387],{},"Finally, I can connect, do my thing, and destroy the instance.",[45,3389,3391],{"className":850,"code":3390,"language":852,"meta":50,"style":50},"doctl compute ssh ephemeral\n",[15,3392,3393],{"__ignoreMap":50},[54,3394,3395],{"class":56,"line":57},[54,3396,3390],{},[45,3398,3400],{"className":850,"code":3399,"language":852,"meta":50,"style":50},"doctl compute droplet delete --force ephemeral\n",[15,3401,3402],{"__ignoreMap":50},[54,3403,3404],{"class":56,"line":57},[54,3405,3399],{},[11,3407,3408],{},"All-in-all, I was up and running in about 20 minutes. What a handy utility!",[776,3410,998],{},{"title":50,"searchDepth":64,"depth":64,"links":3412},[],[3414],"linux","2023-01-01T00:00:00.000Z","I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean doctl command line utility.\\nThis proved to be an extremely easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.",{"excerpt":3418},{"type":8,"value":3419},[3420],[11,3421,3151,3422,3155,3424,3159],{},[15,3423,3154],{},[925,3425,3158],{},"/articles/doctl",{"title":3146,"description":3428},"I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean doctl command line utility.\nThis proved to be an extremely easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.","articles/doctl",[3414,3431],"digital-ocean","swB9xe26uI94WwH94ll8AfoMcWk7jGKLmpHjHTBfG4w",{"id":3434,"title":3435,"body":3436,"categories":3498,"date":3500,"description":3501,"extension":785,"img":786,"meta":3502,"navigation":85,"path":3507,"seo":3508,"stem":3509,"tags":3510,"__hash__":3511},"content/articles/nuxt-v3-migration.md","This Website Has Been Migrated to Nuxt 3 🎉",{"type":8,"value":3437,"toc":3496},[3438,3441,3450,3457,3460,3463,3493],[11,3439,3440],{},"This website has been migrated to the latest version of the Nuxt web framework, and with it comes all of the exciting goodies that the Vue and Nuxt teams have been concocting over the past few years.\nNot to mention, all of the great plugins in the Vue ecosystem!",[11,3442,3443,3444,3449],{},"If you're curious what changes were required to make the migration, you can check out ",[24,3445,3448],{"href":3446,"rel":3447},"https://github.com/cmpadden/cmpadden.github.io/pull/3",[28],"pull request #3"," in the GitHub repository.",[11,3451,3452],{},[3453,3454],"img",{"alt":3455,"src":3456},"Screenshot of Nuxt Migration Pull Request","/images/nuxt-migration-pr.png",[11,3458,3459],{},"While the documentation for making this migration is great, there were many breaking changes, and the overall process was quite tedious.\nFor this reason, I opted to generate a new project entirely, and port existing code to this clean slate.\nI believe that this resulted in a project with a bit less cruft.",[11,3461,3462],{},"The most valuable resources for making these changes include:",[2574,3464,3465,3472,3479,3486],{},[2577,3466,3467],{},[24,3468,3471],{"href":3469,"rel":3470},"https://nuxt.com/docs/migration/overview",[28],"The Nuxt Migration Guide",[2577,3473,3474],{},[24,3475,3478],{"href":3476,"rel":3477},"https://nuxt.com/docs/getting-started/introduction",[28],"The Nuxt Framework Guide",[2577,3480,3481],{},[24,3482,3485],{"href":3483,"rel":3484},"https://tailwindcss.nuxt.dev/",[28],"Nuxt Tailwind Module Documentation",[2577,3487,3488],{},[24,3489,3492],{"href":3490,"rel":3491},"https://content.nuxtjs.org/",[28],"Nuxt Content Module Documentation",[11,3494,3495],{},"Part of the delay for doing this upgrade was in waiting for module developers to support this major release.\nI'm super thankful for all of the hard work they've don, and I'm excited to explore all of the new features available!\nI just hope that the breaking changes in this release don't cause too much fracturing of the community, as it does feel like déjà vu of Python 2 and 3.",{"title":50,"searchDepth":64,"depth":64,"links":3497},[],[3499],"web","2022-12-31T00:00:00.000Z","This website has been migrated to the latest version of the Nuxt web framework, and with it comes all of the exciting goodies that the Vue and Nuxt teams have been concocting over the past few years.\\nNot to mention, all of the great plugins in the Vue ecosystem!",{"excerpt":3503},{"type":8,"value":3504},[3505],[11,3506,3440],{},"/articles/nuxt-v3-migration",{"title":3435,"description":3440},"articles/nuxt-v3-migration",[803],"YT4urpJMLY7dnF-hEDs-8ouhiTam33LgSlWuMryiE0k",{"id":3513,"title":3514,"body":3515,"categories":3612,"date":3614,"description":3519,"extension":785,"img":786,"meta":3615,"navigation":85,"path":3620,"seo":3621,"stem":3622,"tags":3623,"__hash__":3626},"content/articles/migrate-truenas-from-core-to-scale.md","Migrate to TrueNAS Scale from TrueNAS Core",{"type":8,"value":3516,"toc":3610},[3517,3520,3527,3599,3602],[11,3518,3519],{},"TrueNAS Scale offers a variety of interesting features that are not supported in its TrueNAS Core counterpart. Most notably, because the base operating system is Debian Linux, opposed to FreeBSD, there is native support for Linux containers via Docker, and Kubernetes Pods! This post walks through the steps required to upgrade from TrueNAS Core to TrueNAS Scale.",[11,3521,3522,3523,3526],{},"Thankfully, the upgrade procedure to migrate from TrueNAS Core to TrueNAS Scale is relatively straight forward. All it requires is to create a bootable USB of the TrueNAS Scale image, boot the USB, and select ",[925,3524,3525],{},"Install/Upgrade"," in the installation wizard. But for the sake of being thorough, you can find instructions on how to backup system configurations and install the OS below.",[3528,3529,3530,3555,3571,3574,3587,3590],"ol",{},[2577,3531,3532,3533],{},"Make a backup of your system’s configuration\n",[3528,3534,3535,3541],{},[2577,3536,3537,3538],{},"Navigate to ",[15,3539,3540],{},"System > General",[2577,3542,3543,3544,3547,3548,3551,3552],{},"Click ",[15,3545,3546],{},"Save Config",", check the ",[925,3549,3550],{},"Export Secret Seed"," box, and click ",[15,3553,3554],{},"Save",[2577,3556,3557,3558],{},"Export dataset keys for the encrypted pools\n",[3528,3559,3560,3565],{},[2577,3561,3537,3562],{},[15,3563,3564],{},"Storage > Pools",[2577,3566,3567,3568],{},"Click the cog icon, and select ",[15,3569,3570],{},"Export Dataset Keys",[2577,3572,3573],{},"Insert the TrueNAS Core bootable USB into the NAS",[2577,3575,3576,3577,2568,3580,3583,3584],{},"From the Supermicro IPMI interface select ",[925,3578,3579],{},"Remote Control",[925,3581,3582],{},"iKVM/HTML5"," and select ",[925,3585,3586],{},"Reboot",[2577,3588,3589],{},"Select the bootable USB as the boot device",[2577,3591,3592,3593,3595,3596],{},"From the TrueNAS installation wizard, select ",[925,3594,3525],{},", select the drive that contains the TrueNAS installation, and select ",[925,3597,3598],{},"Upgrade Install",[11,3600,3601],{},"Reboot the device, and voila — you should be up-and-running! Give the system a quick rundown to validate that your settings and pools have transferred correctly, and then enjoy all the container goodness!",[11,3603,3604,3605,1045],{},"For a breakdown of the differences between TrueNAS Core, Enterprise, and Scale, you can reference ",[24,3606,3609],{"href":3607,"rel":3608},"https://www.truenas.com/help-me-choose/",[28],"this table",{"title":50,"searchDepth":64,"depth":64,"links":3611},[],[3613],"homelab","2021-12-28T00:00:00.000Z",{"excerpt":3616},{"type":8,"value":3617},[3618],[11,3619,3519],{},"/articles/migrate-truenas-from-core-to-scale",{"title":3514,"description":3519},"articles/migrate-truenas-from-core-to-scale",[3613,3624,3625],"supermicro","truenas","j1HfogNeGy4KIvvfH5Rg6f3HKYZF0mgSWjW1jCq9WwM",{"id":3628,"title":3629,"body":3630,"categories":3729,"date":3730,"description":3731,"extension":785,"img":786,"meta":3732,"navigation":85,"path":3737,"seo":3738,"stem":3739,"tags":3740,"__hash__":3741},"content/articles/reset-ipmi-password-from-host-os.md","Reset IPMI Credentials from the Host OS",{"type":8,"value":3631,"toc":3727},[3632,3635,3646,3653,3656,3662,3673,3679,3682,3685,3688,3694],[11,3633,3634],{},"If you ever find yourself locked out of the Intelligent Platform Management Interface (IPMI) of a server, these\ninstructions will guide your through the process of resetting the credentials to their default values from the host\noperating system.",[11,3636,3637,3638,3641,3642,3645],{},"If you are using an operating system like TrueNAS -- good news! It's possible to reset the IPMI password directly from\nthe web interface. This is done by navigating to ",[15,3639,3640],{},"Network > IPMI",", and simply entering a new value in the ",[925,3643,3644],{},"IPMI\nPassword Reset"," field.",[11,3647,3648,3649,3652],{},"If you are using some other OS that doesn't have this feature, you can achieve similar results by using the ",[15,3650,3651],{},"ipmitool","\ncommand-line utility.",[11,3654,3655],{},"First, you'll want to determine the user ID associated with the user for whom you'd like to reset the password.",[45,3657,3660],{"className":3658,"code":3659,"language":175},[173],"# ipmitool user list\nID  Name             Callin  Link Auth  IPMI Msg   Channel Priv Limit\n1                    true    false      false      Unknown (0x00)\n2   ADMIN            true    false      false      Unknown (0x00)\n",[15,3661,3659],{"__ignoreMap":50},[11,3663,3664,3665,3668,3669,3672],{},"In this case, we will be resetting the password for ",[925,3666,3667],{},"ADMIN"," who has a user ID of ",[925,3670,3671],{},"2",". Then we'll assign the new\npassword like so:",[45,3674,3677],{"className":3675,"code":3676,"language":175},[173],"# ipmitool user set password 2 \u003Cpassword>\n",[15,3678,3676],{"__ignoreMap":50},[11,3680,3681],{},"And you should be good to go!",[11,3683,3684],{},"...",[11,3686,3687],{},"Alternatively, if you'd like to factory reset the baseboard management controller (BMC), which will reset the IPMI\ncredentials to their default value, you can issue the following command.",[45,3689,3692],{"className":3690,"code":3691,"language":175},[173],"# ipmitool raw 0x3c 0x40\n",[15,3693,3691],{"__ignoreMap":50},[11,3695,3696,3697,3700,3701,3704,3705,3700,3708,3711,3712,1746,3717,3720,3721,3726],{},"Where ",[15,3698,3699],{},"0x3c"," is the ",[15,3702,3703],{},"\u003Cnetfn>"," argument, a.k.a. the network function code that defines the functional routing for\nmessages, and ",[15,3706,3707],{},"0x40",[15,3709,3710],{},"\u003Ccmd>",". According to section 5.1 of the ",[24,3713,3716],{"href":3714,"rel":3715},"https://www.intel.com/content/dam/www/public/us/en/documents/product-briefs/ipmi-second-gen-interface-spec-v2-rev1-1.pdf",[28],"IPMI interface\nspecification",[925,3718,3719],{},"netfn"," codes ranging from 0x30 to 0x3F are reserved for vendor specific functions. I searched around for some\nSupermicro references on these vendor specific network functions without much luck other than various ",[24,3722,3725],{"href":3723,"rel":3724},"https://www.supermicro.com/support/faqs/faq.cfm?faq=15448",[28],"support\nresponses"," on how to reset a device. Bummer!",{"title":50,"searchDepth":64,"depth":64,"links":3728},[],[3613],"2021-12-27T00:00:00.000Z","If you ever find yourself locked out of the Intelligent Platform Management Interface (IPMI) of a server, these\\ninstructions will guide your through the process of resetting the credentials to their default values from the host\\noperating system.",{"excerpt":3733},{"type":8,"value":3734},[3735],[11,3736,3634],{},"/articles/reset-ipmi-password-from-host-os",{"title":3629,"description":3634},"articles/reset-ipmi-password-from-host-os",[3613,3624,3625],"7QIOWn6VYhDFOAYyQYt1PYDTyYXb9epZKxhQnCi1HnI",{"id":3743,"title":3744,"body":3745,"categories":4085,"date":4086,"description":4087,"extension":785,"img":786,"meta":4088,"navigation":85,"path":4095,"seo":4096,"stem":4098,"tags":4099,"__hash__":4100},"content/articles/quick-tip-rerunning-bash-commands.md","Tip: Re-running Bash Commands",{"type":8,"value":3746,"toc":4083},[3747,3754,3800,3813,3861,3864,3879,3941,3955,3988,3994,4016,4025,4049,4062,4064,4080],[11,3748,3749,3750,3753],{},"Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use ",[15,3751,3752],{},"sudo"," for a command that requires\nroot privileges.",[45,3755,3757],{"className":1081,"code":3756,"language":1083,"meta":50,"style":50},"$ pacman -Syu\nerror: you cannot perform this operation unless you are root.\n",[15,3758,3759,3769],{"__ignoreMap":50},[54,3760,3761,3763,3766],{"class":56,"line":57},[54,3762,1090],{"class":98},[54,3764,3765],{"class":78}," pacman",[54,3767,3768],{"class":297}," -Syu\n",[54,3770,3771,3774,3777,3780,3783,3786,3789,3792,3794,3797],{"class":56,"line":64},[54,3772,3773],{"class":98},"error:",[54,3775,3776],{"class":78}," you",[54,3778,3779],{"class":78}," cannot",[54,3781,3782],{"class":78}," perform",[54,3784,3785],{"class":78}," this",[54,3787,3788],{"class":78}," operation",[54,3790,3791],{"class":78}," unless",[54,3793,3776],{"class":78},[54,3795,3796],{"class":78}," are",[54,3798,3799],{"class":78}," root.\n",[11,3801,3802,3803,3806,3807,3809,3810,3812],{},"Well, I have good news for you -- you can easily re-issue a command with the\n",[15,3804,3805],{},"!!"," designator! Simply type ",[15,3808,3752],{}," followed by ",[15,3811,3805],{}," and you're good to go.",[45,3814,3816],{"className":1081,"code":3815,"language":1083,"meta":50,"style":50},"$ sudo !!\nsudo pacman -Syu\n[sudo] password for colton:\n:: Synchronizing package databases...\n",[15,3817,3818,3828,3836,3847],{"__ignoreMap":50},[54,3819,3820,3822,3825],{"class":56,"line":57},[54,3821,1090],{"class":98},[54,3823,3824],{"class":78}," sudo",[54,3826,3827],{"class":78}," !!\n",[54,3829,3830,3832,3834],{"class":56,"line":64},[54,3831,3752],{"class":98},[54,3833,3765],{"class":78},[54,3835,3768],{"class":297},[54,3837,3838,3841,3844],{"class":56,"line":82},[54,3839,3840],{"class":71},"[sudo] password ",[54,3842,3843],{"class":67},"for",[54,3845,3846],{"class":71}," colton:\n",[54,3848,3849,3852,3855,3858],{"class":56,"line":89},[54,3850,3851],{"class":297},"::",[54,3853,3854],{"class":78}," Synchronizing",[54,3856,3857],{"class":78}," package",[54,3859,3860],{"class":78}," databases...\n",[11,3862,3863],{},"--",[11,3865,3866,3867,3870,3871,3874,3875,3878],{},"Commands that are prefixed with a bang, ",[15,3868,3869],{},"!",", are considered ",[925,3872,3873],{},"Event\nDesignators,"," and are references to your command-line history. You can take a\nlook at your history with the ",[15,3876,3877],{},"history"," command.",[45,3880,3882],{"className":1081,"code":3881,"language":1083,"meta":50,"style":50},"$ history\n 1021  touch hello_world.txt\n 1022  ls\n 1023  echo \"Here we go again!\"\n 1024  find . -name *.py\n",[15,3883,3884,3891,3902,3910,3921],{"__ignoreMap":50},[54,3885,3886,3888],{"class":56,"line":57},[54,3887,1090],{"class":98},[54,3889,3890],{"class":78}," history\n",[54,3892,3893,3896,3899],{"class":56,"line":64},[54,3894,3895],{"class":98}," 1021",[54,3897,3898],{"class":78},"  touch",[54,3900,3901],{"class":78}," hello_world.txt\n",[54,3903,3904,3907],{"class":56,"line":82},[54,3905,3906],{"class":98}," 1022",[54,3908,3909],{"class":78},"  ls\n",[54,3911,3912,3915,3918],{"class":56,"line":89},[54,3913,3914],{"class":98}," 1023",[54,3916,3917],{"class":78},"  echo",[54,3919,3920],{"class":78}," \"Here we go again!\"\n",[54,3922,3923,3926,3929,3932,3935,3938],{"class":56,"line":111},[54,3924,3925],{"class":98}," 1024",[54,3927,3928],{"class":78},"  find",[54,3930,3931],{"class":78}," .",[54,3933,3934],{"class":297}," -name",[54,3936,3937],{"class":297}," *",[54,3939,3940],{"class":78},".py\n",[11,3942,3943,3944,3946,3947,3950,3951,3954],{},"There are many ways to use ",[15,3945,3869],{}," in your shell. For example, if you wanted to\nre-issue a specific command in your history, you could use ",[15,3948,3949],{},"!n"," where ",[15,3952,3953],{},"n"," is\nthe number next to the command in your history.",[45,3956,3958],{"className":1081,"code":3957,"language":1083,"meta":50,"style":50},"$ !1023\necho \"Here we go again!\"\nHere we go again!\n",[15,3959,3960,3967,3974],{"__ignoreMap":50},[54,3961,3962,3964],{"class":56,"line":57},[54,3963,1090],{"class":98},[54,3965,3966],{"class":78}," !1023\n",[54,3968,3969,3972],{"class":56,"line":64},[54,3970,3971],{"class":297},"echo",[54,3973,3920],{"class":78},[54,3975,3976,3979,3982,3985],{"class":56,"line":82},[54,3977,3978],{"class":98},"Here",[54,3980,3981],{"class":78}," we",[54,3983,3984],{"class":78}," go",[54,3986,3987],{"class":78}," again!\n",[11,3989,3990,3991,1045],{},"Or... if you wanted to run the command you issued 4-commands ago, you can use\n",[15,3992,3993],{},"!-4",[45,3995,3997],{"className":1081,"code":3996,"language":1083,"meta":50,"style":50},"$ !-4\nls\nhello_world.txt\n",[15,3998,3999,4006,4011],{"__ignoreMap":50},[54,4000,4001,4003],{"class":56,"line":57},[54,4002,1090],{"class":98},[54,4004,4005],{"class":78}," !-4\n",[54,4007,4008],{"class":56,"line":64},[54,4009,4010],{"class":98},"ls\n",[54,4012,4013],{"class":56,"line":82},[54,4014,4015],{"class":98},"hello_world.txt\n",[11,4017,4018,4019,4021,4022,1045],{},"Or... if you wanted to run the last command that started with the string\n",[925,4020,1941],{},", you can use ",[15,4023,4024],{},"!find",[45,4026,4028],{"className":1081,"code":4027,"language":1083,"meta":50,"style":50},"$ !find\nfind . -name *.py\n",[15,4029,4030,4037],{"__ignoreMap":50},[54,4031,4032,4034],{"class":56,"line":57},[54,4033,1090],{"class":98},[54,4035,4036],{"class":78}," !find\n",[54,4038,4039,4041,4043,4045,4047],{"class":56,"line":64},[54,4040,1941],{"class":98},[54,4042,3931],{"class":78},[54,4044,3934],{"class":297},[54,4046,3937],{"class":297},[54,4048,3940],{"class":78},[11,4050,4051,4052,4055,4056,2141,4058,4061],{},"Be sure to check out the ",[925,4053,4054],{},"Event Designators"," section of the ",[15,4057,1083],{},[15,4059,4060],{},"man"," pages\nfor more information!",[11,4063,3863],{},[11,4065,4066,4067,4072,4073,4076,4077,4079],{},"As an aside, for even faster command-line history navigation, be sure to check\nout the excellent ",[24,4068,4071],{"href":4069,"rel":4070},"https://github.com/junegunn/fzf",[28],"fzf"," utility by ",[925,4074,4075],{},"junegunn.","\nOne of the many features of ",[15,4078,4071],{}," is browsing and re-issuing commands from your\ncommand-line history with a fuzzy-finder!",[776,4081,4082],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}",{"title":50,"searchDepth":64,"depth":64,"links":4084},[],[1003],"2021-09-22T00:00:00.000Z","Do you ever find yourself having to re-run a Bash command? I often find this\\nhappening to myself when I neglect to use sudo for a command that requires\\nroot privileges.",{"draft":1007,"excerpt":4089},{"type":8,"value":4090},[4091],[11,4092,3749,4093,3753],{},[15,4094,3752],{},"/articles/quick-tip-rerunning-bash-commands",{"title":3744,"description":4097},"Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use sudo for a command that requires\nroot privileges.","articles/quick-tip-rerunning-bash-commands",[1205,1083],"j1gr_8pMfWiO3ZQryXu9lsH8VIsqIpBi79pgaif_4Rs",{"id":4102,"title":4103,"body":4104,"categories":4465,"date":4467,"description":4468,"extension":785,"img":786,"meta":4469,"navigation":85,"path":4474,"seo":4475,"stem":4476,"tags":4477,"__hash__":4482},"content/articles/unit-testing-micropython-with-mocks.md","Unit Testing in MicroPython with Mocks",{"type":8,"value":4105,"toc":4462},[4106,4109,4114,4117,4121,4132,4226,4238,4307,4317,4430,4444,4448,4459],[11,4107,4108],{},"Unit testing code for embedded systems can be challenging. While it's possible\nto leverage emulators, write side-effect free code, or run tests on the\nhardware itself, it's often easiest to unit test the code on your personal\ncomputer with mocked hardware functionality.",[4110,4111,4113],"h1",{"id":4112},"mocking","Mocking",[11,4115,4116],{},"Mocks allow us to replace the hardware interfacing functionality under-the-hood\nwith predefined results and side-effects. For example, if there is a piece of\nlogic that retrieves values from an accelerometer to get a device's\norientation, it would be possible to mock the returned values of the\naccelerometer -- allowing us to run the unit tests on a device that does not\nhave an accelerometer sensor installed.",[4110,4118,4120],{"id":4119},"a-micropython-mocking-example","A MicroPython Mocking Example",[11,4122,4123,4124,4127,4128,4131],{},"In this example, we will be unit testing a module named ",[15,4125,4126],{},"time_logger",", that\ndepends on the MicroPython library ",[15,4129,4130],{},"utime"," to log the most recent Epoch time to\na file.",[45,4133,4137],{"className":4134,"code":4135,"language":4136,"meta":50,"style":50},"language-python shiki shiki-themes github-dark","# time_logger.py\n\nclass TimeLogger(object):\n\n    def save_time(self):\n        \"\"\" Overwrite a file with the most recent Epoch timestamp from `utime`\n        \"\"\"\n        with open(\"LAST_KNOWN_TIME\", \"w+\") as f:\n            f.write(str(utime.time()))\n","python",[15,4138,4139,4144,4148,4164,4168,4179,4184,4189,4215],{"__ignoreMap":50},[54,4140,4141],{"class":56,"line":57},[54,4142,4143],{"class":60},"# time_logger.py\n",[54,4145,4146],{"class":56,"line":64},[54,4147,86],{"emptyLinePlaceholder":85},[54,4149,4150,4153,4156,4158,4161],{"class":56,"line":82},[54,4151,4152],{"class":67},"class",[54,4154,4155],{"class":98}," TimeLogger",[54,4157,374],{"class":71},[54,4159,4160],{"class":297},"object",[54,4162,4163],{"class":71},"):\n",[54,4165,4166],{"class":56,"line":89},[54,4167,86],{"emptyLinePlaceholder":85},[54,4169,4170,4173,4176],{"class":56,"line":111},[54,4171,4172],{"class":67},"    def",[54,4174,4175],{"class":98}," save_time",[54,4177,4178],{"class":71},"(self):\n",[54,4180,4181],{"class":56,"line":119},[54,4182,4183],{"class":78},"        \"\"\" Overwrite a file with the most recent Epoch timestamp from `utime`\n",[54,4185,4186],{"class":56,"line":125},[54,4187,4188],{"class":78},"        \"\"\"\n",[54,4190,4191,4194,4197,4199,4202,4204,4207,4209,4212],{"class":56,"line":131},[54,4192,4193],{"class":67},"        with",[54,4195,4196],{"class":297}," open",[54,4198,374],{"class":71},[54,4200,4201],{"class":78},"\"LAST_KNOWN_TIME\"",[54,4203,537],{"class":71},[54,4205,4206],{"class":78},"\"w+\"",[54,4208,350],{"class":71},[54,4210,4211],{"class":67},"as",[54,4213,4214],{"class":71}," f:\n",[54,4216,4217,4220,4223],{"class":56,"line":137},[54,4218,4219],{"class":71},"            f.write(",[54,4221,4222],{"class":297},"str",[54,4224,4225],{"class":71},"(utime.time()))\n",[11,4227,4228,4229,4231,4232,4234,4235,4237],{},"First, because the ",[15,4230,4130],{}," module is not installed on the machine that the unit\ntests on, we must mock ",[15,4233,4130],{}," module before importing ",[15,4236,4126],{}," in our\nunit test file.",[45,4239,4241],{"className":4134,"code":4240,"language":4136,"meta":50,"style":50},"# test_time_logger.py\n\nimport unittest\n\nfrom unittest.mock import MagicMock\n\nsys.modules['utime'] = MagicMock()\nfrom time_logger import TimeLogger\n",[15,4242,4243,4248,4252,4259,4263,4275,4279,4295],{"__ignoreMap":50},[54,4244,4245],{"class":56,"line":57},[54,4246,4247],{"class":60},"# test_time_logger.py\n",[54,4249,4250],{"class":56,"line":64},[54,4251,86],{"emptyLinePlaceholder":85},[54,4253,4254,4256],{"class":56,"line":82},[54,4255,68],{"class":67},[54,4257,4258],{"class":71}," unittest\n",[54,4260,4261],{"class":56,"line":89},[54,4262,86],{"emptyLinePlaceholder":85},[54,4264,4265,4267,4270,4272],{"class":56,"line":111},[54,4266,75],{"class":67},[54,4268,4269],{"class":71}," unittest.mock ",[54,4271,68],{"class":67},[54,4273,4274],{"class":71}," MagicMock\n",[54,4276,4277],{"class":56,"line":119},[54,4278,86],{"emptyLinePlaceholder":85},[54,4280,4281,4284,4287,4290,4292],{"class":56,"line":125},[54,4282,4283],{"class":71},"sys.modules[",[54,4285,4286],{"class":78},"'utime'",[54,4288,4289],{"class":71},"] ",[54,4291,231],{"class":67},[54,4293,4294],{"class":71}," MagicMock()\n",[54,4296,4297,4299,4302,4304],{"class":56,"line":131},[54,4298,75],{"class":67},[54,4300,4301],{"class":71}," time_logger ",[54,4303,68],{"class":67},[54,4305,4306],{"class":71}," TimeLogger\n",[11,4308,4309,4310,4313,4314,1045],{},"Then, we can write a test that patches the ",[15,4311,4312],{},"utime.time"," functionality so that\nit returns a value of our choosing -- in this case, ",[15,4315,4316],{},"1234",[45,4318,4320],{"className":4134,"code":4319,"language":4136,"meta":50,"style":50},"class TestTimeLogger(unittest.TestCase):\n\n    def test_save_time(self):\n        \"\"\" Verify that the Epoch time is written to file\n        \"\"\"\n        with unittest.mock.patch(\"utime.time\", return_value=1234):\n            t = TimeLogger()\n            t.save_time()\n            with open(\"LAST_KNOWN_TIME\") as f:\n                self.assertEqual(\"1234\", f.read())\n",[15,4321,4322,4341,4345,4354,4359,4363,4384,4394,4399,4416],{"__ignoreMap":50},[54,4323,4324,4326,4329,4331,4334,4336,4339],{"class":56,"line":57},[54,4325,4152],{"class":67},[54,4327,4328],{"class":98}," TestTimeLogger",[54,4330,374],{"class":71},[54,4332,4333],{"class":98},"unittest",[54,4335,1045],{"class":71},[54,4337,4338],{"class":98},"TestCase",[54,4340,4163],{"class":71},[54,4342,4343],{"class":56,"line":64},[54,4344,86],{"emptyLinePlaceholder":85},[54,4346,4347,4349,4352],{"class":56,"line":82},[54,4348,4172],{"class":67},[54,4350,4351],{"class":98}," test_save_time",[54,4353,4178],{"class":71},[54,4355,4356],{"class":56,"line":89},[54,4357,4358],{"class":78},"        \"\"\" Verify that the Epoch time is written to file\n",[54,4360,4361],{"class":56,"line":111},[54,4362,4188],{"class":78},[54,4364,4365,4367,4370,4373,4375,4378,4380,4382],{"class":56,"line":119},[54,4366,4193],{"class":67},[54,4368,4369],{"class":71}," unittest.mock.patch(",[54,4371,4372],{"class":78},"\"utime.time\"",[54,4374,537],{"class":71},[54,4376,4377],{"class":346},"return_value",[54,4379,231],{"class":67},[54,4381,4316],{"class":297},[54,4383,4163],{"class":71},[54,4385,4386,4389,4391],{"class":56,"line":125},[54,4387,4388],{"class":71},"            t ",[54,4390,231],{"class":67},[54,4392,4393],{"class":71}," TimeLogger()\n",[54,4395,4396],{"class":56,"line":131},[54,4397,4398],{"class":71},"            t.save_time()\n",[54,4400,4401,4404,4406,4408,4410,4412,4414],{"class":56,"line":137},[54,4402,4403],{"class":67},"            with",[54,4405,4196],{"class":297},[54,4407,374],{"class":71},[54,4409,4201],{"class":78},[54,4411,350],{"class":71},[54,4413,4211],{"class":67},[54,4415,4214],{"class":71},[54,4417,4418,4421,4424,4427],{"class":56,"line":143},[54,4419,4420],{"class":297},"                self",[54,4422,4423],{"class":71},".assertEqual(",[54,4425,4426],{"class":78},"\"1234\"",[54,4428,4429],{"class":71},", f.read())\n",[11,4431,4432,4433,4436,4437,4440,4441,4443],{},"Now, when the ",[15,4434,4435],{},"save_time"," method gets the latest time from ",[15,4438,4439],{},"utime.time()",", the\nvalue will be patched to return ",[15,4442,4316],{},". That value will be written to a file,\nand our unit test will pass!",[1047,4445,4447],{"id":4446},"references","References",[3528,4449,4450],{},[2577,4451,4452],{},[24,4453,4456,4458],{"href":4454,"rel":4455},"https://docs.python.org/3/library/unittest.html",[28],[15,4457,4333],{}," — Unit testing framework",[776,4460,4461],{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}",{"title":50,"searchDepth":64,"depth":64,"links":4463},[4464],{"id":4446,"depth":64,"text":4447},[4136,4466],"embedded","2020-02-07T00:00:00.000Z","Unit testing code for embedded systems can be challenging. While it's possible\\nto leverage emulators, write side-effect free code, or run tests on the\\nhardware itself, it's often easiest to unit test the code on your personal\\ncomputer with mocked hardware functionality.",{"draft":1007,"excerpt":4470},{"type":8,"value":4471},[4472],[11,4473,4108],{},"/articles/unit-testing-micropython-with-mocks",{"title":4103,"description":4108},"articles/unit-testing-micropython-with-mocks",[4478,4479,4480,4481],"micropython","testing","mocks","tutorial","DvVD83Ab2t1L5LWxkkR779yUFyrPOnBg9rkRxahv00k",{"id":4484,"title":4485,"body":4486,"categories":5259,"date":5260,"description":5261,"extension":785,"img":786,"meta":5262,"navigation":85,"path":5267,"seo":5268,"stem":5269,"tags":5270,"__hash__":5272},"content/articles/persistent-archlinux-usb.md","Create a Persistent Arch Linux Bootable USB with Vagrant",{"type":8,"value":4487,"toc":5248},[4488,4491,4493,4518,4520,4524,4535,4554,4561,4577,4608,4665,4672,4682,4837,4841,4849,4854,4869,4942,4946,4956,4979,4993,5013,5017,5049,5087,5091,5097,5103,5109,5123,5129,5132,5135,5139,5156,5175,5177,5245],[11,4489,4490],{},"When installing a linux distribution, it is common for the instructions to have\nthe user create a bootable USB, boot from the device, and proceed with the\ninstallation procedure from that live medium. However, this blog post will\noutline an alternative approach where a virtual machine created with Vagrant\nwill be used in favor of the live medium.",[4110,4492,1050],{"id":1049},[11,4494,4495,4496,4499,4500,4517],{},"The original intention was to use Docker for this process -- leveraging the\n",[15,4497,4498],{},"--device"," flag and mounting the target USB device in the Docker container,\nbut the underlying hypervisor in Docker Desktop for Mac does not support this.\n",[4501,4502,4503,2141,4508,2141,4512],"sup",{},[24,4504,4507],{"href":4505,"rel":4506},"https://docs.docker.com/docker-for-mac/docker-toolbox/",[28],"1",[24,4509,3671],{"href":4510,"rel":4511},"https://github.com/moby/hyperkit",[28],[24,4513,4516],{"href":4514,"rel":4515},"https://github.com/docker/for-mac/issues/900",[28],"3"," While there are workarounds using Docker\nMachine, Vagrant felt like the path of least resistance.",[4110,4519,1562],{"id":1561},[1047,4521,4523],{"id":4522},"create-an-arch-linux-virtual-machine-with-vagrant","Create an Arch Linux Virtual Machine with Vagrant",[11,4525,4526,4527,4534],{},"Get the latest Arch Linux image ",[4501,4528,4529],{},[24,4530,4533],{"href":4531,"rel":4532},"https://app.vagrantup.com/archlinux/boxes/archlinux",[28],"4"," from the Vagrant Cloud Box\nCatalog.",[45,4536,4538],{"className":1081,"code":4537,"language":1083,"meta":50,"style":50},"vagrant box add archlinux/archlinux\n",[15,4539,4540],{"__ignoreMap":50},[54,4541,4542,4545,4548,4551],{"class":56,"line":57},[54,4543,4544],{"class":98},"vagrant",[54,4546,4547],{"class":78}," box",[54,4549,4550],{"class":78}," add",[54,4552,4553],{"class":78}," archlinux/archlinux\n",[11,4555,4556,4557,4560],{},"Determine the USB vendor information for the thumb-drive that we will\npass-through to the virtual machine. Using the ",[15,4558,4559],{},"VBoxManage"," utility that comes\nwith Virtual Box, list the devices, and make note of the Vendor and Product ID.",[45,4562,4564],{"className":1081,"code":4563,"language":1083,"meta":50,"style":50}," VBoxManage list usbhost\n",[15,4565,4566],{"__ignoreMap":50},[54,4567,4568,4571,4574],{"class":56,"line":57},[54,4569,4570],{"class":98}," VBoxManage",[54,4572,4573],{"class":78}," list",[54,4575,4576],{"class":78}," usbhost\n",[11,4578,4579,4580,4583,4584,4587,4588,4600,4601,4604,4605,4607],{},"Create a ",[15,4581,4582],{},"Vagrantfile"," with ",[15,4585,4586],{},"archlinx/archlinux"," as the target box, and the USB\ndevice information that is passed through. ",[4501,4589,4590,2141,4595],{},[24,4591,4594],{"href":4592,"rel":4593},"https://antonyjepson.wordpress.com/2012/01/26/quickly-attaching-usb-devices-to-virtualbox-guests-using-vboxmanage/",[28],"5",[24,4596,4599],{"href":4597,"rel":4598},"https://gist.github.com/dscape/7d829c0c116ef419f963",[28],"6"," Vagrant\noffers a handy customization parameter ",[15,4602,4603],{},"vb.customize"," that calls the\n",[15,4606,4559],{}," command under-the-hood, allowing one to enable the guest machine\nto access the host machine's USB devices.",[45,4609,4611],{"className":931,"code":4610,"language":933,"meta":50,"style":50},"# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"archlinux/archlinux\"\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.name = \"archlinux\"\n    vb.customize ['modifyvm', :id, '--usb', 'on']\n    vb.customize ['usbfilter', 'add', '1', '--target', :id, '--name', 'SanDisk Ultra Fit', '--vendorid', '0x0781', '--productid', '0x5583']\n  end\nend\n",[15,4612,4613,4618,4623,4627,4632,4637,4642,4647,4652,4657,4661],{"__ignoreMap":50},[54,4614,4615],{"class":56,"line":57},[54,4616,4617],{},"# -*- mode: ruby -*-\n",[54,4619,4620],{"class":56,"line":64},[54,4621,4622],{},"# vi: set ft=ruby :\n",[54,4624,4625],{"class":56,"line":82},[54,4626,86],{"emptyLinePlaceholder":85},[54,4628,4629],{"class":56,"line":89},[54,4630,4631],{},"Vagrant.configure(\"2\") do |config|\n",[54,4633,4634],{"class":56,"line":111},[54,4635,4636],{},"  config.vm.box = \"archlinux/archlinux\"\n",[54,4638,4639],{"class":56,"line":119},[54,4640,4641],{},"  config.vm.provider \"virtualbox\" do |vb|\n",[54,4643,4644],{"class":56,"line":125},[54,4645,4646],{},"    vb.name = \"archlinux\"\n",[54,4648,4649],{"class":56,"line":131},[54,4650,4651],{},"    vb.customize ['modifyvm', :id, '--usb', 'on']\n",[54,4653,4654],{"class":56,"line":137},[54,4655,4656],{},"    vb.customize ['usbfilter', 'add', '1', '--target', :id, '--name', 'SanDisk Ultra Fit', '--vendorid', '0x0781', '--productid', '0x5583']\n",[54,4658,4659],{"class":56,"line":143},[54,4660,3011],{},[54,4662,4663],{"class":56,"line":319},[54,4664,2801],{},[11,4666,4667,4668,4671],{},"When virtual machine is brought up, the ",[15,4669,4670],{},"usbfilter"," is applied, and the guest\nis able to access to the host machine's USB device that was specified in the\nfilter.",[11,4673,4674,4675,4677,4678,4681],{},"Start the machine, ",[15,4676,991],{}," into the guest, and list the devices to confirm that\nthe USB device is available (see: ",[15,4679,4680],{},"/dev/sdb",").",[45,4683,4685],{"className":1081,"code":4684,"language":1083,"meta":50,"style":50},"$ vagrant up\n$ vagrant ssh\n[vagrant@archlinux ~]$ lsblk\nNAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda      8:0    0   20G  0 disk\n├─sda1   8:1    0  1.9G  0 part [SWAP]\n└─sda2   8:2    0 18.1G  0 part /\nsdb      8:16   1 28.7G  0 disk\n└─sdb1   8:17   1    8G  0 part\n",[15,4686,4687,4697,4706,4717,4740,4760,4781,4801,4819],{"__ignoreMap":50},[54,4688,4689,4691,4694],{"class":56,"line":57},[54,4690,1090],{"class":98},[54,4692,4693],{"class":78}," vagrant",[54,4695,4696],{"class":78}," up\n",[54,4698,4699,4701,4703],{"class":56,"line":64},[54,4700,1090],{"class":98},[54,4702,4693],{"class":78},[54,4704,4705],{"class":78}," ssh\n",[54,4707,4708,4711,4714],{"class":56,"line":82},[54,4709,4710],{"class":71},"[vagrant@archlinux ",[54,4712,4713],{"class":67},"~",[54,4715,4716],{"class":71},"]$ lsblk\n",[54,4718,4719,4722,4725,4728,4731,4734,4737],{"class":56,"line":89},[54,4720,4721],{"class":98},"NAME",[54,4723,4724],{"class":78},"   MAJ:MIN",[54,4726,4727],{"class":78}," RM",[54,4729,4730],{"class":78},"  SIZE",[54,4732,4733],{"class":78}," RO",[54,4735,4736],{"class":78}," TYPE",[54,4738,4739],{"class":78}," MOUNTPOINT\n",[54,4741,4742,4745,4748,4751,4754,4757],{"class":56,"line":111},[54,4743,4744],{"class":98},"sda",[54,4746,4747],{"class":78},"      8:0",[54,4749,4750],{"class":297},"    0",[54,4752,4753],{"class":78},"   20G",[54,4755,4756],{"class":297},"  0",[54,4758,4759],{"class":78}," disk\n",[54,4761,4762,4765,4768,4770,4773,4775,4778],{"class":56,"line":119},[54,4763,4764],{"class":98},"├─sda1",[54,4766,4767],{"class":78},"   8:1",[54,4769,4750],{"class":297},[54,4771,4772],{"class":78},"  1.9G",[54,4774,4756],{"class":297},[54,4776,4777],{"class":78}," part",[54,4779,4780],{"class":71}," [SWAP]\n",[54,4782,4783,4786,4789,4791,4794,4796,4798],{"class":56,"line":125},[54,4784,4785],{"class":98},"└─sda2",[54,4787,4788],{"class":78},"   8:2",[54,4790,4750],{"class":297},[54,4792,4793],{"class":78}," 18.1G",[54,4795,4756],{"class":297},[54,4797,4777],{"class":78},[54,4799,4800],{"class":78}," /\n",[54,4802,4803,4806,4809,4812,4815,4817],{"class":56,"line":131},[54,4804,4805],{"class":98},"sdb",[54,4807,4808],{"class":78},"      8:16",[54,4810,4811],{"class":297},"   1",[54,4813,4814],{"class":78}," 28.7G",[54,4816,4756],{"class":297},[54,4818,4759],{"class":78},[54,4820,4821,4824,4827,4829,4832,4834],{"class":56,"line":137},[54,4822,4823],{"class":98},"└─sdb1",[54,4825,4826],{"class":78},"   8:17",[54,4828,4811],{"class":297},[54,4830,4831],{"class":78},"    8G",[54,4833,4756],{"class":297},[54,4835,4836],{"class":78}," part\n",[1047,4838,4840],{"id":4839},"install-arch-linux-on-the-usb-drive","Install Arch Linux on the USB Drive",[11,4842,2521,4843,4848],{},[24,4844,4847],{"href":4845,"rel":4846},"https://wiki.archlinux.org/index.php/Installation_guide",[28],"Arch Linux Installation Guide"," outlines the installation procedure in\ngreat detail -- the following steps follow this closely with a few alteration\ndue to installing onto removable media.",[4850,4851,4853],"h3",{"id":4852},"partition-the-disk-uefi-with-gpt","Partition the Disk (UEFI with GPT)",[45,4855,4857],{"className":1081,"code":4856,"language":1083,"meta":50,"style":50},"[root@archlinux ~]# fdisk /dev/sdb\n",[15,4858,4859],{"__ignoreMap":50},[54,4860,4861,4864,4866],{"class":56,"line":57},[54,4862,4863],{"class":71},"[root@archlinux ",[54,4865,4713],{"class":67},[54,4867,4868],{"class":71},"]# fdisk /dev/sdb\n",[45,4870,4872],{"className":931,"code":4871,"language":933,"meta":50,"style":50},"Command (m for help): p\nDisk /dev/sdb: 28.66 GiB, 30752636928 bytes, 60063744 sectors\nDisk model: Ultra Fit\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: gpt\nDisk identifier: E1D6C445-1B79-AB4D-A442-FA4AD6DF4ECC\n\nDevice       Start      End  Sectors  Size Type\n/dev/sdb1     2048  1050623  1048576  512M EFI System\n/dev/sdb2  1050624 60063710 59013087 28.1G Linux filesystem\n\nFilesystem/RAID signature on partition 1 will be wiped.\n",[15,4873,4874,4879,4884,4889,4894,4899,4904,4909,4914,4918,4923,4928,4933,4937],{"__ignoreMap":50},[54,4875,4876],{"class":56,"line":57},[54,4877,4878],{},"Command (m for help): p\n",[54,4880,4881],{"class":56,"line":64},[54,4882,4883],{},"Disk /dev/sdb: 28.66 GiB, 30752636928 bytes, 60063744 sectors\n",[54,4885,4886],{"class":56,"line":82},[54,4887,4888],{},"Disk model: Ultra Fit\n",[54,4890,4891],{"class":56,"line":89},[54,4892,4893],{},"Units: sectors of 1 * 512 = 512 bytes\n",[54,4895,4896],{"class":56,"line":111},[54,4897,4898],{},"Sector size (logical/physical): 512 bytes / 512 bytes\n",[54,4900,4901],{"class":56,"line":119},[54,4902,4903],{},"I/O size (minimum/optimal): 512 bytes / 512 bytes\n",[54,4905,4906],{"class":56,"line":125},[54,4907,4908],{},"Disklabel type: gpt\n",[54,4910,4911],{"class":56,"line":131},[54,4912,4913],{},"Disk identifier: E1D6C445-1B79-AB4D-A442-FA4AD6DF4ECC\n",[54,4915,4916],{"class":56,"line":137},[54,4917,86],{"emptyLinePlaceholder":85},[54,4919,4920],{"class":56,"line":143},[54,4921,4922],{},"Device       Start      End  Sectors  Size Type\n",[54,4924,4925],{"class":56,"line":319},[54,4926,4927],{},"/dev/sdb1     2048  1050623  1048576  512M EFI System\n",[54,4929,4930],{"class":56,"line":331},[54,4931,4932],{},"/dev/sdb2  1050624 60063710 59013087 28.1G Linux filesystem\n",[54,4934,4935],{"class":56,"line":357},[54,4936,86],{"emptyLinePlaceholder":85},[54,4938,4939],{"class":56,"line":382},[54,4940,4941],{},"Filesystem/RAID signature on partition 1 will be wiped.\n",[4850,4943,4945],{"id":4944},"format-the-partitions","Format the Partitions",[11,4947,4948,4949],{},"The UEFI specification mandates support for FAT file-systems, and FAT32 is\nrecommended for removable media. ",[4501,4950,4951],{},[24,4952,4955],{"href":4953,"rel":4954},"https://wiki.archlinux.org/index.php/EFI_system_partition#Format_the_partition",[28],"7",[45,4957,4959],{"className":1081,"code":4958,"language":1083,"meta":50,"style":50},"[root@archlinux ~]# pacman -Sy dosfstools\n[root@archlinux ~]# mkfs.fat -F32 /dev/sdb1\n",[15,4960,4961,4970],{"__ignoreMap":50},[54,4962,4963,4965,4967],{"class":56,"line":57},[54,4964,4863],{"class":71},[54,4966,4713],{"class":67},[54,4968,4969],{"class":71},"]# pacman -Sy dosfstools\n",[54,4971,4972,4974,4976],{"class":56,"line":64},[54,4973,4863],{"class":71},[54,4975,4713],{"class":67},[54,4977,4978],{"class":71},"]# mkfs.fat -F32 /dev/sdb1\n",[11,4980,4981,4982,4985,4986],{},"As for the root partition, it is recommended to use ",[15,4983,4984],{},"ext4"," without a journal to\nreduce the reads and writes to the file-system as this is detrimental to the\nflash-based USB drive. ",[4501,4987,4988],{},[24,4989,4992],{"href":4990,"rel":4991},"https://wiki.archlinux.org/index.php/Install_Arch_Linux_on_a_USB_key#Installation_tweaks",[28],"8",[45,4994,4996],{"className":1081,"code":4995,"language":1083,"meta":50,"style":50},"[root@archlinux ~]# mkfs.ext4 -O \"^has_journal\" /dev/sdb2\n",[15,4997,4998],{"__ignoreMap":50},[54,4999,5000,5002,5004,5007,5010],{"class":56,"line":57},[54,5001,4863],{"class":71},[54,5003,4713],{"class":67},[54,5005,5006],{"class":71},"]# mkfs.ext4 -O ",[54,5008,5009],{"class":78},"\"^has_journal\"",[54,5011,5012],{"class":71}," /dev/sdb2\n",[4850,5014,5016],{"id":5015},"mount-the-partitions-and-bootstrap-the-environment","Mount the Partitions and Bootstrap the Environment",[45,5018,5020],{"className":1081,"code":5019,"language":1083,"meta":50,"style":50},"[root@archlinux ~]# mount /dev/sdb2 /mnt\n[root@archlinux ~]# mkdir -p /mnt/boot/efi\n[root@archlinux ~]# mount /dev/sdb1 /mnt/boot/efi\n",[15,5021,5022,5031,5040],{"__ignoreMap":50},[54,5023,5024,5026,5028],{"class":56,"line":57},[54,5025,4863],{"class":71},[54,5027,4713],{"class":67},[54,5029,5030],{"class":71},"]# mount /dev/sdb2 /mnt\n",[54,5032,5033,5035,5037],{"class":56,"line":64},[54,5034,4863],{"class":71},[54,5036,4713],{"class":67},[54,5038,5039],{"class":71},"]# mkdir -p /mnt/boot/efi\n",[54,5041,5042,5044,5046],{"class":56,"line":82},[54,5043,4863],{"class":71},[54,5045,4713],{"class":67},[54,5047,5048],{"class":71},"]# mount /dev/sdb1 /mnt/boot/efi\n",[45,5050,5052],{"className":1081,"code":5051,"language":1083,"meta":50,"style":50},"[root@archlinux ~]# pacman -S arch-install-scripts\n[root@archlinux ~]# pacstrap /mnt base linux linux-firmware\n[root@archlinux ~]# genfstab -U /mnt >> /mnt/etc/fstab\n",[15,5053,5054,5063,5072],{"__ignoreMap":50},[54,5055,5056,5058,5060],{"class":56,"line":57},[54,5057,4863],{"class":71},[54,5059,4713],{"class":67},[54,5061,5062],{"class":71},"]# pacman -S arch-install-scripts\n",[54,5064,5065,5067,5069],{"class":56,"line":64},[54,5066,4863],{"class":71},[54,5068,4713],{"class":67},[54,5070,5071],{"class":71},"]# pacstrap /mnt base linux linux-firmware\n",[54,5073,5074,5076,5078,5081,5084],{"class":56,"line":82},[54,5075,4863],{"class":71},[54,5077,4713],{"class":67},[54,5079,5080],{"class":71},"]# genfstab -U /mnt ",[54,5082,5083],{"class":67},">>",[54,5085,5086],{"class":71}," /mnt/etc/fstab\n",[4850,5088,5090],{"id":5089},"configure-the-new-environment","Configure the New Environment",[45,5092,5095],{"className":5093,"code":5094,"language":175},[173],"[root@archlinux ~]# arch-chroot /mnt\n",[15,5096,5094],{"__ignoreMap":50},[45,5098,5101],{"className":5099,"code":5100,"language":175},[173],"[root@archlinux /]# ln -sf /usr/share/zoneinfo/US/Eastern /etc/localtime\n[root@archlinux /]# hwclock --systohc\n[root@archlinux /]# sed -i 's/#en_US.UTF-8/en_US.UTF-8/' /etc/locale.gen\n[root@archlinux /]# locale-gen\n[root@archlinux /]# echo \"LANG=en_US.UTF-8\" > /etc/locale.conf\n",[15,5102,5100],{"__ignoreMap":50},[45,5104,5107],{"className":5105,"code":5106,"language":175},[173],"[root@archlinux /]# hostnamectl set-hostname usb\n[root@archlinux /]# echo \"127.0.0.1        localhost\" >> /etc/hosts\n[root@archlinux /]# echo \"::1              localhost\" >> /etc/hosts\n",[15,5108,5106],{"__ignoreMap":50},[11,5110,5111,5112,5115,5116],{},"Note, one difference here from a standard installation is that the\n",[15,5113,5114],{},"--removable"," flag is specified when installing the GRUB bootloader.\n",[4501,5117,5118],{},[24,5119,5122],{"href":5120,"rel":5121},"https://wiki.archlinux.org/index.php/GRUB#UEFI_systems",[28],"10",[45,5124,5127],{"className":5125,"code":5126,"language":175},[173],"[root@archlinux /]# pacman -S grub\n[root@archlinux /]# grub-install --target=x86_64-efi --efi-directory=/boot/efi  --removable --recheck\n[root@usb /]# grub-mkconfig -o /boot/grub/grub.cfg\n",[15,5128,5126],{"__ignoreMap":50},[11,5130,5131],{},"Shutdown the virtual machine, restart the host machine, and boot the newly\ncreated Arch Linux thumb-drive!",[11,5133,5134],{},"🎉",[1047,5136,5138],{"id":5137},"side-note","Side-note",[11,5140,5141,5142,5145,5146,5148,5149],{},"It was attempted to use the ",[15,5143,5144],{},"controlvm usbattach"," command to pass the USB\ndevice to the guest machine, but this did not work as it expects the virtual\nmachine to already be running, and the ",[15,5147,4603],{}," option runs prior to\nbooting the machine. ",[4501,5150,5151],{},[24,5152,5155],{"href":5153,"rel":5154},"https://www.vagrantup.com/docs/virtualbox/configuration.html#vboxmanage-customizations",[28],"11",[45,5157,5159],{"className":931,"code":5158,"language":933,"meta":50,"style":50},"Command: [\"controlvm\", \"060a716b-1965-49e2-bc56-12beed5df716\", \"usbattach36fc9e60-c465-11cf-8056-444553540000\"]\n\nStderr: VBoxManage.exe: error: Machine '060a716b-1965-49e2-bc56-12beed5df716' is not currently running.\n",[15,5160,5161,5166,5170],{"__ignoreMap":50},[54,5162,5163],{"class":56,"line":57},[54,5164,5165],{},"Command: [\"controlvm\", \"060a716b-1965-49e2-bc56-12beed5df716\", \"usbattach36fc9e60-c465-11cf-8056-444553540000\"]\n",[54,5167,5168],{"class":56,"line":64},[54,5169,86],{"emptyLinePlaceholder":85},[54,5171,5172],{"class":56,"line":82},[54,5173,5174],{},"Stderr: VBoxManage.exe: error: Machine '060a716b-1965-49e2-bc56-12beed5df716' is not currently running.\n",[1047,5176,4447],{"id":4446},[3528,5178,5179,5185,5191,5197,5203,5209,5215,5221,5227,5233,5239],{},[2577,5180,5181],{},[24,5182,5184],{"href":4505,"rel":5183},[28],"Docker Desktop on Mac vs. Docker Toolbox",[2577,5186,5187],{},[24,5188,5190],{"href":4510,"rel":5189},[28],"GitHub - HyperKit",[2577,5192,5193],{},[24,5194,5196],{"href":4514,"rel":5195},[28],"GitHub - Docker for Mac - Issue #900",[2577,5198,5199],{},[24,5200,5202],{"href":4531,"rel":5201},[28],"Vagrant Cloud - Arch Linux",[2577,5204,5205],{},[24,5206,5208],{"href":4592,"rel":5207},[28],"Attaching USB Devices to VirtualBox Guests using VBoxManage",[2577,5210,5211],{},[24,5212,5214],{"href":4597,"rel":5213},[28],"GitHub Gist - Vagrant USB Filter",[2577,5216,5217],{},[24,5218,5220],{"href":4953,"rel":5219},[28],"Arch Linux Wiki - EFI System Partition - Format Partitions",[2577,5222,5223],{},[24,5224,5226],{"href":4990,"rel":5225},[28],"Arch Linux Wiki - Arch Linux on USB - Installation Tweaks",[2577,5228,5229],{},[24,5230,5232],{"href":4845,"rel":5231},[28],"Arch Linux Wiki - Installation Guide",[2577,5234,5235],{},[24,5236,5238],{"href":5120,"rel":5237},[28],"Arch Linux Wiki - GRUB - UEFI Systems",[2577,5240,5241],{},[24,5242,5244],{"href":5153,"rel":5243},[28],"Vagrant VBoxManage Customizations ",[776,5246,5247],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}",{"title":50,"searchDepth":64,"depth":64,"links":5249},[5250,5251,5257,5258],{"id":4522,"depth":64,"text":4523},{"id":4839,"depth":64,"text":4840,"children":5252},[5253,5254,5255,5256],{"id":4852,"depth":82,"text":4853},{"id":4944,"depth":82,"text":4945},{"id":5015,"depth":82,"text":5016},{"id":5089,"depth":82,"text":5090},{"id":5137,"depth":64,"text":5138},{"id":4446,"depth":64,"text":4447},[3414],"2020-01-09T00:00:00.000Z","When installing a linux distribution, it is common for the instructions to have\\nthe user create a bootable USB, boot from the device, and proceed with the\\ninstallation procedure from that live medium. However, this blog post will\\noutline an alternative approach where a virtual machine created with Vagrant\\nwill be used in favor of the live medium.",{"draft":1007,"excerpt":5263},{"type":8,"value":5264},[5265],[11,5266,4490],{},"/articles/persistent-archlinux-usb",{"title":4485,"description":4490},"articles/persistent-archlinux-usb",[4544,5271],"archlinux","QfSYgvUkRNZzsOeUEVACoya5Vf05yPXUtVuXWDNgkY4",{"id":5274,"title":5275,"body":5276,"categories":5389,"date":5390,"description":5391,"extension":785,"img":786,"meta":5392,"navigation":85,"path":5397,"seo":5398,"stem":5399,"tags":5400,"__hash__":5403},"content/articles/docker-selinux-volumes.md","Docker Volume Permissions with SELinux",{"type":8,"value":5277,"toc":5387},[5278,5281,5290,5293,5335,5346,5352,5355,5363,5368,5384],[11,5279,5280],{},"Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes.",[45,5282,5284],{"className":931,"code":5283,"language":933,"meta":50,"style":50},"mkdir: can't create directory '/data': Permission denied\n",[15,5285,5286],{"__ignoreMap":50},[54,5287,5288],{"class":56,"line":57},[54,5289,5283],{},[5291,5292],"hr",{},[45,5294,5296],{"className":1081,"code":5295,"language":1083,"meta":50,"style":50},"$ docker info --format '{{json .SecurityOptions}}'\n[\n  \"name=seccomp,profile=/etc/docker/seccomp.json\",\n  \"name=selinux\"\n]\n",[15,5297,5298,5314,5319,5326,5331],{"__ignoreMap":50},[54,5299,5300,5302,5305,5308,5311],{"class":56,"line":57},[54,5301,1090],{"class":98},[54,5303,5304],{"class":78}," docker",[54,5306,5307],{"class":78}," info",[54,5309,5310],{"class":297}," --format",[54,5312,5313],{"class":78}," '{{json .SecurityOptions}}'\n",[54,5315,5316],{"class":56,"line":64},[54,5317,5318],{"class":71},"[\n",[54,5320,5321,5324],{"class":56,"line":82},[54,5322,5323],{"class":78},"  \"name=seccomp,profile=/etc/docker/seccomp.json\"",[54,5325,1746],{"class":71},[54,5327,5328],{"class":56,"line":89},[54,5329,5330],{"class":78},"  \"name=selinux\"\n",[54,5332,5333],{"class":56,"line":111},[54,5334,2182],{"class":71},[11,5336,5337,5338,5341,5342,5345],{},"It turns out that this can be resolved by appending the ",[15,5339,5340],{},":z"," flag to the volume\nmappings in the ",[15,5343,5344],{},"docker-compose.yml"," file, indicating that the volume content\nis shared.",[45,5347,5350],{"className":5348,"code":5349,"language":175},[173],"services:\n  server:\n    volumes:\n      - ./data:/data:z\n",[15,5351,5349],{"__ignoreMap":50},[11,5353,5354],{},"From the Docker documentation:",[834,5356,5357],{},[11,5358,2521,5359,5362],{},[15,5360,5361],{},"z"," option tells Docker that two containers share the volume content. As\na result, Docker labels the content with a shared content label. Shared\nvolume labels allow all containers to read/write content.",[11,5364,5365],{},[5366,5367,4447],"strong",{},[2574,5369,5370,5377],{},[2577,5371,5372],{},[24,5373,5376],{"href":5374,"rel":5375},"https://docs.docker.com/engine/reference/commandline/info/",[28],"Docker Docs: Docker Info",[2577,5378,5379],{},[24,5380,5383],{"href":5381,"rel":5382},"https://docs.docker.com/engine/reference/commandline/run/#mount-volumes-from-container---volumes-from",[28],"Docker Docs: Mounting Volumes",[776,5385,5386],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}",{"title":50,"searchDepth":64,"depth":64,"links":5388},[],[3414],"2019-12-26T00:00:00.000Z","Unfamiliar with running Docker on a SELinux enabled system, I found myself\\nrunning into a bunch of file permission errors while creating volumes.",{"draft":1007,"excerpt":5393},{"type":8,"value":5394},[5395],[11,5396,5280],{},"/articles/docker-selinux-volumes",{"title":5275,"description":5280},"articles/docker-selinux-volumes",[5401,5402],"docker","selinux","zILe6G8-icukwIVxOihkMqwje6sH_7AHairLcmhzims",{"id":5405,"title":5406,"body":5407,"categories":5563,"date":5564,"description":5565,"extension":785,"img":786,"meta":5566,"navigation":85,"path":5576,"seo":5577,"stem":5579,"tags":5580,"__hash__":5583},"content/articles/apu2-firmware-upgrade.md","Upgrading the Firmware on the PCEngines APU2",{"type":8,"value":5408,"toc":5561},[5409,5418,5421,5424,5430,5445,5473,5480,5496,5499,5523,5528,5558],[11,5410,5411,5412,5417],{},"I've had a ",[24,5413,5416],{"href":5414,"rel":5415},"https://pcengines.ch/apu2.htm",[28],"PCEngines APU2"," gathering dust for a\nfew years, and have recently decided to dust it off.",[11,5419,5420],{},"Since the last time the device has been powered on, there have been many great\nimprovements to the firmware, and it was very-much due for an upgrade. The\nfollowing steps outline how the firmware was upgraded on the APU from the\nalready-installed operating system -- CentOS.",[11,5422,5423],{},"First, we will connect to the device over the serial port",[45,5425,5428],{"className":5426,"code":5427,"language":175},[173],"screen /dev/tty.usbserial 115200\n",[15,5429,5427],{"__ignoreMap":50},[11,5431,5432,5433,5436,5437,5440,5441,5444],{},"Then, we will install the ",[15,5434,5435],{},"flashrom"," utility that is needed to update the\nfirmware. Because it is not available in the default ",[15,5438,5439],{},"yum"," repositories, we\nwill enable the ",[925,5442,5443],{},"Extra Packages for Enterprise Linux"," (EPEL) repository before\ninstallation.",[45,5446,5448],{"className":1081,"code":5447,"language":1083,"meta":50,"style":50},"sudo yum install epel-release\nsudo yum install flashrom\n",[15,5449,5450,5462],{"__ignoreMap":50},[54,5451,5452,5454,5457,5459],{"class":56,"line":57},[54,5453,3752],{"class":98},[54,5455,5456],{"class":78}," yum",[54,5458,1096],{"class":78},[54,5460,5461],{"class":78}," epel-release\n",[54,5463,5464,5466,5468,5470],{"class":56,"line":64},[54,5465,3752],{"class":98},[54,5467,5456],{"class":78},[54,5469,1096],{"class":78},[54,5471,5472],{"class":78}," flashrom\n",[11,5474,5475,5476,1045],{},"Next, we will download the latest version of the firmware that is compatible\nwith the APU2 device from the PC Engines release website:\n",[24,5477,5478],{"href":5478,"rel":5479},"https://pcengines.github.io/",[28],[45,5481,5483],{"className":1081,"code":5482,"language":1083,"meta":50,"style":50},"curl -O https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom\n",[15,5484,5485],{"__ignoreMap":50},[54,5486,5487,5490,5493],{"class":56,"line":57},[54,5488,5489],{"class":98},"curl",[54,5491,5492],{"class":297}," -O",[54,5494,5495],{"class":78}," https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom\n",[11,5497,5498],{},"And finally, we will flash the firmware...",[45,5500,5502],{"className":1081,"code":5501,"language":1083,"meta":50,"style":50},"sudo flashrom -w apu2_v4.11.0.1.rom -p internal:boardmismatch=force\n",[15,5503,5504],{"__ignoreMap":50},[54,5505,5506,5508,5511,5514,5517,5520],{"class":56,"line":57},[54,5507,3752],{"class":98},[54,5509,5510],{"class":78}," flashrom",[54,5512,5513],{"class":297}," -w",[54,5515,5516],{"class":78}," apu2_v4.11.0.1.rom",[54,5518,5519],{"class":297}," -p",[54,5521,5522],{"class":78}," internal:boardmismatch=force\n",[11,5524,5525],{},[5366,5526,5527],{},"References:",[2574,5529,5530,5535,5540,5546,5552],{},[2577,5531,5532],{},[24,5533,5414],{"href":5414,"rel":5534},[28],[2577,5536,5537],{},[24,5538,5478],{"href":5478,"rel":5539},[28],[2577,5541,5542],{},[24,5543,5544],{"href":5544,"rel":5545},"https://github.com/pcengines/apu2-documentation/blob/master/docs/firmware_flashing.md",[28],[2577,5547,5548],{},[24,5549,5550],{"href":5550,"rel":5551},"https://github.com/pcengines/apu2-documentation/blob/master/docs/cold_reset.md",[28],[2577,5553,5554],{},[24,5555,5556],{"href":5556,"rel":5557},"https://github.com/elad/openbsd-apu2",[28],[776,5559,5560],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}",{"title":50,"searchDepth":64,"depth":64,"links":5562},[],[3414],"2019-12-21T00:00:00.000Z","I've had a PCEngines APU2 gathering dust for a\\nfew years, and have recently decided to dust it off.",{"draft":1007,"excerpt":5567},{"type":8,"value":5568},[5569,5574],[11,5570,5411,5571,5417],{},[24,5572,5416],{"href":5414,"rel":5573},[28],[11,5575,5420],{},"/articles/apu2-firmware-upgrade",{"title":5406,"description":5578},"I've had a PCEngines APU2 gathering dust for a\nfew years, and have recently decided to dust it off.","articles/apu2-firmware-upgrade",[5581,5582],"pcengine","apu","3oXiiZXTLJ4DKfhCeFRx2dVivYkduAT0IXRXbPgIkmg",1748991150867]
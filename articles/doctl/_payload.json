[{"data":1,"prerenderedAt":711},["Reactive",2],{"page-data":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"tags":11,"categories":14,"excerpt":15,"body":43,"_type":706,"_id":707,"_source":708,"_file":709,"_extension":710},"/articles/doctl","articles",false,"","Exploring the Digital Ocean `doctl` Utility","I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean doctl command line utility.\nThis proved to be an extremely easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.","2023-01-01",[12,13],"linux","digital-ocean",[12],{"type":16,"children":17},"root",[18],{"type":19,"tag":20,"props":21,"children":22},"element","p",{},[23,26,33,35,41],{"type":24,"value":25},"text","I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean ",{"type":19,"tag":27,"props":28,"children":30},"code",{"className":29},[],[31],{"type":24,"value":32},"doctl",{"type":24,"value":34}," command line utility.\nThis proved to be an ",{"type":19,"tag":36,"props":37,"children":38},"em",{},[39],{"type":24,"value":40},"extremely",{"type":24,"value":42}," easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.",{"type":16,"children":44,"toc":704},[45,60,76,156,177,212,217,289,294,389,402,452,465,495,500,624,629,657,693,698],{"type":19,"tag":20,"props":46,"children":47},{},[48,49,54,55,59],{"type":24,"value":25},{"type":19,"tag":27,"props":50,"children":52},{"className":51},[],[53],{"type":24,"value":32},{"type":24,"value":34},{"type":19,"tag":36,"props":56,"children":57},{},[58],{"type":24,"value":40},{"type":24,"value":42},{"type":19,"tag":20,"props":61,"children":62},{},[63,65,74],{"type":24,"value":64},"To start things off, I had to install and setup authentication to Digital Ocean. Doing\nthis on my Mac machine, I opted to use ",{"type":19,"tag":66,"props":67,"children":71},"a",{"href":68,"rel":69},"https://brew.sh/",[70],"nofollow",[72],{"type":24,"value":73},"Homebrew",{"type":24,"value":75},".",{"type":19,"tag":77,"props":78,"children":82},"pre",{"className":79,"code":80,"language":81,"meta":7,"style":7},"language-sh shiki shiki-themes github-light","# install `doctl`\nbrew install doctl\n\n# setup authentication\ndoctl auth init\n","sh",[83],{"type":19,"tag":27,"props":84,"children":85},{"__ignoreMap":7},[86,98,119,129,138],{"type":19,"tag":87,"props":88,"children":91},"span",{"class":89,"line":90},"line",1,[92],{"type":19,"tag":87,"props":93,"children":95},{"style":94},"--shiki-default:#6A737D",[96],{"type":24,"value":97},"# install `doctl`\n",{"type":19,"tag":87,"props":99,"children":101},{"class":89,"line":100},2,[102,108,114],{"type":19,"tag":87,"props":103,"children":105},{"style":104},"--shiki-default:#6F42C1",[106],{"type":24,"value":107},"brew",{"type":19,"tag":87,"props":109,"children":111},{"style":110},"--shiki-default:#032F62",[112],{"type":24,"value":113}," install",{"type":19,"tag":87,"props":115,"children":116},{"style":110},[117],{"type":24,"value":118}," doctl\n",{"type":19,"tag":87,"props":120,"children":122},{"class":89,"line":121},3,[123],{"type":19,"tag":87,"props":124,"children":126},{"emptyLinePlaceholder":125},true,[127],{"type":24,"value":128},"\n",{"type":19,"tag":87,"props":130,"children":132},{"class":89,"line":131},4,[133],{"type":19,"tag":87,"props":134,"children":135},{"style":94},[136],{"type":24,"value":137},"# setup authentication\n",{"type":19,"tag":87,"props":139,"children":141},{"class":89,"line":140},5,[142,146,151],{"type":19,"tag":87,"props":143,"children":144},{"style":104},[145],{"type":24,"value":32},{"type":19,"tag":87,"props":147,"children":148},{"style":110},[149],{"type":24,"value":150}," auth",{"type":19,"tag":87,"props":152,"children":153},{"style":110},[154],{"type":24,"value":155}," init\n",{"type":19,"tag":20,"props":157,"children":158},{},[159,161,168,170,176],{"type":24,"value":160},"While the online ",{"type":19,"tag":66,"props":162,"children":165},{"href":163,"rel":164},"https://docs.digitalocean.com/reference/doctl/reference/compute/droplet/create/",[70],[166],{"type":24,"value":167},"documentation",{"type":24,"value":169}," is fantastic, I instead found myself mostly referencing the outputs of ",{"type":19,"tag":27,"props":171,"children":173},{"className":172},[],[174],{"type":24,"value":175},"--help",{"type":24,"value":75},{"type":19,"tag":77,"props":178,"children":180},{"className":79,"code":179,"language":81,"meta":7,"style":7},"doctl compute droplet create --help\n",[181],{"type":19,"tag":27,"props":182,"children":183},{"__ignoreMap":7},[184],{"type":19,"tag":87,"props":185,"children":186},{"class":89,"line":90},[187,191,196,201,206],{"type":19,"tag":87,"props":188,"children":189},{"style":104},[190],{"type":24,"value":32},{"type":19,"tag":87,"props":192,"children":193},{"style":110},[194],{"type":24,"value":195}," compute",{"type":19,"tag":87,"props":197,"children":198},{"style":110},[199],{"type":24,"value":200}," droplet",{"type":19,"tag":87,"props":202,"children":203},{"style":110},[204],{"type":24,"value":205}," create",{"type":19,"tag":87,"props":207,"children":209},{"style":208},"--shiki-default:#005CC5",[210],{"type":24,"value":211}," --help\n",{"type":19,"tag":20,"props":213,"children":214},{},[215],{"type":24,"value":216},"I had to find the image name of the version of Ubuntu I wanted to install:",{"type":19,"tag":77,"props":218,"children":220},{"className":79,"code":219,"language":81,"meta":7,"style":7},"doctl compute image list --public | grep ubuntu-22\n\n# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n",[221],{"type":19,"tag":27,"props":222,"children":223},{"__ignoreMap":7},[224,266,273,281],{"type":19,"tag":87,"props":225,"children":226},{"class":89,"line":90},[227,231,235,240,245,250,256,261],{"type":19,"tag":87,"props":228,"children":229},{"style":104},[230],{"type":24,"value":32},{"type":19,"tag":87,"props":232,"children":233},{"style":110},[234],{"type":24,"value":195},{"type":19,"tag":87,"props":236,"children":237},{"style":110},[238],{"type":24,"value":239}," image",{"type":19,"tag":87,"props":241,"children":242},{"style":110},[243],{"type":24,"value":244}," list",{"type":19,"tag":87,"props":246,"children":247},{"style":208},[248],{"type":24,"value":249}," --public",{"type":19,"tag":87,"props":251,"children":253},{"style":252},"--shiki-default:#D73A49",[254],{"type":24,"value":255}," |",{"type":19,"tag":87,"props":257,"children":258},{"style":104},[259],{"type":24,"value":260}," grep",{"type":19,"tag":87,"props":262,"children":263},{"style":110},[264],{"type":24,"value":265}," ubuntu-22\n",{"type":19,"tag":87,"props":267,"children":268},{"class":89,"line":100},[269],{"type":19,"tag":87,"props":270,"children":271},{"emptyLinePlaceholder":125},[272],{"type":24,"value":128},{"type":19,"tag":87,"props":274,"children":275},{"class":89,"line":121},[276],{"type":19,"tag":87,"props":277,"children":278},{"style":94},[279],{"type":24,"value":280},"# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n",{"type":19,"tag":87,"props":282,"children":283},{"class":89,"line":131},[284],{"type":19,"tag":87,"props":285,"children":286},{"style":94},[287],{"type":24,"value":288},"# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n",{"type":19,"tag":20,"props":290,"children":291},{},[292],{"type":24,"value":293},"And also the slug of the compute size:",{"type":19,"tag":77,"props":295,"children":297},{"className":79,"code":296,"language":81,"meta":7,"style":7},"doctl compute size list\n\n# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n",[298],{"type":19,"tag":27,"props":299,"children":300},{"__ignoreMap":7},[301,322,329,337,345,353,362,371,380],{"type":19,"tag":87,"props":302,"children":303},{"class":89,"line":90},[304,308,312,317],{"type":19,"tag":87,"props":305,"children":306},{"style":104},[307],{"type":24,"value":32},{"type":19,"tag":87,"props":309,"children":310},{"style":110},[311],{"type":24,"value":195},{"type":19,"tag":87,"props":313,"children":314},{"style":110},[315],{"type":24,"value":316}," size",{"type":19,"tag":87,"props":318,"children":319},{"style":110},[320],{"type":24,"value":321}," list\n",{"type":19,"tag":87,"props":323,"children":324},{"class":89,"line":100},[325],{"type":19,"tag":87,"props":326,"children":327},{"emptyLinePlaceholder":125},[328],{"type":24,"value":128},{"type":19,"tag":87,"props":330,"children":331},{"class":89,"line":121},[332],{"type":19,"tag":87,"props":333,"children":334},{"style":94},[335],{"type":24,"value":336},"# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n",{"type":19,"tag":87,"props":338,"children":339},{"class":89,"line":131},[340],{"type":19,"tag":87,"props":341,"children":342},{"style":94},[343],{"type":24,"value":344},"# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n",{"type":19,"tag":87,"props":346,"children":347},{"class":89,"line":140},[348],{"type":19,"tag":87,"props":349,"children":350},{"style":94},[351],{"type":24,"value":352},"# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n",{"type":19,"tag":87,"props":354,"children":356},{"class":89,"line":355},6,[357],{"type":19,"tag":87,"props":358,"children":359},{"style":94},[360],{"type":24,"value":361},"# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n",{"type":19,"tag":87,"props":363,"children":365},{"class":89,"line":364},7,[366],{"type":19,"tag":87,"props":367,"children":368},{"style":94},[369],{"type":24,"value":370},"# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n",{"type":19,"tag":87,"props":372,"children":374},{"class":89,"line":373},8,[375],{"type":19,"tag":87,"props":376,"children":377},{"style":94},[378],{"type":24,"value":379},"# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n",{"type":19,"tag":87,"props":381,"children":383},{"class":89,"line":382},9,[384],{"type":19,"tag":87,"props":385,"children":386},{"style":94},[387],{"type":24,"value":388},"# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n",{"type":19,"tag":20,"props":390,"children":391},{},[392,394,400],{"type":24,"value":393},"I've also configured a few SSH keys with Digital Ocean, and I can have the key (specified by ID) provisioned to the machine using the ",{"type":19,"tag":27,"props":395,"children":397},{"className":396},[],[398],{"type":24,"value":399},"--ssh-keys",{"type":24,"value":401}," flag.",{"type":19,"tag":77,"props":403,"children":405},{"className":79,"code":404,"language":81,"meta":7,"style":7},"doctl compute ssh-key list\n\n# ID      Name    FingerPrint\n# 1234    mini    \u003Credacted>\n",[406],{"type":19,"tag":27,"props":407,"children":408},{"__ignoreMap":7},[409,429,436,444],{"type":19,"tag":87,"props":410,"children":411},{"class":89,"line":90},[412,416,420,425],{"type":19,"tag":87,"props":413,"children":414},{"style":104},[415],{"type":24,"value":32},{"type":19,"tag":87,"props":417,"children":418},{"style":110},[419],{"type":24,"value":195},{"type":19,"tag":87,"props":421,"children":422},{"style":110},[423],{"type":24,"value":424}," ssh-key",{"type":19,"tag":87,"props":426,"children":427},{"style":110},[428],{"type":24,"value":321},{"type":19,"tag":87,"props":430,"children":431},{"class":89,"line":100},[432],{"type":19,"tag":87,"props":433,"children":434},{"emptyLinePlaceholder":125},[435],{"type":24,"value":128},{"type":19,"tag":87,"props":437,"children":438},{"class":89,"line":121},[439],{"type":19,"tag":87,"props":440,"children":441},{"style":94},[442],{"type":24,"value":443},"# ID      Name    FingerPrint\n",{"type":19,"tag":87,"props":445,"children":446},{"class":89,"line":131},[447],{"type":19,"tag":87,"props":448,"children":449},{"style":94},[450],{"type":24,"value":451},"# 1234    mini    \u003Credacted>\n",{"type":19,"tag":20,"props":453,"children":454},{},[455,457,463],{"type":24,"value":456},"Also, I wanted to install a few packages to the box upon creation, this can be done easily with the ",{"type":19,"tag":27,"props":458,"children":460},{"className":459},[],[461],{"type":24,"value":462},"--user-data-file",{"type":24,"value":464}," flag to run an initialization script.",{"type":19,"tag":77,"props":466,"children":468},{"className":79,"code":467,"language":81,"meta":7,"style":7},"echo 'apt install -y imagemagick zip' > bootstrap.sh\n",[469],{"type":19,"tag":27,"props":470,"children":471},{"__ignoreMap":7},[472],{"type":19,"tag":87,"props":473,"children":474},{"class":89,"line":90},[475,480,485,490],{"type":19,"tag":87,"props":476,"children":477},{"style":208},[478],{"type":24,"value":479},"echo",{"type":19,"tag":87,"props":481,"children":482},{"style":110},[483],{"type":24,"value":484}," 'apt install -y imagemagick zip'",{"type":19,"tag":87,"props":486,"children":487},{"style":252},[488],{"type":24,"value":489}," >",{"type":19,"tag":87,"props":491,"children":492},{"style":110},[493],{"type":24,"value":494}," bootstrap.sh\n",{"type":19,"tag":20,"props":496,"children":497},{},[498],{"type":24,"value":499},"Putting it all together, here is the simple command for creating a small compute instance!",{"type":19,"tag":77,"props":501,"children":503},{"className":79,"code":502,"language":81,"meta":7,"style":7},"doctl compute droplet create \\\n    --image ubuntu-22-10-x64 \\\n    --size s-1vcpu-512mb-10gb \\\n    --region nyc1 \\\n    --ssh-keys 1234 \\\n    --user-data-file boostrap.sh \\\n    ephemeral\n",[504],{"type":19,"tag":27,"props":505,"children":506},{"__ignoreMap":7},[507,531,548,565,582,599,616],{"type":19,"tag":87,"props":508,"children":509},{"class":89,"line":90},[510,514,518,522,526],{"type":19,"tag":87,"props":511,"children":512},{"style":104},[513],{"type":24,"value":32},{"type":19,"tag":87,"props":515,"children":516},{"style":110},[517],{"type":24,"value":195},{"type":19,"tag":87,"props":519,"children":520},{"style":110},[521],{"type":24,"value":200},{"type":19,"tag":87,"props":523,"children":524},{"style":110},[525],{"type":24,"value":205},{"type":19,"tag":87,"props":527,"children":528},{"style":208},[529],{"type":24,"value":530}," \\\n",{"type":19,"tag":87,"props":532,"children":533},{"class":89,"line":100},[534,539,544],{"type":19,"tag":87,"props":535,"children":536},{"style":208},[537],{"type":24,"value":538},"    --image",{"type":19,"tag":87,"props":540,"children":541},{"style":110},[542],{"type":24,"value":543}," ubuntu-22-10-x64",{"type":19,"tag":87,"props":545,"children":546},{"style":208},[547],{"type":24,"value":530},{"type":19,"tag":87,"props":549,"children":550},{"class":89,"line":121},[551,556,561],{"type":19,"tag":87,"props":552,"children":553},{"style":208},[554],{"type":24,"value":555},"    --size",{"type":19,"tag":87,"props":557,"children":558},{"style":110},[559],{"type":24,"value":560}," s-1vcpu-512mb-10gb",{"type":19,"tag":87,"props":562,"children":563},{"style":208},[564],{"type":24,"value":530},{"type":19,"tag":87,"props":566,"children":567},{"class":89,"line":131},[568,573,578],{"type":19,"tag":87,"props":569,"children":570},{"style":208},[571],{"type":24,"value":572},"    --region",{"type":19,"tag":87,"props":574,"children":575},{"style":110},[576],{"type":24,"value":577}," nyc1",{"type":19,"tag":87,"props":579,"children":580},{"style":208},[581],{"type":24,"value":530},{"type":19,"tag":87,"props":583,"children":584},{"class":89,"line":140},[585,590,595],{"type":19,"tag":87,"props":586,"children":587},{"style":208},[588],{"type":24,"value":589},"    --ssh-keys",{"type":19,"tag":87,"props":591,"children":592},{"style":208},[593],{"type":24,"value":594}," 1234",{"type":19,"tag":87,"props":596,"children":597},{"style":208},[598],{"type":24,"value":530},{"type":19,"tag":87,"props":600,"children":601},{"class":89,"line":355},[602,607,612],{"type":19,"tag":87,"props":603,"children":604},{"style":208},[605],{"type":24,"value":606},"    --user-data-file",{"type":19,"tag":87,"props":608,"children":609},{"style":110},[610],{"type":24,"value":611}," boostrap.sh",{"type":19,"tag":87,"props":613,"children":614},{"style":208},[615],{"type":24,"value":530},{"type":19,"tag":87,"props":617,"children":618},{"class":89,"line":364},[619],{"type":19,"tag":87,"props":620,"children":621},{"style":110},[622],{"type":24,"value":623},"    ephemeral\n",{"type":19,"tag":20,"props":625,"children":626},{},[627],{"type":24,"value":628},"Finally, I can connect, do my thing, and destroy the instance.",{"type":19,"tag":77,"props":630,"children":632},{"className":79,"code":631,"language":81,"meta":7,"style":7},"doctl compute ssh ephemeral\n",[633],{"type":19,"tag":27,"props":634,"children":635},{"__ignoreMap":7},[636],{"type":19,"tag":87,"props":637,"children":638},{"class":89,"line":90},[639,643,647,652],{"type":19,"tag":87,"props":640,"children":641},{"style":104},[642],{"type":24,"value":32},{"type":19,"tag":87,"props":644,"children":645},{"style":110},[646],{"type":24,"value":195},{"type":19,"tag":87,"props":648,"children":649},{"style":110},[650],{"type":24,"value":651}," ssh",{"type":19,"tag":87,"props":653,"children":654},{"style":110},[655],{"type":24,"value":656}," ephemeral\n",{"type":19,"tag":77,"props":658,"children":660},{"className":79,"code":659,"language":81,"meta":7,"style":7},"doctl compute droplet delete --force ephemeral\n",[661],{"type":19,"tag":27,"props":662,"children":663},{"__ignoreMap":7},[664],{"type":19,"tag":87,"props":665,"children":666},{"class":89,"line":90},[667,671,675,679,684,689],{"type":19,"tag":87,"props":668,"children":669},{"style":104},[670],{"type":24,"value":32},{"type":19,"tag":87,"props":672,"children":673},{"style":110},[674],{"type":24,"value":195},{"type":19,"tag":87,"props":676,"children":677},{"style":110},[678],{"type":24,"value":200},{"type":19,"tag":87,"props":680,"children":681},{"style":110},[682],{"type":24,"value":683}," delete",{"type":19,"tag":87,"props":685,"children":686},{"style":208},[687],{"type":24,"value":688}," --force",{"type":19,"tag":87,"props":690,"children":691},{"style":110},[692],{"type":24,"value":656},{"type":19,"tag":20,"props":694,"children":695},{},[696],{"type":24,"value":697},"All-in-all, I was up and running in about 20 minutes. What a handy utility!",{"type":19,"tag":699,"props":700,"children":701},"style",{},[702],{"type":24,"value":703},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":100,"depth":100,"links":705},[],"markdown","content:articles:doctl.md","content","articles/doctl.md","md",1708886695863]
<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="modulepreload" href="/articles/doctl/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.2cf4bc0c.js"><link rel="preload" as="style" href="/_nuxt/entry.16cfe382.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.15516713.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Header.6c7e64bf.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/menu.14b43cf2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/open-closed.915425b0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Footer.92dceb85.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.d75a380a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.63c2249b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.1dec55d2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/preview.d7b70627.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.323c639f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/asyncData.95ef23de.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.0a35358e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.48c103b6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.317bb5bc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.790238e4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.1057ba87.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseEm.01c2d207.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.0b8794f2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.ac829450.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ContentDoc.42e67432.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ContentQuery.1fc72e5e.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/light.1bfa06a5.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.e2c26776.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/transition.418380ab.js"><link rel="stylesheet" href="/_nuxt/entry.16cfe382.css"><style>pre code .line{display:block;min-height:1rem}</style></head>
<body ><div id="__nuxt"><body class="bg-background"><!--[--><main class="flex flex-col min-h-screen bg-background font-display"><nav class="container mx-auto pt-6"><div class="flex justify-between text-gray-200 font-semibold"><a href="/" class="mr-2 text-white hover:text-blue-200"><div class="flex justify-center items-center"><img src="https://avatars.githubusercontent.com/u/5807118?v=4" alt="Selfie" class="ring-2 ring-sky-700 transition duration-500 hover:ring-4 hover:ring-teal-700 shadow-lg max-h-12 rounded-full"></div></a><div><div data-headlessui-state class="relative inline-block text-left z-50"><div><button id="headlessui-menu-button-16" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state class="inline-flex w-full justify-center rounded-md bg-black bg-opacity-30 p-2 text-sm font-medium text-white hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="h-5 w-5 text-white hover:text-blue-400"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path></svg></button></div><!----></div></div></div></nav><main class="flex-1 mt-4"><!--[--><!--[--><div class="container mx-auto px-2"><div class="mx-6 md:mx-12"><article class="shadow-lg bg-gray-200 mb-10 p-10"><h1 class="font-bold text-3xl text-gray-700">Exploring the Digital Ocean `doctl` Utility</h1><p class="text-sm text-gray-600 flex items-center mb-4">2023-01-01</p><article class="prose max-w-none"><!--[--><div><p><!--[-->I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean <code><!--[-->doctl<!--]--></code> command line utility.
This proved to be an <em><!--[-->extremely<!--]--></em> easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.<!--]--></p><p><!--[-->To start things off, I had to install and setup authentication to Digital Ocean. Doing
this on my Mac machine, I opted to use <a href="https://brew.sh/" rel="nofollow"><!--[-->Homebrew<!--]--></a>.<!--]--></p><!--[--><pre><code># install `doctl`
brew install doctl

# setup authentication
doctl auth init
</code></pre><!--]--><p><!--[-->While the online <a href="https://docs.digitalocean.com/reference/doctl/reference/compute/droplet/create/" rel="nofollow"><!--[-->documentation<!--]--></a> is fantastic, I instead found myself mostly referencing the outputs of <code><!--[-->--help<!--]--></code>.<!--]--></p><!--[--><pre><code>doctl compute droplet create --help
</code></pre><!--]--><p><!--[-->I had to find the image name of the version of Ubuntu I wanted to install:<!--]--></p><!--[--><pre><code>doctl compute image list --public | grep ubuntu-22

# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7
# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7
</code></pre><!--]--><p><!--[-->And also the slug of the compute size:<!--]--></p><!--[--><pre><code>doctl compute size list

# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly
# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950
# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930
# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420
# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420
# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860
# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830
</code></pre><!--]--><p><!--[-->I&#39;ve also configured a few SSH keys with Digital Ocean, and I can have the key (specified by ID) provisioned to the machine using the <code><!--[-->--ssh-keys<!--]--></code> flag.<!--]--></p><!--[--><pre><code>doctl compute ssh-key list

# ID      Name    FingerPrint
# 1234    mini    &lt;redacted&gt;
</code></pre><!--]--><p><!--[-->Also, I wanted to install a few packages to the box upon creation, this can be done easily with the <code><!--[-->--user-data-file<!--]--></code> flag to run an initialization script.<!--]--></p><!--[--><pre><code>echo &#39;apt install -y imagemagick zip&#39; &gt; bootstrap.sh
</code></pre><!--]--><p><!--[-->Putting it all together, here is the simple command for creating a small compute instance!<!--]--></p><!--[--><pre><code>doctl compute droplet create \
    --image ubuntu-22-10-x64 \
    --size s-1vcpu-512mb-10gb \
    --region nyc1 \
    --ssh-keys 1234 \
    --user-data-file boostrap.sh \
    ephemeral
</code></pre><!--]--><p><!--[-->Finally, I can connect, do my thing, and destroy the instance.<!--]--></p><!--[--><pre><code>doctl compute ssh ephemeral
</code></pre><!--]--><!--[--><pre><code>doctl compute droplet delete --force ephemeral
</code></pre><!--]--><p><!--[-->All-in-all, I was up and running in about 20 minutes. What a handy utility!<!--]--></p></div><!--]--></article></article></div></div><!--]--><!--]--></main><footer class="w-full p-4 text-xs text-center font-bold text-white pin-b"><a href="https://github.com/cmpadden/cmpadden.github.io">Â© Colton Padden</a></footer></main><!--]--></body></div><script type="module">import p from "/articles/doctl/_payload.js";window.__NUXT__={...p,...((function(a,b){return {state:{},_errors:{},serverRendered:true,config:{public:{content:{locales:[],integrity:1687641484976,experimental:{stripQueryParameters:a,clientDB:a,advancedIgnoresPattern:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:a,wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}},prerenderedAt:1687641513978}}(false,"")))}</script><script type="module" src="/_nuxt/entry.2cf4bc0c.js" crossorigin></script></body>
</html>
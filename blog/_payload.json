[{"data":1,"prerenderedAt":6112},["ShallowReactive",2],{"articles":3},[4,168,245,1049,1352,1530,1956,2939,3569,3972,4050,4165,4279,4635,5016,5804,5934],{"id":5,"title":6,"body":7,"categories":151,"date":153,"description":13,"extension":154,"img":155,"meta":156,"navigation":161,"path":162,"seo":163,"stem":164,"tags":165,"__hash__":167},"content/blog/using-codex-for-education-at-dagster-labs.md","Using Codex for education at Dagster Labs",{"type":8,"value":9,"toc":143},"minimark",[10,14,22,27,36,39,48,59,62,66,69,72,75,78,81,87,95,99,102,105,111,120,124,127,130,133,137,140],[11,12,13],"p",{},"I recently had the opportunity to showcase how we use Codex for educational content at Dagster Labs which was featured on the OpenAI developer blog; you can find a full copy of that post below.",[11,15,16],{},[17,18,19],"a",{"href":19,"rel":20},"https://developers.openai.com/blog/codex-for-documentation-dagster",[21],"nofollow",[23,24,26],"h2",{"id":25},"overview","Overview",[11,28,29,30,35],{},"At ",[17,31,34],{"href":32,"rel":33},"https://dagster.io/",[21],"Dagster Labs",", we produce a lot of technical educational content for data engineers, machine learning engineers, and analysts to better understand how to use Dagster, an open source workflow orchestration framework. Because our users come from varied technical backgrounds, we’ve found it essential to meet each persona at the right technical depth.",[11,37,38],{},"In this post, I’ll share how we use OpenAI’s Codex to accelerate documentation, translate content across mediums, and even measure how complete our docs are.\nThe power of CONTRIBUTING.md files",[11,40,41,42,47],{},"To make it easier for our community members and internal engineers to contribute documentation, we overhauled our ",[17,43,46],{"href":44,"rel":45},"https://github.com/dagster-io/dagster/blob/3c2d36054f4014ca8316e533975a538d6eff62c4/docs/CONTRIBUTING.md",[21],"CONTRIBUTING.md"," file. To our surprise, we had inadvertently significantly improved the utility of Codex. It turns out there is serious value in clearly outlining the hierarchy, structure, and best practices for writing documentation in your code base. Both for humans and robots.",[49,50,55],"pre",{"className":51,"code":53,"language":54},[52],"language-text","# Contributing documentation\n\n## Content\n\n### Links\n\n#### Use full paths instead of relative links\n\nDocusaurus doesn't always render relative links correctly, which can result in users seeing intermittent 404s when accessing those links. Use full paths instead of relative links, like this:\n\n```\nFor more information, see \"[Defining assets](/guides/build/assets/defining-assets)\".\n```\n\ninstead of this:\n\n```\nFor more information, see \"[Defining assets](defining-assets)\".\n```\n\n#### Use non-trailing slash links to Dagster docs\n\ne.g. use `/guides/build/assets/defining-assets` instead of `/guides/build/assets/defining-assets/`.\n\n**Context:** Links to Dagster docs with trailing slashes automatically redirect to non-trailing slash links. While that's helpful for docs links we don't control, too many redirects on our own pages can confuse search engines and cause SEO issues.\n\n### API documentation\n\n...\n","text",[56,57,53],"code",{"__ignoreMap":58},"",[11,60,61],{},"Codex is only as good as the scaffolding you give it. A well-structured CONTRIBUTING.md becomes both documentation for humans and a map for AI.",[23,63,65],{"id":64},"codex-for-understanding","Codex for understanding",[11,67,68],{},"Beyond writing docs, Codex can act as an always-available code explainer. For developer advocates and technical writers, this has been invaluable. In open source projects, or projects with many engineers, it can often be difficult to stay up-to-date on all of the features being developed, and how they work. This is especially true for smaller teams of developer advocates and technical writers. We’ve found that some of the best assistance Codex provides is through explaining pull requests, or pointing it to a part of the codebase and asking for an explanation.",[11,70,71],{},"A tip we’ve found here is to leverage the gh command from within Codex to explain pull requests. Ask it to review the PR description and diff, summarize why the feature was implemented, and explain how it should be exposed to end users.\nThe power of the mono repo",[11,73,74],{},"This might be a controversial opinion, but I’m a big fan of mono repos. When context is key, having everything accessible in a single repository makes it so much easier to get access to what you need, and in the case of Codex, this means complete context: code, docs, and examples all in one place.",[11,76,77],{},"While some people have expressed concern about tools like Codex failing to scale with repositories, I’ve found this not to be the case. By making use of file references within Codex (@) you can give Codex the initial sub directory or file to start with before further exploration. And there are some serious benefits to having your framework code alongside your documentation in a single repository. This setup lets us prompt Codex to read framework code and draft initial documentation scaffolds that we can then refine.",[11,79,80],{},"Here’s an example where we prompted Codex to review an existing pull request, and add a section to the documentation on how exactly these environment variables are useful when configuring your deployment.",[49,82,85],{"className":83,"code":84,"language":54},[52],">_ You are using OpenAI Codex in ~/src/dagster\n\n To get started, describe a task or try one of these commands:\n\n /init - create an AGENTS.md file with instructions for Codex\n /status - show current session configuration and token usage\n /approvals - choose what Codex can do without approval\n /model - choose what model and reasoning effort to use\n\n▌ Review the changes made in pull request 32557 using `gh pr diff \u003Cnumber>`, review the environment\n▌ variables that were introduced and already exist for configuring the gRPC server, then update\n▌ docs/docs/deployment/oss/oss-instance-configuration.md  page to outline the configuration options.\n\n> I’ll fetch the diff for PR 32557 and scan for added/updated gRPC-related\n  environment variables, then cross-check with existing env var usage in the\n  repo.\n\n• Ran gh pr diff 32557 | sed -n '1,200p'\n\n• Ran gh pr diff 32557 | sed -n '200,400p'\n\n• Explored\n  └ Search DAGSTER_GRPC_[A-Z_]+ in dagster\n    Read api.py, code_server.py, oss-instance-configuration.md\n    Search DAGSTER_CODE_SERVER_[A-Z_]+\n    Read constants.py\n    Search DAGSTER_(REPOSITORY|SCHEDULE|SENSOR)_GRPC_TIMEOUT_SECONDS|\n           DAGSTER_GRPC_SHUTDOWN_GRACE_PERIOD in dagster\n    Read proxy_server_manager.py\n\n> Next, I’ll expand the gRPC servers section of the instance configuration docs\n  to include API gRPC server variables and communication timeouts/limits, keeping\n  style consisten\n\n  ...\n",[56,86,84],{"__ignoreMap":58},[11,88,89,90],{},"You can find the pull request that was produced by this session at ",[17,91,94],{"href":92,"rel":93},"https://github.com/dagster-io/dagster/pull/32558",[21],"dagster-io/dagster#32558",[23,96,98],{"id":97},"translating-between-content-mediums","Translating between content mediums",[11,100,101],{},"Different personas prefer different learning formats, but the underlying ideas are often the same. Because of that, we produce a variety of content mediums: blog posts, tutorials, online courses, YouTube videos, and more. The core content of these materials can often be the same, just presented differently depending on the target persona.",[11,103,104],{},"Codex works exceptionally well at translating between these mediums. For example, taking a tutorial and producing a transcript for a YouTube video. Or taking a low-level tutorial, and abstracting it slightly for a blog post. In the below screenshot you can find an example prompt used to take one of our example projects and produce a video transcript. This approach saves hours of rewriting while keeping our messaging consistent across channels.",[49,106,109],{"className":107,"code":108,"language":54},[52],">_ You are using OpenAI Codex in ~/src/dagster\n\n▌Review the example project: examples/docs_projects/project_dagster_modal_pipes\n▌and produce a video transcript to teach users the core Dagster and Modal concept\n▌covered. Break the transcript into sections, and include code snippets to be\n▌showcased in the video. The prose of the script should be fun but professional.\n▌Save this to MODAL_VIDEO_TRANSCRIPT.md.\n\n> I’m going to scan the example project to understand its structure and code\n  before drafting the video transcript.\n\n• Ran\n  └ bash -lc 'ls -la' bash -lc 'ls -la examples/docs_projects/\n        project_dagster_modal_pipes' bash -lc \"rg --files examples/docs_projects/\n        project_dagster_modal_pipes | sed -n '1,120p'\"\n\n• Explored\n  └ List project_dagster_modal_pipes\n    Search rg --files examples/docs_projects/project_dagster_modal_pipes\n    Read README.md, definitions.py, __init__.py, resources.py, constants.py,\n         feeds.py, pipeline_factory.py, summarize.py, config.py, transcribe.py,\n         hello_dagster.py, verify_cloud_mount.py\n\n• Added MODAL_VIDEO_TRANSCRIPT.md (+335 -0)\n",[56,110,108],{"__ignoreMap":58},[11,112,113,114,119],{},"See the full video transcript ",[17,115,118],{"href":116,"rel":117},"https://gist.github.com/cmpadden/a371c1300bdc42601a77b3eefb938483",[21],"here","!",[23,121,123],{"id":122},"evaluating-documentation-coverage","Evaluating documentation coverage",[11,125,126],{},"One of the more experimental ways we’re using Codex is as a proxy for human understanding.",[11,128,129],{},"By using documentation as the source-of-truth, and base context for Codex, we can have it generate code. For example, people often use Dagster for running and observing their dbt data models alongside other data processing code.",[11,131,132],{},"By prompting Codex to reference the documentation and produce the code for this project, we can then run a test suite on the resulting code to check that it operates as expected. If it works as expected we can assume that our documentation has adequate coverage of the required content. If Codex can generate working code purely from our documentation, it’s a strong signal that humans can as well which becomes an indirect measure of documentation completeness.",[23,134,136],{"id":135},"summary","Summary",[11,138,139],{},"All in all, the Dagster team has found Codex to be immensely helpful for creating, reviewing, and translating education content. It has enabled us to scale beyond our original capacity, helped us ensure that we have adequate documentation coverage as the framework evolves, and more importantly, it has made it so that we can more easily support our community.",[11,141,142],{},"Codex has underscored how important context and structure are. For us, that means refining our documentation architecture so both humans and AI can navigate it easily. This feedback loop, powered by AI, has improved both how we create content and how users generate framework code. As AI tools evolve, the line between documentation, code, and automation will blur. Teams that treat documentation as structured data will have a major advantage.",{"title":58,"searchDepth":144,"depth":144,"links":145},2,[146,147,148,149,150],{"id":25,"depth":144,"text":26},{"id":64,"depth":144,"text":65},{"id":97,"depth":144,"text":98},{"id":122,"depth":144,"text":123},{"id":135,"depth":144,"text":136},[152],"ai","2025-10-27T00:00:00.000Z","md",null,{"excerpt":157},{"type":8,"value":158},[159],[11,160,13],{},true,"/blog/using-codex-for-education-at-dagster-labs",{"title":6,"description":13},"blog/using-codex-for-education-at-dagster-labs",[152,166],"education","AvkWGRzczuDX3zwKZKKbxqgssIsYP24dq1e5mCje-dU",{"id":169,"title":170,"body":171,"categories":231,"date":233,"description":175,"extension":154,"img":155,"meta":234,"navigation":161,"path":239,"seo":240,"stem":241,"tags":242,"__hash__":244},"content/blog/ai-the-context-engineer.md","An evolution of data engineering",{"type":8,"value":172,"toc":226},[173,176,180,183,186,190,193,206,209,213,220,223],[11,174,175],{},"With the advancements of LLM-based tooling, the responsibilities (and maybe even the title!) of data engineers are changing.",[23,177,179],{"id":178},"origin","Origin",[11,181,182],{},"Before we talk about the changes, let's reflect on the inception of data engineering.",[11,184,185],{},"The practice of data engineering, and the need for dedicated roles, was born out of complexity and the need for someone to manage it.\nWith an explosion in data volumes and an increase in tools to manage it, a domain-specific engineer was born with a specialized set of skills.\nSome of these engineers came from the world of database administration, others from software engineering, and some from analytics.\nAs the domain that they worked in evolved, so did their responsibilities and skill sets.",[23,187,189],{"id":188},"questions","Questions",[11,191,192],{},"While the tools and challenges that these engineers solved changed, the underlying need for their work remained the same: to support the answering of questions.",[194,195,196,200,203],"ul",{},[197,198,199],"li",{},"\"Why do I have no customers?\"",[197,201,202],{},"\"What is the significance of these protein structures?\"",[197,204,205],{},"\"What is the airspeed velocity of an unladen swallow?\"",[11,207,208],{},"The wrangling of data, storage, processing, and everything in between was done out of necessity so that you, or some stakeholder, could make sense of it.",[23,210,212],{"id":211},"context","Context",[11,214,215,216,219],{},"We're reaching another inflection point where the underlying tools are evolving.\nThis time, we're seeing an emergence of systems that can make sense of large volumes of data. However the new \"complexity\" is that these systems rely on carefully managed metadata, or ",[217,218,211],"em",{},".\nThis context can store how data is loaded, transformed, and queried.\nYou no longer have to write the tool-specific code to interface with various APIs, nor the queries to make sense of it.\nYou just have to ensure that the information is present and curated.",[11,221,222],{},"The new responsibility of this kind of engineer is to manage that context.",[11,224,225],{},"Some folks are speculating that we will see the rise of the \"context engineer\", but while it's uncertain what the title will be, it's clear that we are seeing a change in how data engineers operate, and an evolution in the responsibilities that they hold to support the answering of questions.",{"title":58,"searchDepth":144,"depth":144,"links":227},[228,229,230],{"id":178,"depth":144,"text":179},{"id":188,"depth":144,"text":189},{"id":211,"depth":144,"text":212},[232],"programming","2025-07-18T00:00:00.000Z",{"draft":161,"excerpt":235},{"type":8,"value":236},[237],[11,238,175],{},"/blog/ai-the-context-engineer",{"title":170,"description":175},"blog/ai-the-context-engineer",[152,243],"data","8TP28ZCFOl5xtGccikeTsnomCFcS7E0iYiFndkl9K28",{"id":246,"title":247,"body":248,"categories":1018,"date":1020,"description":1021,"extension":154,"img":155,"meta":1022,"navigation":161,"path":1041,"seo":1042,"stem":1043,"tags":1044,"__hash__":1048},"content/blog/nuxt-p5js-3d-models.md","Render three-dimensional models in `NuxtContent` with p5.js",{"type":8,"value":249,"toc":1016},[250,267,279,292,391,398,409,415,432,438,1009,1012],[11,251,252,253,256,257,260,261,266],{},"Three-dimensional models, whether they be of the format ",[56,254,255],{},".obj"," or ",[56,258,259],{},".stl",", can be easily rendered in your Nuxt project by using the ",[17,262,265],{"href":263,"rel":264},"https://p5js.org/",[21],"p5js.org"," library.",[268,269,270],"blockquote",{},[11,271,272,273,278],{},"Update 2025: the interactive demos on this site now load the standalone ",[17,274,277],{"href":275,"rel":276},"https://cmpadden.github.io/p5/",[21],"p5 playground"," within an iframe. The component API described below still works when embedding the GitHub Pages build of that project.",[11,280,281,282,285,286,291],{},"I've been using p5 for a while now to tinker and explore generative art, some of which can be found in the ",[17,283,284],{"href":284},"/playground"," section of this website. To use it with Nuxt, a ",[17,287,290],{"href":288,"rel":289},"https://github.com/cmpadden/cmpadden.github.io/blob/70ba674acdbe80c4a41b510a9b54edcddb19f489/plugins/p5.client.js",[21],"client-side plugin"," was created like so:",[49,293,297],{"className":294,"code":295,"language":296,"meta":58,"style":58},"language-js shiki shiki-themes github-dark","// plugins/p5.client.js\nimport p5 from 'p5'\n\nexport default defineNuxtPlugin(() => {\n  return {\n    provide: {\n      p5, p5\n    }\n  }\n})\n","js",[56,298,299,308,325,331,353,361,367,373,379,385],{"__ignoreMap":58},[300,301,304],"span",{"class":302,"line":303},"line",1,[300,305,307],{"class":306},"sAwPA","// plugins/p5.client.js\n",[300,309,310,314,318,321],{"class":302,"line":144},[300,311,313],{"class":312},"snl16","import",[300,315,317],{"class":316},"s95oV"," p5 ",[300,319,320],{"class":312},"from",[300,322,324],{"class":323},"sU2Wk"," 'p5'\n",[300,326,328],{"class":302,"line":327},3,[300,329,330],{"emptyLinePlaceholder":161},"\n",[300,332,334,337,340,344,347,350],{"class":302,"line":333},4,[300,335,336],{"class":312},"export",[300,338,339],{"class":312}," default",[300,341,343],{"class":342},"svObZ"," defineNuxtPlugin",[300,345,346],{"class":316},"(() ",[300,348,349],{"class":312},"=>",[300,351,352],{"class":316}," {\n",[300,354,356,359],{"class":302,"line":355},5,[300,357,358],{"class":312},"  return",[300,360,352],{"class":316},[300,362,364],{"class":302,"line":363},6,[300,365,366],{"class":316},"    provide: {\n",[300,368,370],{"class":302,"line":369},7,[300,371,372],{"class":316},"      p5, p5\n",[300,374,376],{"class":302,"line":375},8,[300,377,378],{"class":316},"    }\n",[300,380,382],{"class":302,"line":381},9,[300,383,384],{"class":316},"  }\n",[300,386,388],{"class":302,"line":387},10,[300,389,390],{"class":316},"})\n",[11,392,393,394,397],{},"As I've been exploring 3d-printing lately, I wanted a way to showcase some of the models I've created directly on this website. So, the ",[56,395,396],{},"ModelPreview"," component was created, and the snippet below shows how it's embedded in markdown.",[11,399,400,401,404,405,408],{},"The Vue component was embedded in our markdown using the following syntax is used. The ",[56,402,403],{},"path"," prop with the location of the file we want to render; in this case, that file is served on the website as well in the ",[56,406,407],{},"public/models"," folder.",[49,410,413],{"className":411,"code":412,"language":54},[52],":ModelPreview{path=\"/models/eevee.stl\"}\n",[56,414,412],{"__ignoreMap":58},[11,416,417,418,421,422,425,426,431],{},"The component was registered globally by using the ",[56,419,420],{},"ModelPreview.global.vue"," filename so that it was accessible in our markdown. Alternatively, this could have been accomplished by placing the component in the ",[56,423,424],{},"components/content"," folder. However, I wanted to use this component in both markdown and Vue files. See the ",[17,427,430],{"href":428,"rel":429},"https://content.nuxt.com/usage/markdown#vue-components",[21],"NuxtContent"," documentation for more details.",[11,433,434,435,437],{},"The full source code for the ",[56,436,396],{}," component at the time of this writing can be found below. Not too bad!",[49,439,441],{"className":294,"code":440,"language":296,"meta":58,"style":58},"\u003Ctemplate>\n    \u003Cdiv id=\"canvas\" class=\"h-64\" />\n\u003C/template>\n\n\u003Cscript setup lang=\"ts\">\nconst { $p5 } = useNuxtApp();\n\nconst { path, backgroundColor = 100 } = defineProps \u003C { path: string, backgroundColor?: Number } > ()\n\nonMounted(() => {\nconsole.log(backgroundColor);\n    const sketch = (s) => {\n        const c = document.getElementById(\"canvas\");\n\n        const WIDTH = c.clientWidth;\n        const HEIGHT = c.clientHeight;\n\n        let model;\n        let angle;\n        let rotate = true;\n\n        s.preload = () => {\n            model = s.loadModel(path, true);\n        };\n\n        s.setup = () => {\n            s.createCanvas(WIDTH, HEIGHT, s.WEBGL);\n        };\n\n        s.mouseClicked = () => {\n            rotate = false; // disable object rotation on click\n        };\n\n        s.draw = () => {\n            s.background(backgroundColor);\n            s.lights();\n\n            if (rotate) {\n                angle = s.frameCount * 0.005;\n            }\n            s.rotateX(angle);\n            s.rotateY(angle);\n            s.orbitControl();\n\n            s.model(model);\n        };\n    };\n\n    new $p5(sketch, \"canvas\");\n});\n\u003C/script>\n",[56,442,443,455,483,492,496,516,521,525,545,549,554,566,592,617,622,635,648,653,662,670,686,691,709,731,737,742,758,786,791,796,812,829,834,839,855,865,876,881,890,909,915,926,936,946,951,962,967,973,978,994,1000],{"__ignoreMap":58},[300,444,445,448,452],{"class":302,"line":303},[300,446,447],{"class":316},"\u003C",[300,449,451],{"class":450},"s4JwU","template",[300,453,454],{"class":316},">\n",[300,456,457,460,463,466,469,472,475,477,480],{"class":302,"line":144},[300,458,459],{"class":316},"    \u003C",[300,461,462],{"class":450},"div",[300,464,465],{"class":342}," id",[300,467,468],{"class":312},"=",[300,470,471],{"class":323},"\"canvas\"",[300,473,474],{"class":342}," class",[300,476,468],{"class":312},[300,478,479],{"class":323},"\"h-64\"",[300,481,482],{"class":316}," />\n",[300,484,485,488,490],{"class":302,"line":327},[300,486,487],{"class":316},"\u003C/",[300,489,451],{"class":450},[300,491,454],{"class":316},[300,493,494],{"class":302,"line":333},[300,495,330],{"emptyLinePlaceholder":161},[300,497,498,500,503,506,509,511,514],{"class":302,"line":355},[300,499,447],{"class":316},[300,501,502],{"class":450},"script",[300,504,505],{"class":342}," setup",[300,507,508],{"class":342}," lang",[300,510,468],{"class":312},[300,512,513],{"class":323},"\"ts\"",[300,515,454],{"class":316},[300,517,518],{"class":302,"line":363},[300,519,520],{"class":316},"const { $p5 } = useNuxtApp();\n",[300,522,523],{"class":302,"line":369},[300,524,330],{"emptyLinePlaceholder":161},[300,526,527,530,532,536,539,542],{"class":302,"line":375},[300,528,529],{"class":316},"const { path, backgroundColor ",[300,531,468],{"class":312},[300,533,535],{"class":534},"sDLfK"," 100",[300,537,538],{"class":316}," } = defineProps \u003C { path: string, backgroundColor",[300,540,541],{"class":312},"?:",[300,543,544],{"class":316}," Number } > ()\n",[300,546,547],{"class":302,"line":381},[300,548,330],{"emptyLinePlaceholder":161},[300,550,551],{"class":302,"line":387},[300,552,553],{"class":316},"onMounted(() => {\n",[300,555,557,560,563],{"class":302,"line":556},11,[300,558,559],{"class":316},"console.",[300,561,562],{"class":342},"log",[300,564,565],{"class":316},"(backgroundColor);\n",[300,567,569,572,575,578,581,585,588,590],{"class":302,"line":568},12,[300,570,571],{"class":316},"    const ",[300,573,574],{"class":342},"sketch",[300,576,577],{"class":312}," =",[300,579,580],{"class":316}," (",[300,582,584],{"class":583},"s9osk","s",[300,586,587],{"class":316},") ",[300,589,349],{"class":312},[300,591,352],{"class":316},[300,593,595,598,601,603,606,609,612,614],{"class":302,"line":594},13,[300,596,597],{"class":312},"        const",[300,599,600],{"class":534}," c",[300,602,577],{"class":312},[300,604,605],{"class":316}," document.",[300,607,608],{"class":342},"getElementById",[300,610,611],{"class":316},"(",[300,613,471],{"class":323},[300,615,616],{"class":316},");\n",[300,618,620],{"class":302,"line":619},14,[300,621,330],{"emptyLinePlaceholder":161},[300,623,625,627,630,632],{"class":302,"line":624},15,[300,626,597],{"class":312},[300,628,629],{"class":534}," WIDTH",[300,631,577],{"class":312},[300,633,634],{"class":316}," c.clientWidth;\n",[300,636,638,640,643,645],{"class":302,"line":637},16,[300,639,597],{"class":312},[300,641,642],{"class":534}," HEIGHT",[300,644,577],{"class":312},[300,646,647],{"class":316}," c.clientHeight;\n",[300,649,651],{"class":302,"line":650},17,[300,652,330],{"emptyLinePlaceholder":161},[300,654,656,659],{"class":302,"line":655},18,[300,657,658],{"class":312},"        let",[300,660,661],{"class":316}," model;\n",[300,663,665,667],{"class":302,"line":664},19,[300,666,658],{"class":312},[300,668,669],{"class":316}," angle;\n",[300,671,673,675,678,680,683],{"class":302,"line":672},20,[300,674,658],{"class":312},[300,676,677],{"class":316}," rotate ",[300,679,468],{"class":312},[300,681,682],{"class":534}," true",[300,684,685],{"class":316},";\n",[300,687,689],{"class":302,"line":688},21,[300,690,330],{"emptyLinePlaceholder":161},[300,692,694,697,700,702,705,707],{"class":302,"line":693},22,[300,695,696],{"class":316},"        s.",[300,698,699],{"class":342},"preload",[300,701,577],{"class":312},[300,703,704],{"class":316}," () ",[300,706,349],{"class":312},[300,708,352],{"class":316},[300,710,712,715,717,720,723,726,729],{"class":302,"line":711},23,[300,713,714],{"class":316},"            model ",[300,716,468],{"class":312},[300,718,719],{"class":316}," s.",[300,721,722],{"class":342},"loadModel",[300,724,725],{"class":316},"(path, ",[300,727,728],{"class":534},"true",[300,730,616],{"class":316},[300,732,734],{"class":302,"line":733},24,[300,735,736],{"class":316},"        };\n",[300,738,740],{"class":302,"line":739},25,[300,741,330],{"emptyLinePlaceholder":161},[300,743,745,747,750,752,754,756],{"class":302,"line":744},26,[300,746,696],{"class":316},[300,748,749],{"class":342},"setup",[300,751,577],{"class":312},[300,753,704],{"class":316},[300,755,349],{"class":312},[300,757,352],{"class":316},[300,759,761,764,767,769,772,775,778,781,784],{"class":302,"line":760},27,[300,762,763],{"class":316},"            s.",[300,765,766],{"class":342},"createCanvas",[300,768,611],{"class":316},[300,770,771],{"class":534},"WIDTH",[300,773,774],{"class":316},", ",[300,776,777],{"class":534},"HEIGHT",[300,779,780],{"class":316},", s.",[300,782,783],{"class":534},"WEBGL",[300,785,616],{"class":316},[300,787,789],{"class":302,"line":788},28,[300,790,736],{"class":316},[300,792,794],{"class":302,"line":793},29,[300,795,330],{"emptyLinePlaceholder":161},[300,797,799,801,804,806,808,810],{"class":302,"line":798},30,[300,800,696],{"class":316},[300,802,803],{"class":342},"mouseClicked",[300,805,577],{"class":312},[300,807,704],{"class":316},[300,809,349],{"class":312},[300,811,352],{"class":316},[300,813,815,818,820,823,826],{"class":302,"line":814},31,[300,816,817],{"class":316},"            rotate ",[300,819,468],{"class":312},[300,821,822],{"class":534}," false",[300,824,825],{"class":316},"; ",[300,827,828],{"class":306},"// disable object rotation on click\n",[300,830,832],{"class":302,"line":831},32,[300,833,736],{"class":316},[300,835,837],{"class":302,"line":836},33,[300,838,330],{"emptyLinePlaceholder":161},[300,840,842,844,847,849,851,853],{"class":302,"line":841},34,[300,843,696],{"class":316},[300,845,846],{"class":342},"draw",[300,848,577],{"class":312},[300,850,704],{"class":316},[300,852,349],{"class":312},[300,854,352],{"class":316},[300,856,858,860,863],{"class":302,"line":857},35,[300,859,763],{"class":316},[300,861,862],{"class":342},"background",[300,864,565],{"class":316},[300,866,868,870,873],{"class":302,"line":867},36,[300,869,763],{"class":316},[300,871,872],{"class":342},"lights",[300,874,875],{"class":316},"();\n",[300,877,879],{"class":302,"line":878},37,[300,880,330],{"emptyLinePlaceholder":161},[300,882,884,887],{"class":302,"line":883},38,[300,885,886],{"class":312},"            if",[300,888,889],{"class":316}," (rotate) {\n",[300,891,893,896,898,901,904,907],{"class":302,"line":892},39,[300,894,895],{"class":316},"                angle ",[300,897,468],{"class":312},[300,899,900],{"class":316}," s.frameCount ",[300,902,903],{"class":312},"*",[300,905,906],{"class":534}," 0.005",[300,908,685],{"class":316},[300,910,912],{"class":302,"line":911},40,[300,913,914],{"class":316},"            }\n",[300,916,918,920,923],{"class":302,"line":917},41,[300,919,763],{"class":316},[300,921,922],{"class":342},"rotateX",[300,924,925],{"class":316},"(angle);\n",[300,927,929,931,934],{"class":302,"line":928},42,[300,930,763],{"class":316},[300,932,933],{"class":342},"rotateY",[300,935,925],{"class":316},[300,937,939,941,944],{"class":302,"line":938},43,[300,940,763],{"class":316},[300,942,943],{"class":342},"orbitControl",[300,945,875],{"class":316},[300,947,949],{"class":302,"line":948},44,[300,950,330],{"emptyLinePlaceholder":161},[300,952,954,956,959],{"class":302,"line":953},45,[300,955,763],{"class":316},[300,957,958],{"class":342},"model",[300,960,961],{"class":316},"(model);\n",[300,963,965],{"class":302,"line":964},46,[300,966,736],{"class":316},[300,968,970],{"class":302,"line":969},47,[300,971,972],{"class":316},"    };\n",[300,974,976],{"class":302,"line":975},48,[300,977,330],{"emptyLinePlaceholder":161},[300,979,981,984,987,990,992],{"class":302,"line":980},49,[300,982,983],{"class":312},"    new",[300,985,986],{"class":342}," $p5",[300,988,989],{"class":316},"(sketch, ",[300,991,471],{"class":323},[300,993,616],{"class":316},[300,995,997],{"class":302,"line":996},50,[300,998,999],{"class":316},"});\n",[300,1001,1003,1005,1007],{"class":302,"line":1002},51,[300,1004,487],{"class":316},[300,1006,502],{"class":450},[300,1008,454],{"class":316},[11,1010,1011],{},"Looking forward to sharing more models soon!",[1013,1014,1015],"style",{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s4JwU, html code.shiki .s4JwU{--shiki-default:#85E89D}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}",{"title":58,"searchDepth":144,"depth":144,"links":1017},[],[1019],"examples","2024-12-31T00:00:00.000Z","Three-dimensional models, whether they be of the format .obj or .stl, can be easily rendered in your Nuxt project by using the p5js.org library.",{"excerpt":1023},{"type":8,"value":1024},[1025,1034],[11,1026,252,1027,256,1029,260,1031,266],{},[56,1028,255],{},[56,1030,259],{},[17,1032,265],{"href":263,"rel":1033},[21],[268,1035,1036],{},[11,1037,272,1038,278],{},[17,1039,277],{"href":275,"rel":1040},[21],"/blog/nuxt-p5js-3d-models",{"title":247,"description":1021},"blog/nuxt-p5js-3d-models",[1045,1046,1047],"nuxt","p5js","3d","pBHaMSnWo-XXhMF6keiqMEvsD4FFFEAW6RtJfHfHkDg",{"id":1050,"title":1051,"body":1052,"categories":1329,"date":1332,"description":1333,"extension":154,"img":155,"meta":1334,"navigation":161,"path":1345,"seo":1346,"stem":1347,"tags":1348,"__hash__":1351},"content/blog/ssh-ed25519-sk-yubikey.md","Configuring a YubiKey for use with OpenSSH",{"type":8,"value":1053,"toc":1327},[1054,1066,1075,1080,1089,1113,1116,1142,1149,1169,1172,1250,1257,1314,1324],[11,1055,1056,1061,1062,1065],{},[17,1057,1060],{"href":1058,"rel":1059},"https://www.yubico.com/",[21],"YubiKey's"," are a convenient way to introduce a physical form of two factor authentication into ones workflow. They support a variety of protocols, but in this guide we will walk through how to configure a YubiKey for use with OpenSSH via the \"new\" ",[56,1063,1064],{},"ed25519-sk"," key type that supports FIDO compliant hardware keys.",[11,1067,1068,1069,1074],{},"In ",[17,1070,1073],{"href":1071,"rel":1072},"https://www.openssh.com/txt/release-8.2",[21],"release 8.2 of OpenSSH"," support for FIDO devices was added with public key types \"ecdsa-sk\" and \"ed25519-sk\" (-sk standing for \"security key\"). This key type is supported by YubiKey's with firmware version 5.2.3 or higher.",[268,1076,1077],{},[11,1078,1079],{},"This release adds support for FIDO/U2F hardware authenticators to OpenSSH. U2F/FIDO are open standards for inexpensive two-factor authentication hardware that are widely used for website authentication.  In OpenSSH FIDO devices are supported by new public key types \"ecdsa-sk\" and \"ed25519-sk\", along with corresponding certificate types.",[11,1081,1082,1083,1088],{},"Let's get started by installing the latest version of OpenSSH via ",[17,1084,1087],{"href":1085,"rel":1086},"https://brew.sh/",[21],"Homebrew",", along with the YubiKey Manager (ykman) CLI. The version of OpenSSH included with macOS is not compatible.",[49,1090,1094],{"className":1091,"code":1092,"language":1093,"meta":58,"style":58},"language-sh shiki shiki-themes github-dark","$ brew install openssh ykman\n","sh",[56,1095,1096],{"__ignoreMap":58},[300,1097,1098,1101,1104,1107,1110],{"class":302,"line":303},[300,1099,1100],{"class":342},"$",[300,1102,1103],{"class":323}," brew",[300,1105,1106],{"class":323}," install",[300,1108,1109],{"class":323}," openssh",[300,1111,1112],{"class":323}," ykman\n",[11,1114,1115],{},"Then, let's confirm that our YubiKey has a firmware that is greater than 5.2.3:",[49,1117,1119],{"className":1091,"code":1118,"language":1093,"meta":58,"style":58},"$ ykman list\nYubiKey 5Ci (5.4.3) [OTP+FIDO+CCID]\n",[56,1120,1121,1131],{"__ignoreMap":58},[300,1122,1123,1125,1128],{"class":302,"line":303},[300,1124,1100],{"class":342},[300,1126,1127],{"class":323}," ykman",[300,1129,1130],{"class":323}," list\n",[300,1132,1133,1136,1139],{"class":302,"line":144},[300,1134,1135],{"class":342},"YubiKey",[300,1137,1138],{"class":323}," 5Ci",[300,1140,1141],{"class":316}," (5.4.3) [OTP+FIDO+CCID]\n",[11,1143,1144,1145,1148],{},"Next, we'll go ahead and enable a pin on our device via the ",[56,1146,1147],{},"change-pin"," command, as this a requirement for our use.",[49,1150,1152],{"className":1091,"code":1151,"language":1093,"meta":58,"style":58},"$ ykman fido access change-pin\n",[56,1153,1154],{"__ignoreMap":58},[300,1155,1156,1158,1160,1163,1166],{"class":302,"line":303},[300,1157,1100],{"class":342},[300,1159,1127],{"class":323},[300,1161,1162],{"class":323}," fido",[300,1164,1165],{"class":323}," access",[300,1167,1168],{"class":323}," change-pin\n",[11,1170,1171],{},"And last, we'll generate the key on our device!",[49,1173,1175],{"className":1091,"code":1174,"language":1093,"meta":58,"style":58},"$ ssh-keygen -t ed25519-sk -O resident\nGenerating public/private ed25519-sk key pair.\nYou may need to touch your authenticator to authorize key generation.\n...\n",[56,1176,1177,1196,1212,1245],{"__ignoreMap":58},[300,1178,1179,1181,1184,1187,1190,1193],{"class":302,"line":303},[300,1180,1100],{"class":342},[300,1182,1183],{"class":323}," ssh-keygen",[300,1185,1186],{"class":534}," -t",[300,1188,1189],{"class":323}," ed25519-sk",[300,1191,1192],{"class":534}," -O",[300,1194,1195],{"class":323}," resident\n",[300,1197,1198,1201,1204,1206,1209],{"class":302,"line":144},[300,1199,1200],{"class":342},"Generating",[300,1202,1203],{"class":323}," public/private",[300,1205,1189],{"class":323},[300,1207,1208],{"class":323}," key",[300,1210,1211],{"class":323}," pair.\n",[300,1213,1214,1217,1220,1223,1226,1229,1232,1235,1237,1240,1242],{"class":302,"line":327},[300,1215,1216],{"class":342},"You",[300,1218,1219],{"class":323}," may",[300,1221,1222],{"class":323}," need",[300,1224,1225],{"class":323}," to",[300,1227,1228],{"class":323}," touch",[300,1230,1231],{"class":323}," your",[300,1233,1234],{"class":323}," authenticator",[300,1236,1225],{"class":323},[300,1238,1239],{"class":323}," authorize",[300,1241,1208],{"class":323},[300,1243,1244],{"class":323}," generation.\n",[300,1246,1247],{"class":302,"line":333},[300,1248,1249],{"class":534},"...\n",[11,1251,1252,1253,1256],{},"We specify ",[217,1254,1255],{},"resident"," to indicate that the key handle is to be stored on the YubiKey itself, since we will be using this device with multiple computers.",[49,1258,1262],{"className":1259,"code":1260,"language":1261,"meta":58,"style":58},"language-txt shiki shiki-themes github-dark","resident\n        Indicate that the key handle should be stored on the FIDO\n        authenticator itself.  This makes it easier to use the\n        authenticator on multiple computers.  Resident keys may be\n        supported on FIDO2 authenticators and typically require that a PIN\n        be set on the authenticator prior to generation.  Resident keys\n        may be loaded off the authenticator using ssh-add(1).  Storing\n        both parts of a key on a FIDO authenticator increases the\n        likelihood of an attacker being able to use a stolen authenticator\n        device.\n","txt",[56,1263,1264,1269,1274,1279,1284,1289,1294,1299,1304,1309],{"__ignoreMap":58},[300,1265,1266],{"class":302,"line":303},[300,1267,1268],{},"resident\n",[300,1270,1271],{"class":302,"line":144},[300,1272,1273],{},"        Indicate that the key handle should be stored on the FIDO\n",[300,1275,1276],{"class":302,"line":327},[300,1277,1278],{},"        authenticator itself.  This makes it easier to use the\n",[300,1280,1281],{"class":302,"line":333},[300,1282,1283],{},"        authenticator on multiple computers.  Resident keys may be\n",[300,1285,1286],{"class":302,"line":355},[300,1287,1288],{},"        supported on FIDO2 authenticators and typically require that a PIN\n",[300,1290,1291],{"class":302,"line":363},[300,1292,1293],{},"        be set on the authenticator prior to generation.  Resident keys\n",[300,1295,1296],{"class":302,"line":369},[300,1297,1298],{},"        may be loaded off the authenticator using ssh-add(1).  Storing\n",[300,1300,1301],{"class":302,"line":375},[300,1302,1303],{},"        both parts of a key on a FIDO authenticator increases the\n",[300,1305,1306],{"class":302,"line":381},[300,1307,1308],{},"        likelihood of an attacker being able to use a stolen authenticator\n",[300,1310,1311],{"class":302,"line":387},[300,1312,1313],{},"        device.\n",[11,1315,1316,1317,256,1320,1323],{},"And that's all it takes -- simple enough. Now, when interacting with ",[217,1318,1319],{},"ssh",[217,1321,1322],{},"git"," you will be prompted to touch the YubiKey to bring that little bit of physical 2FA.",[1013,1325,1326],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}",{"title":58,"searchDepth":144,"depth":144,"links":1328},[],[1330,1331],"tooling","tips","2024-06-09T00:00:00.000Z","YubiKey's are a convenient way to introduce a physical form of two factor authentication into ones workflow. They support a variety of protocols, but in this guide we will walk through how to configure a YubiKey for use with OpenSSH via the \"new\" ed25519-sk key type that supports FIDO compliant hardware keys.",{"draft":1335,"excerpt":1336},false,{"type":8,"value":1337},[1338],[11,1339,1340,1061,1343,1065],{},[17,1341,1060],{"href":1058,"rel":1342},[21],[56,1344,1064],{},"/blog/ssh-ed25519-sk-yubikey",{"title":1051,"description":1333},"blog/ssh-ed25519-sk-yubikey",[1349,1350],"unix","configurations","28PuP1s_iVbmsMuuuIZXQQIhFmd7f7wC3EWeHWdwABI",{"id":1353,"title":1354,"body":1355,"categories":1508,"date":1509,"description":1510,"extension":154,"img":155,"meta":1511,"navigation":161,"path":1523,"seo":1524,"stem":1525,"tags":1526,"__hash__":1529},"content/blog/vim-fugitive-gpg-pinentry.md","Using pinentry-mac to sign commits from vim-fugitive",{"type":8,"value":1356,"toc":1504},[1357,1374,1378,1399,1403,1406,1424,1434,1440,1446,1465,1468,1499,1502],[11,1358,1359,1360,1365,1366,1369,1370,1373],{},"In order to sign git commits from within Vim using a plugin like ",[17,1361,1364],{"href":1362,"rel":1363},"https://github.com/tpope/vim-fugitive",[21],"tpope/vim-fugitive",", it is necessary to configure the ",[56,1367,1368],{},"gpg-agent"," to use a GUI based ",[56,1371,1372],{},"pinentry-program",".",[23,1375,1377],{"id":1376},"preface","Preface",[11,1379,1380,1381,1386,1387,1369,1389,1391,1392,1395,1396,1373],{},"The man, the myth, the legend, Timothy Popallopollis himself ",[17,1382,1385],{"href":1383,"rel":1384},"https://github.com/tpope/vim-fugitive/issues/846#issuecomment-253816577",[21],"recommends"," configuring your ",[56,1388,1368],{},[56,1390,1372],{},". On macOS this can be done quite by simply installing ",[56,1393,1394],{},"pinentry-mac",", and updating your ",[56,1397,1398],{},"gpg-agent.conf",[23,1400,1402],{"id":1401},"configuration","Configuration",[11,1404,1405],{},"First things first, let's install the pinentry program.",[49,1407,1411],{"className":1408,"code":1409,"language":1410,"meta":58,"style":58},"language-bash shiki shiki-themes github-dark","$ brew install pinentry-mac\n","bash",[56,1412,1413],{"__ignoreMap":58},[300,1414,1415,1417,1419,1421],{"class":302,"line":303},[300,1416,1100],{"class":342},[300,1418,1103],{"class":323},[300,1420,1106],{"class":323},[300,1422,1423],{"class":323}," pinentry-mac\n",[11,1425,1426,1427,1429,1430,1433],{},"Then, all we need to do is set the ",[56,1428,1372],{}," option in your ",[56,1431,1432],{},"~/.gnupg/gpg-agent.conf"," file.",[49,1435,1438],{"className":1436,"code":1437,"language":54},[52],"default-cache-ttl 600\nmax-cache-ttl 7200\npinentry-program /opt/homebrew/bin/pinentry-mac\n",[56,1439,1437],{"__ignoreMap":58},[11,1441,1442,1443,1373],{},"If your don't know the path to your pinentry program, you can throw down a quick ",[56,1444,1445],{},"which",[49,1447,1449],{"className":1408,"code":1448,"language":1410,"meta":58,"style":58},"$ which pinentry-mac\n/opt/homebrew/bin/pinentry-mac\n",[56,1450,1451,1460],{"__ignoreMap":58},[300,1452,1453,1455,1458],{"class":302,"line":303},[300,1454,1100],{"class":342},[300,1456,1457],{"class":323}," which",[300,1459,1423],{"class":323},[300,1461,1462],{"class":302,"line":144},[300,1463,1464],{"class":342},"/opt/homebrew/bin/pinentry-mac\n",[11,1466,1467],{},"Or use your Homebrew prefix.",[49,1469,1471],{"className":1408,"code":1470,"language":1410,"meta":58,"style":58},"$ echo $(brew --prefix)/bin/pinentry-mac\n/opt/homebrew/bin/pinentry-mac\n",[56,1472,1473,1495],{"__ignoreMap":58},[300,1474,1475,1477,1480,1483,1486,1489,1492],{"class":302,"line":303},[300,1476,1100],{"class":342},[300,1478,1479],{"class":323}," echo",[300,1481,1482],{"class":316}," $(",[300,1484,1485],{"class":342},"brew",[300,1487,1488],{"class":534}," --prefix",[300,1490,1491],{"class":316},")",[300,1493,1494],{"class":323},"/bin/pinentry-mac\n",[300,1496,1497],{"class":302,"line":144},[300,1498,1464],{"class":342},[11,1500,1501],{},"But that's all it takes. Now, you should be prompted to enter your gpg pin in an external window when signing commits from vim.",[1013,1503,1326],{},{"title":58,"searchDepth":144,"depth":144,"links":1505},[1506,1507],{"id":1376,"depth":144,"text":1377},{"id":1401,"depth":144,"text":1402},[1330,1331],"2024-05-11T00:00:00.000Z","In order to sign git commits from within Vim using a plugin like tpope/vim-fugitive, it is necessary to configure the gpg-agent to use a GUI based pinentry-program.",{"draft":1335,"excerpt":1512},{"type":8,"value":1513},[1514],[11,1515,1359,1516,1365,1519,1369,1521,1373],{},[17,1517,1364],{"href":1362,"rel":1518},[21],[56,1520,1368],{},[56,1522,1372],{},"/blog/vim-fugitive-gpg-pinentry",{"title":1354,"description":1510},"blog/vim-fugitive-gpg-pinentry",[1527,1528],"vim","tip","GcB2DeBVtLlgiH_Ao9s67LMX_Ae3bu7ViogOPgisEQA",{"id":1531,"title":1532,"body":1533,"categories":1933,"date":1934,"description":1935,"extension":154,"img":155,"meta":1936,"navigation":161,"path":1950,"seo":1951,"stem":1952,"tags":1953,"__hash__":1955},"content/blog/podcast-transcription-whispercpp.md","Easily Transcribe Podcasts with Whisper.cpp",{"type":8,"value":1534,"toc":1928},[1535,1556,1560,1580,1628,1634,1726,1733,1739,1815,1818,1916,1919,1925],[11,1536,1537,1538,1543,1544,1549,1550,1555],{},"If you've ever had the need to transcribe a podcast, lecture, or some other audio recording, it turns out it's surprisingly easy with the extremely impressive ",[17,1539,1542],{"href":1540,"rel":1541},"https://github.com/ggerganov/whisper.cpp",[21],"whisper.cpp"," project. This high-performance fork of ",[17,1545,1548],{"href":1546,"rel":1547},"https://github.com/openai/whisper",[21],"OpenAI's Whisper"," can run on all sorts of hardware -- including my M1 Mac Mini. Let's walk through an example from start-to-finish of transcribing an episode of the ",[17,1551,1554],{"href":1552,"rel":1553},"https://podcasts.apple.com/us/podcast/alter-everything/id1356137854",[21],"Alter Everything"," podcast.",[23,1557,1559],{"id":1558},"obtain-audio-files","Obtain Audio File(s)",[11,1561,1562,1563,1566,1567,1570,1571,1573,1574,1576,1577,1373],{},"First, let's get the ",[56,1564,1565],{},"wav"," file from YouTube using the ",[56,1568,1569],{},"youtube-dl"," utility. It should be noted that ",[56,1572,1542],{}," expects ",[56,1575,1565],{}," filetypes, and this utility defaults to ",[56,1578,1579],{},"mp3",[49,1581,1583],{"className":1091,"code":1582,"language":1093,"meta":58,"style":58}," $ youtube-dl \\\n    --extract-audio \\\n    --audio-format wav \\\n    --output podcast.wav \\\n    \"https://www.youtube.com/watch?v=CoUN690wSYQ\"\n",[56,1584,1585,1596,1603,1613,1623],{"__ignoreMap":58},[300,1586,1587,1590,1593],{"class":302,"line":303},[300,1588,1589],{"class":342}," $",[300,1591,1592],{"class":323}," youtube-dl",[300,1594,1595],{"class":534}," \\\n",[300,1597,1598,1601],{"class":302,"line":144},[300,1599,1600],{"class":534},"    --extract-audio",[300,1602,1595],{"class":534},[300,1604,1605,1608,1611],{"class":302,"line":327},[300,1606,1607],{"class":534},"    --audio-format",[300,1609,1610],{"class":323}," wav",[300,1612,1595],{"class":534},[300,1614,1615,1618,1621],{"class":302,"line":333},[300,1616,1617],{"class":534},"    --output",[300,1619,1620],{"class":323}," podcast.wav",[300,1622,1595],{"class":534},[300,1624,1625],{"class":302,"line":355},[300,1626,1627],{"class":323},"    \"https://www.youtube.com/watch?v=CoUN690wSYQ\"\n",[11,1629,1630,1631,1633],{},"This file has a 44.1 kHz sample rate, and ",[56,1632,1542],{}," expects 16 kHz, so let's go ahead and convert that.",[49,1635,1637],{"className":1091,"code":1636,"language":1093,"meta":58,"style":58}," $ file podcast.wav\npodcast.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 44100 Hz\n\n $ ffmpeg -i podcast.wav -ar 16000 podcast-16khz.wav\n\n $ file podcast-16khz.wav\npodcast-16khz.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 16000 Hz\n\n# NOTE: it looks like it's possible to specify this conversion as a post-process as a\n# flag to the `youtube-dl` command -- I will explore this further next time...\n# youtube-dl --extract-audio --audio-quality 0 --audio-format mp3 --postprocessor-args \"-ar 44100\" %dl%\n",[56,1638,1639,1649,1660,1664,1685,1689,1697,1707,1711,1716,1721],{"__ignoreMap":58},[300,1640,1641,1643,1646],{"class":302,"line":303},[300,1642,1589],{"class":342},[300,1644,1645],{"class":323}," file",[300,1647,1648],{"class":323}," podcast.wav\n",[300,1650,1651,1654,1657],{"class":302,"line":144},[300,1652,1653],{"class":342},"podcast.wav:",[300,1655,1656],{"class":323}," RIFF",[300,1658,1659],{"class":316}," (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 44100 Hz\n",[300,1661,1662],{"class":302,"line":327},[300,1663,330],{"emptyLinePlaceholder":161},[300,1665,1666,1668,1671,1674,1676,1679,1682],{"class":302,"line":333},[300,1667,1589],{"class":342},[300,1669,1670],{"class":323}," ffmpeg",[300,1672,1673],{"class":534}," -i",[300,1675,1620],{"class":323},[300,1677,1678],{"class":534}," -ar",[300,1680,1681],{"class":534}," 16000",[300,1683,1684],{"class":323}," podcast-16khz.wav\n",[300,1686,1687],{"class":302,"line":355},[300,1688,330],{"emptyLinePlaceholder":161},[300,1690,1691,1693,1695],{"class":302,"line":363},[300,1692,1589],{"class":342},[300,1694,1645],{"class":323},[300,1696,1684],{"class":323},[300,1698,1699,1702,1704],{"class":302,"line":369},[300,1700,1701],{"class":342},"podcast-16khz.wav:",[300,1703,1656],{"class":323},[300,1705,1706],{"class":316}," (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 16000 Hz\n",[300,1708,1709],{"class":302,"line":375},[300,1710,330],{"emptyLinePlaceholder":161},[300,1712,1713],{"class":302,"line":381},[300,1714,1715],{"class":306},"# NOTE: it looks like it's possible to specify this conversion as a post-process as a\n",[300,1717,1718],{"class":302,"line":387},[300,1719,1720],{"class":306},"# flag to the `youtube-dl` command -- I will explore this further next time...\n",[300,1722,1723],{"class":302,"line":556},[300,1724,1725],{"class":306},"# youtube-dl --extract-audio --audio-quality 0 --audio-format mp3 --postprocessor-args \"-ar 44100\" %dl%\n",[23,1727,1729,1730,1732],{"id":1728},"build-whispercpp-transcribe-audio","Build ",[56,1731,1542],{}," & Transcribe Audio",[11,1734,1735,1736,1738],{},"Then, let's get the latest version of ",[56,1737,1542],{},", download the English Whisper model, and build the example.",[49,1740,1742],{"className":1091,"code":1741,"language":1093,"meta":58,"style":58},"# Clone the `whisper.cpp` repository\n $ git clone --depth 1 git@github.com:ggerganov/whisper.cpp && cd whisper.cpp\n\n# Download the English Whisper model in `ggml` format\n $ bash ./models/download-ggml-model.sh base.en\n\n# Build the main example\n $ make\n",[56,1743,1744,1749,1777,1781,1786,1799,1803,1808],{"__ignoreMap":58},[300,1745,1746],{"class":302,"line":303},[300,1747,1748],{"class":306},"# Clone the `whisper.cpp` repository\n",[300,1750,1751,1753,1756,1759,1762,1765,1768,1771,1774],{"class":302,"line":144},[300,1752,1589],{"class":342},[300,1754,1755],{"class":323}," git",[300,1757,1758],{"class":323}," clone",[300,1760,1761],{"class":534}," --depth",[300,1763,1764],{"class":534}," 1",[300,1766,1767],{"class":323}," git@github.com:ggerganov/whisper.cpp",[300,1769,1770],{"class":316}," && ",[300,1772,1773],{"class":534},"cd",[300,1775,1776],{"class":323}," whisper.cpp\n",[300,1778,1779],{"class":302,"line":327},[300,1780,330],{"emptyLinePlaceholder":161},[300,1782,1783],{"class":302,"line":333},[300,1784,1785],{"class":306},"# Download the English Whisper model in `ggml` format\n",[300,1787,1788,1790,1793,1796],{"class":302,"line":355},[300,1789,1589],{"class":342},[300,1791,1792],{"class":323}," bash",[300,1794,1795],{"class":323}," ./models/download-ggml-model.sh",[300,1797,1798],{"class":323}," base.en\n",[300,1800,1801],{"class":302,"line":363},[300,1802,330],{"emptyLinePlaceholder":161},[300,1804,1805],{"class":302,"line":369},[300,1806,1807],{"class":306},"# Build the main example\n",[300,1809,1810,1812],{"class":302,"line":375},[300,1811,1589],{"class":342},[300,1813,1814],{"class":323}," make\n",[11,1816,1817],{},"And finally, let's transcribe that podcast!",[49,1819,1821],{"className":1091,"code":1820,"language":1093,"meta":58,"style":58}," $ ./main \\\n    -m ~/workspace/whisper.cpp/models/ggml-base.en.bin \\\n    -f ~/Downloads/podcast-16khz.wav \\\n    --output-vtt \\\n    --output-file out\n\n# whisper_print_timings:     load time =   114.71 ms\n# whisper_print_timings:     fallbacks =   0 p /   0 h\n# whisper_print_timings:      mel time =   692.20 ms\n# whisper_print_timings:   sample time = 22278.10 ms / 27893 runs (    0.80 ms per run)\n# whisper_print_timings:   encode time = 10000.75 ms /    55 runs (  181.83 ms per run)\n# whisper_print_timings:   decode time =   331.77 ms /    54 runs (    6.14 ms per run)\n# whisper_print_timings:   batchd time = 45236.73 ms / 27566 runs (    1.64 ms per run)\n# whisper_print_timings:   prompt time =  1921.90 ms / 11832 runs (    0.16 ms per run)\n# whisper_print_timings:    total time = 80709.54 ms\n",[56,1822,1823,1832,1842,1852,1859,1867,1871,1876,1881,1886,1891,1896,1901,1906,1911],{"__ignoreMap":58},[300,1824,1825,1827,1830],{"class":302,"line":303},[300,1826,1589],{"class":342},[300,1828,1829],{"class":323}," ./main",[300,1831,1595],{"class":534},[300,1833,1834,1837,1840],{"class":302,"line":144},[300,1835,1836],{"class":534},"    -m",[300,1838,1839],{"class":323}," ~/workspace/whisper.cpp/models/ggml-base.en.bin",[300,1841,1595],{"class":534},[300,1843,1844,1847,1850],{"class":302,"line":327},[300,1845,1846],{"class":534},"    -f",[300,1848,1849],{"class":323}," ~/Downloads/podcast-16khz.wav",[300,1851,1595],{"class":534},[300,1853,1854,1857],{"class":302,"line":333},[300,1855,1856],{"class":534},"    --output-vtt",[300,1858,1595],{"class":534},[300,1860,1861,1864],{"class":302,"line":355},[300,1862,1863],{"class":534},"    --output-file",[300,1865,1866],{"class":323}," out\n",[300,1868,1869],{"class":302,"line":363},[300,1870,330],{"emptyLinePlaceholder":161},[300,1872,1873],{"class":302,"line":369},[300,1874,1875],{"class":306},"# whisper_print_timings:     load time =   114.71 ms\n",[300,1877,1878],{"class":302,"line":375},[300,1879,1880],{"class":306},"# whisper_print_timings:     fallbacks =   0 p /   0 h\n",[300,1882,1883],{"class":302,"line":381},[300,1884,1885],{"class":306},"# whisper_print_timings:      mel time =   692.20 ms\n",[300,1887,1888],{"class":302,"line":387},[300,1889,1890],{"class":306},"# whisper_print_timings:   sample time = 22278.10 ms / 27893 runs (    0.80 ms per run)\n",[300,1892,1893],{"class":302,"line":556},[300,1894,1895],{"class":306},"# whisper_print_timings:   encode time = 10000.75 ms /    55 runs (  181.83 ms per run)\n",[300,1897,1898],{"class":302,"line":568},[300,1899,1900],{"class":306},"# whisper_print_timings:   decode time =   331.77 ms /    54 runs (    6.14 ms per run)\n",[300,1902,1903],{"class":302,"line":594},[300,1904,1905],{"class":306},"# whisper_print_timings:   batchd time = 45236.73 ms / 27566 runs (    1.64 ms per run)\n",[300,1907,1908],{"class":302,"line":619},[300,1909,1910],{"class":306},"# whisper_print_timings:   prompt time =  1921.90 ms / 11832 runs (    0.16 ms per run)\n",[300,1912,1913],{"class":302,"line":624},[300,1914,1915],{"class":306},"# whisper_print_timings:    total time = 80709.54 ms\n",[11,1917,1918],{},"A full podcast transcribed in ~80 seconds on an M1 Mac Mini -- not too bad!",[49,1920,1923],{"className":1921,"code":1922,"language":54},[52],"# out.vtt\n\n00:00:00.000 --> 00:00:06.480\n >> Hi everyone. We recently launched a short engagement feedback survey for the Alter Everything\n\n00:00:06.480 --> 00:00:11.360\n podcast. Click the link in the episode description wherever you're listening to let us know what\n\n00:00:11.360 --> 00:00:16.320\n you think and help us improve our show.\n\n00:00:16.320 --> 00:00:21.200\n Welcome to Alter Everything, a podcast about data science and analytics culture. I'm Megan\n\n00:00:21.200 --> 00:00:26.440\n Dibble and today I'm talking with Nick Schrock, CTO and founder of Dagster Labs. We discussed\n\n00:00:26.440 --> 00:00:31.560\n data engineering trends, challenges in the field, why he started his company, and what\n\n00:00:31.560 --> 00:00:38.960\n makes him excited about the future of data engineering. Let's get started.\n\n00:00:38.960 --> 00:00:42.720\n >> Hi, Nick. It's great to have you on our show today. Thanks for being here.\n\n00:00:42.720 --> 00:00:43.920\n >> Thanks for having me.\n\n00:00:43.920 --> 00:00:48.280\n >> Yeah. Could you start off by giving an introduction to yourself for our listeners?\n\n00:00:48.280 --> 00:00:52.920\n >> Sure. My name is Nick Schrock. I'm the CTO and founder of Dagster Labs. There's the\n\n00:00:52.920 --> 00:00:59.520\n company behind Dagster, which is a data orchestration framework. Prior to doing this, I was an engineer\n\n00:00:59.520 --> 00:01:05.960\n at Facebook from 2009, 2017. While I was there, I found a team called product infrastructure\n\n00:01:05.960 --> 00:01:09.800\n whose goal was to make our application developers more efficient and productive, and a bunch\n\n00:01:09.800 --> 00:01:13.840\n of open source work came out of that actually, one of which was React, which I had nothing\n\n00:01:13.840 --> 00:01:18.040\n to do with, but actually the CEO of Dagster Labs co-created and I personally co-created\n\n00:01:18.040 --> 00:01:22.640\n GraphQL. So as I like to say, Pete and I were present at the creation of the full hipster\n\n00:01:22.640 --> 00:01:28.680\n stack. I moved on to Facebook in 2017, figuring out what to do next, and this data engineering\n\n00:01:28.680 --> 00:01:32.960\n and data orchestration problem really got me hooked actually quite soon after I left,\n\n00:01:32.960 --> 00:01:36.280\n and the rest is history. I'm sure we'll get into that more.\n",[56,1924,1922],{"__ignoreMap":58},[1013,1926,1927],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}",{"title":58,"searchDepth":144,"depth":144,"links":1929},[1930,1931],{"id":1558,"depth":144,"text":1559},{"id":1728,"depth":144,"text":1932},"Build whisper.cpp & Transcribe Audio",[232],"2024-01-08T00:00:00.000Z","If you've ever had the need to transcribe a podcast, lecture, or some other audio recording, it turns out it's surprisingly easy with the extremely impressive whisper.cpp project. This high-performance fork of OpenAI's Whisper can run on all sorts of hardware -- including my M1 Mac Mini. Let's walk through an example from start-to-finish of transcribing an episode of the Alter Everything podcast.",{"draft":1335,"excerpt":1937},{"type":8,"value":1938},[1939],[11,1940,1537,1941,1543,1944,1549,1947,1555],{},[17,1942,1542],{"href":1540,"rel":1943},[21],[17,1945,1548],{"href":1546,"rel":1946},[21],[17,1948,1554],{"href":1552,"rel":1949},[21],"/blog/podcast-transcription-whispercpp",{"title":1532,"description":1935},"blog/podcast-transcription-whispercpp",[1542,1954],"ml","2OAdmvM54wFtK8yw1Z9v8k4954hDLZlfIzZhZ7ZAvo8",{"id":1957,"title":1958,"body":1959,"categories":2921,"date":2922,"description":2923,"extension":154,"img":155,"meta":2924,"navigation":161,"path":2933,"seo":2934,"stem":2935,"tags":2936,"__hash__":2938},"content/blog/nuxt-content-rss-feed.md","How To Add an RSS Feed to a Nuxt Website",{"type":8,"value":1960,"toc":2916},[1961,1970,1972,1987,1991,2000,2021,2031,2048,2559,2578,2620,2624,2631,2634,2650,2656,2865,2873,2913],[11,1962,1963,1964,1969],{},"If you are a user of ",[17,1965,1968],{"href":1966,"rel":1967},"https://content.nuxt.com/",[21],"Nuxt Content"," and you wish to configure an RSS feed for your website, it's a surprisingly straight forward process! In this article, we will walk through the code changes required to host an RSS feed for both a statically generated, and Universal Nuxt application.",[23,1971,1377],{"id":1376},[11,1973,1974,1975,1980,1981,1986],{},"In version 2 of Nuxt, the community module, ",[17,1976,1979],{"href":1977,"rel":1978},"https://github.com/nuxt-community/feed-module",[21],"nuxt-community/feed-module"," was a popular choice for adding an RSS feed to your website. However, there has been an unresolved ",[17,1982,1985],{"href":1983,"rel":1984},"https://github.com/nuxt-community/feed-module/issues/106",[21],"open issue"," since April 1st, 2022 to add support for Nuxt v3. Thankfully, implementing this feature without a module is relatively straight forward.",[23,1988,1990],{"id":1989},"instructions","Instructions",[11,1992,1993,1994,1999],{},"First, install the ",[17,1995,1998],{"href":1996,"rel":1997},"https://www.npmjs.com/package/feed",[21],"feed"," library into your project:",[49,2001,2005],{"className":2002,"code":2003,"language":2004,"meta":58,"style":58},"language-shell shiki shiki-themes github-dark","npm i -D feed\n","shell",[56,2006,2007],{"__ignoreMap":58},[300,2008,2009,2012,2015,2018],{"class":302,"line":303},[300,2010,2011],{"class":342},"npm",[300,2013,2014],{"class":323}," i",[300,2016,2017],{"class":534}," -D",[300,2019,2020],{"class":323}," feed\n",[11,2022,2023,2024,2027,2028,1373],{},"Then, create a ",[56,2025,2026],{},"server/"," folder in your project if it does not already exist, and create a file named ",[56,2029,2030],{},"server/routes/atom.ts",[11,2032,2033,2034,2036,2037,2039,2040,2043,2044,2047],{},"Here, we will leverage the ",[56,2035,1998],{}," library and construct an XML representation of our Nuxt content. As you can see, we first define our ",[56,2038,1998],{}," with metadata associated with our RSS feed. This will be used by RSS readers to provide context to the end user. Then, we query our Nuxt content with ",[56,2041,2042],{},"serverQueryContent"," and append a ",[56,2045,2046],{},"feed.addItem"," for each article.",[49,2049,2053],{"className":2050,"code":2051,"language":2052,"meta":58,"style":58},"language-ts shiki shiki-themes github-dark","import { serverQueryContent } from '#content/server';\nimport { Feed } from 'feed';\n\nconst BASE_URL = \"https://mywebsite.com\"\nconst AUTHOR_NAME = \"Firstname Lastname\"\n\nexport default defineEventHandler(async (event) => {\n\n    const feed = new Feed({\n      title: \"My Title\",\n      description: \"My Description\",\n      id: BASE_URL,\n      link: BASE_URL,\n      language: \"en\",\n      image: `${BASE_URL}/images/placeholder.png`,\n      favicon: `${BASE_URL}/favicon.ico`,\n      copyright: `All rights reserved ${new Date().getFullYear()}, ${AUTHOR_NAME}`,\n      updated: new Date(),\n      generator: \"Nuxt static site generation + Feed for Node.js\",\n      feedLinks: {\n        atom: `${BASE_URL}/atom`\n      },\n      author: {\n        name: AUTHOR_NAME,\n      }\n    });\n\n    const articles = await serverQueryContent(event).find();\n\n    articles.forEach((article) => {\n      feed.addItem({\n        title: article.title ? article.title : \"Missing Title\",\n        id: article._path,\n        link: `${BASE_URL}${article._path}`,\n        description: article.description,\n        author: [\n          {\n            name: AUTHOR_NAME,\n          },\n        ],\n        date: new Date(article.date),\n        image: article.cover_image ? `${BASE_URL}/${article.cover_image}` : undefined\n      });\n    });\n\n    return feed.atom1();\n});\n","ts",[56,2054,2055,2069,2083,2087,2100,2112,2116,2141,2145,2164,2175,2185,2195,2204,2214,2229,2243,2277,2289,2299,2304,2316,2321,2326,2335,2340,2345,2349,2372,2376,2396,2406,2425,2430,2453,2458,2463,2468,2477,2482,2487,2499,2529,2534,2538,2542,2555],{"__ignoreMap":58},[300,2056,2057,2059,2062,2064,2067],{"class":302,"line":303},[300,2058,313],{"class":312},[300,2060,2061],{"class":316}," { serverQueryContent } ",[300,2063,320],{"class":312},[300,2065,2066],{"class":323}," '#content/server'",[300,2068,685],{"class":316},[300,2070,2071,2073,2076,2078,2081],{"class":302,"line":144},[300,2072,313],{"class":312},[300,2074,2075],{"class":316}," { Feed } ",[300,2077,320],{"class":312},[300,2079,2080],{"class":323}," 'feed'",[300,2082,685],{"class":316},[300,2084,2085],{"class":302,"line":327},[300,2086,330],{"emptyLinePlaceholder":161},[300,2088,2089,2092,2095,2097],{"class":302,"line":333},[300,2090,2091],{"class":312},"const",[300,2093,2094],{"class":534}," BASE_URL",[300,2096,577],{"class":312},[300,2098,2099],{"class":323}," \"https://mywebsite.com\"\n",[300,2101,2102,2104,2107,2109],{"class":302,"line":355},[300,2103,2091],{"class":312},[300,2105,2106],{"class":534}," AUTHOR_NAME",[300,2108,577],{"class":312},[300,2110,2111],{"class":323}," \"Firstname Lastname\"\n",[300,2113,2114],{"class":302,"line":363},[300,2115,330],{"emptyLinePlaceholder":161},[300,2117,2118,2120,2122,2125,2127,2130,2132,2135,2137,2139],{"class":302,"line":369},[300,2119,336],{"class":312},[300,2121,339],{"class":312},[300,2123,2124],{"class":342}," defineEventHandler",[300,2126,611],{"class":316},[300,2128,2129],{"class":312},"async",[300,2131,580],{"class":316},[300,2133,2134],{"class":583},"event",[300,2136,587],{"class":316},[300,2138,349],{"class":312},[300,2140,352],{"class":316},[300,2142,2143],{"class":302,"line":375},[300,2144,330],{"emptyLinePlaceholder":161},[300,2146,2147,2150,2153,2155,2158,2161],{"class":302,"line":381},[300,2148,2149],{"class":312},"    const",[300,2151,2152],{"class":534}," feed",[300,2154,577],{"class":312},[300,2156,2157],{"class":312}," new",[300,2159,2160],{"class":342}," Feed",[300,2162,2163],{"class":316},"({\n",[300,2165,2166,2169,2172],{"class":302,"line":387},[300,2167,2168],{"class":316},"      title: ",[300,2170,2171],{"class":323},"\"My Title\"",[300,2173,2174],{"class":316},",\n",[300,2176,2177,2180,2183],{"class":302,"line":556},[300,2178,2179],{"class":316},"      description: ",[300,2181,2182],{"class":323},"\"My Description\"",[300,2184,2174],{"class":316},[300,2186,2187,2190,2193],{"class":302,"line":568},[300,2188,2189],{"class":316},"      id: ",[300,2191,2192],{"class":534},"BASE_URL",[300,2194,2174],{"class":316},[300,2196,2197,2200,2202],{"class":302,"line":594},[300,2198,2199],{"class":316},"      link: ",[300,2201,2192],{"class":534},[300,2203,2174],{"class":316},[300,2205,2206,2209,2212],{"class":302,"line":619},[300,2207,2208],{"class":316},"      language: ",[300,2210,2211],{"class":323},"\"en\"",[300,2213,2174],{"class":316},[300,2215,2216,2219,2222,2224,2227],{"class":302,"line":624},[300,2217,2218],{"class":316},"      image: ",[300,2220,2221],{"class":323},"`${",[300,2223,2192],{"class":534},[300,2225,2226],{"class":323},"}/images/placeholder.png`",[300,2228,2174],{"class":316},[300,2230,2231,2234,2236,2238,2241],{"class":302,"line":637},[300,2232,2233],{"class":316},"      favicon: ",[300,2235,2221],{"class":323},[300,2237,2192],{"class":534},[300,2239,2240],{"class":323},"}/favicon.ico`",[300,2242,2174],{"class":316},[300,2244,2245,2248,2251,2254,2257,2260,2263,2266,2269,2272,2275],{"class":302,"line":650},[300,2246,2247],{"class":316},"      copyright: ",[300,2249,2250],{"class":323},"`All rights reserved ${",[300,2252,2253],{"class":312},"new",[300,2255,2256],{"class":342}," Date",[300,2258,2259],{"class":323},"().",[300,2261,2262],{"class":342},"getFullYear",[300,2264,2265],{"class":323},"()",[300,2267,2268],{"class":323},"}, ${",[300,2270,2271],{"class":534},"AUTHOR_NAME",[300,2273,2274],{"class":323},"}`",[300,2276,2174],{"class":316},[300,2278,2279,2282,2284,2286],{"class":302,"line":655},[300,2280,2281],{"class":316},"      updated: ",[300,2283,2253],{"class":312},[300,2285,2256],{"class":342},[300,2287,2288],{"class":316},"(),\n",[300,2290,2291,2294,2297],{"class":302,"line":664},[300,2292,2293],{"class":316},"      generator: ",[300,2295,2296],{"class":323},"\"Nuxt static site generation + Feed for Node.js\"",[300,2298,2174],{"class":316},[300,2300,2301],{"class":302,"line":672},[300,2302,2303],{"class":316},"      feedLinks: {\n",[300,2305,2306,2309,2311,2313],{"class":302,"line":688},[300,2307,2308],{"class":316},"        atom: ",[300,2310,2221],{"class":323},[300,2312,2192],{"class":534},[300,2314,2315],{"class":323},"}/atom`\n",[300,2317,2318],{"class":302,"line":693},[300,2319,2320],{"class":316},"      },\n",[300,2322,2323],{"class":302,"line":711},[300,2324,2325],{"class":316},"      author: {\n",[300,2327,2328,2331,2333],{"class":302,"line":733},[300,2329,2330],{"class":316},"        name: ",[300,2332,2271],{"class":534},[300,2334,2174],{"class":316},[300,2336,2337],{"class":302,"line":739},[300,2338,2339],{"class":316},"      }\n",[300,2341,2342],{"class":302,"line":744},[300,2343,2344],{"class":316},"    });\n",[300,2346,2347],{"class":302,"line":760},[300,2348,330],{"emptyLinePlaceholder":161},[300,2350,2351,2353,2356,2358,2361,2364,2367,2370],{"class":302,"line":788},[300,2352,2149],{"class":312},[300,2354,2355],{"class":534}," articles",[300,2357,577],{"class":312},[300,2359,2360],{"class":312}," await",[300,2362,2363],{"class":342}," serverQueryContent",[300,2365,2366],{"class":316},"(event).",[300,2368,2369],{"class":342},"find",[300,2371,875],{"class":316},[300,2373,2374],{"class":302,"line":793},[300,2375,330],{"emptyLinePlaceholder":161},[300,2377,2378,2381,2384,2387,2390,2392,2394],{"class":302,"line":798},[300,2379,2380],{"class":316},"    articles.",[300,2382,2383],{"class":342},"forEach",[300,2385,2386],{"class":316},"((",[300,2388,2389],{"class":583},"article",[300,2391,587],{"class":316},[300,2393,349],{"class":312},[300,2395,352],{"class":316},[300,2397,2398,2401,2404],{"class":302,"line":814},[300,2399,2400],{"class":316},"      feed.",[300,2402,2403],{"class":342},"addItem",[300,2405,2163],{"class":316},[300,2407,2408,2411,2414,2417,2420,2423],{"class":302,"line":831},[300,2409,2410],{"class":316},"        title: article.title ",[300,2412,2413],{"class":312},"?",[300,2415,2416],{"class":316}," article.title ",[300,2418,2419],{"class":312},":",[300,2421,2422],{"class":323}," \"Missing Title\"",[300,2424,2174],{"class":316},[300,2426,2427],{"class":302,"line":836},[300,2428,2429],{"class":316},"        id: article._path,\n",[300,2431,2432,2435,2437,2439,2442,2444,2446,2449,2451],{"class":302,"line":841},[300,2433,2434],{"class":316},"        link: ",[300,2436,2221],{"class":323},[300,2438,2192],{"class":534},[300,2440,2441],{"class":323},"}${",[300,2443,2389],{"class":316},[300,2445,1373],{"class":323},[300,2447,2448],{"class":316},"_path",[300,2450,2274],{"class":323},[300,2452,2174],{"class":316},[300,2454,2455],{"class":302,"line":857},[300,2456,2457],{"class":316},"        description: article.description,\n",[300,2459,2460],{"class":302,"line":867},[300,2461,2462],{"class":316},"        author: [\n",[300,2464,2465],{"class":302,"line":878},[300,2466,2467],{"class":316},"          {\n",[300,2469,2470,2473,2475],{"class":302,"line":883},[300,2471,2472],{"class":316},"            name: ",[300,2474,2271],{"class":534},[300,2476,2174],{"class":316},[300,2478,2479],{"class":302,"line":892},[300,2480,2481],{"class":316},"          },\n",[300,2483,2484],{"class":302,"line":911},[300,2485,2486],{"class":316},"        ],\n",[300,2488,2489,2492,2494,2496],{"class":302,"line":917},[300,2490,2491],{"class":316},"        date: ",[300,2493,2253],{"class":312},[300,2495,2256],{"class":342},[300,2497,2498],{"class":316},"(article.date),\n",[300,2500,2501,2504,2506,2509,2511,2514,2516,2518,2521,2523,2526],{"class":302,"line":928},[300,2502,2503],{"class":316},"        image: article.cover_image ",[300,2505,2413],{"class":312},[300,2507,2508],{"class":323}," `${",[300,2510,2192],{"class":534},[300,2512,2513],{"class":323},"}/${",[300,2515,2389],{"class":316},[300,2517,1373],{"class":323},[300,2519,2520],{"class":316},"cover_image",[300,2522,2274],{"class":323},[300,2524,2525],{"class":312}," :",[300,2527,2528],{"class":534}," undefined\n",[300,2530,2531],{"class":302,"line":938},[300,2532,2533],{"class":316},"      });\n",[300,2535,2536],{"class":302,"line":948},[300,2537,2344],{"class":316},[300,2539,2540],{"class":302,"line":953},[300,2541,330],{"emptyLinePlaceholder":161},[300,2543,2544,2547,2550,2553],{"class":302,"line":964},[300,2545,2546],{"class":312},"    return",[300,2548,2549],{"class":316}," feed.",[300,2551,2552],{"class":342},"atom1",[300,2554,875],{"class":316},[300,2556,2557],{"class":302,"line":969},[300,2558,999],{"class":316},[11,2560,2561,2562,2565,2566,2569,2570,2573,2574,2577],{},"And that's just about it! Except, if you are statically generating your website with the ",[56,2563,2564],{},"nuxt generate"," command, you will need to configure this server-side route to be pre-rendered on site generation.  This is as simple as adding a ",[56,2567,2568],{},"nitro"," ",[56,2571,2572],{},"prerender"," definition in your ",[56,2575,2576],{},"nuxt.config.ts"," file, like so:",[49,2579,2581],{"className":2050,"code":2580,"language":2052,"meta":58,"style":58},"nitro: {\n  prerender: {\n    routes: ['/atom']\n  }\n}\n",[56,2582,2583,2590,2597,2611,2615],{"__ignoreMap":58},[300,2584,2585,2587],{"class":302,"line":303},[300,2586,2568],{"class":342},[300,2588,2589],{"class":316},": {\n",[300,2591,2592,2595],{"class":302,"line":144},[300,2593,2594],{"class":342},"  prerender",[300,2596,2589],{"class":316},[300,2598,2599,2602,2605,2608],{"class":302,"line":327},[300,2600,2601],{"class":342},"    routes",[300,2603,2604],{"class":316},": [",[300,2606,2607],{"class":323},"'/atom'",[300,2609,2610],{"class":316},"]\n",[300,2612,2613],{"class":302,"line":333},[300,2614,384],{"class":316},[300,2616,2617],{"class":302,"line":355},[300,2618,2619],{"class":316},"}\n",[23,2621,2623],{"id":2622},"bonus","Bonus",[11,2625,2626,2627,2630],{},"You may also be interested in adding a ",[56,2628,2629],{},"sitemap.xml"," to your website. This can be done in almost an identical fashion!",[11,2632,2633],{},"Install the dependency:",[49,2635,2637],{"className":2002,"code":2636,"language":2004,"meta":58,"style":58},"npm i -D sitemap\n",[56,2638,2639],{"__ignoreMap":58},[300,2640,2641,2643,2645,2647],{"class":302,"line":303},[300,2642,2011],{"class":342},[300,2644,2014],{"class":323},[300,2646,2017],{"class":534},[300,2648,2649],{"class":323}," sitemap\n",[11,2651,2652,2653,2419],{},"Create a route at ",[56,2654,2655],{},"server/routes/sitemap.xml.ts",[49,2657,2659],{"className":2050,"code":2658,"language":2052,"meta":58,"style":58},"import { serverQueryContent } from '#content/server';\nimport { SitemapStream, streamToPromise } from 'sitemap';\n\nexport default defineEventHandler(async (event) => {\n    const articles = await serverQueryContent(event).find();\n\n    const sitemap = new SitemapStream({ hostname: 'https://my-website.com/' });\n\n    // Add non nuxt content endpoints here\n    sitemap.write({ url: '/' });\n    sitemap.write({ url: '/blog' });\n\n    // Dynamically generate routes for Nuxt markdown content\n    articles.forEach((article) => sitemap.write({ url: article._path, changefreq: 'monthly' }));\n    sitemap.end();\n\n    return (await streamToPromise(sitemap));\n});\n",[56,2660,2661,2673,2687,2691,2713,2731,2735,2758,2762,2767,2783,2796,2800,2805,2833,2842,2846,2861],{"__ignoreMap":58},[300,2662,2663,2665,2667,2669,2671],{"class":302,"line":303},[300,2664,313],{"class":312},[300,2666,2061],{"class":316},[300,2668,320],{"class":312},[300,2670,2066],{"class":323},[300,2672,685],{"class":316},[300,2674,2675,2677,2680,2682,2685],{"class":302,"line":144},[300,2676,313],{"class":312},[300,2678,2679],{"class":316}," { SitemapStream, streamToPromise } ",[300,2681,320],{"class":312},[300,2683,2684],{"class":323}," 'sitemap'",[300,2686,685],{"class":316},[300,2688,2689],{"class":302,"line":327},[300,2690,330],{"emptyLinePlaceholder":161},[300,2692,2693,2695,2697,2699,2701,2703,2705,2707,2709,2711],{"class":302,"line":333},[300,2694,336],{"class":312},[300,2696,339],{"class":312},[300,2698,2124],{"class":342},[300,2700,611],{"class":316},[300,2702,2129],{"class":312},[300,2704,580],{"class":316},[300,2706,2134],{"class":583},[300,2708,587],{"class":316},[300,2710,349],{"class":312},[300,2712,352],{"class":316},[300,2714,2715,2717,2719,2721,2723,2725,2727,2729],{"class":302,"line":355},[300,2716,2149],{"class":312},[300,2718,2355],{"class":534},[300,2720,577],{"class":312},[300,2722,2360],{"class":312},[300,2724,2363],{"class":342},[300,2726,2366],{"class":316},[300,2728,2369],{"class":342},[300,2730,875],{"class":316},[300,2732,2733],{"class":302,"line":363},[300,2734,330],{"emptyLinePlaceholder":161},[300,2736,2737,2739,2742,2744,2746,2749,2752,2755],{"class":302,"line":369},[300,2738,2149],{"class":312},[300,2740,2741],{"class":534}," sitemap",[300,2743,577],{"class":312},[300,2745,2157],{"class":312},[300,2747,2748],{"class":342}," SitemapStream",[300,2750,2751],{"class":316},"({ hostname: ",[300,2753,2754],{"class":323},"'https://my-website.com/'",[300,2756,2757],{"class":316}," });\n",[300,2759,2760],{"class":302,"line":375},[300,2761,330],{"emptyLinePlaceholder":161},[300,2763,2764],{"class":302,"line":381},[300,2765,2766],{"class":306},"    // Add non nuxt content endpoints here\n",[300,2768,2769,2772,2775,2778,2781],{"class":302,"line":387},[300,2770,2771],{"class":316},"    sitemap.",[300,2773,2774],{"class":342},"write",[300,2776,2777],{"class":316},"({ url: ",[300,2779,2780],{"class":323},"'/'",[300,2782,2757],{"class":316},[300,2784,2785,2787,2789,2791,2794],{"class":302,"line":556},[300,2786,2771],{"class":316},[300,2788,2774],{"class":342},[300,2790,2777],{"class":316},[300,2792,2793],{"class":323},"'/blog'",[300,2795,2757],{"class":316},[300,2797,2798],{"class":302,"line":568},[300,2799,330],{"emptyLinePlaceholder":161},[300,2801,2802],{"class":302,"line":594},[300,2803,2804],{"class":306},"    // Dynamically generate routes for Nuxt markdown content\n",[300,2806,2807,2809,2811,2813,2815,2817,2819,2822,2824,2827,2830],{"class":302,"line":619},[300,2808,2380],{"class":316},[300,2810,2383],{"class":342},[300,2812,2386],{"class":316},[300,2814,2389],{"class":583},[300,2816,587],{"class":316},[300,2818,349],{"class":312},[300,2820,2821],{"class":316}," sitemap.",[300,2823,2774],{"class":342},[300,2825,2826],{"class":316},"({ url: article._path, changefreq: ",[300,2828,2829],{"class":323},"'monthly'",[300,2831,2832],{"class":316}," }));\n",[300,2834,2835,2837,2840],{"class":302,"line":624},[300,2836,2771],{"class":316},[300,2838,2839],{"class":342},"end",[300,2841,875],{"class":316},[300,2843,2844],{"class":302,"line":637},[300,2845,330],{"emptyLinePlaceholder":161},[300,2847,2848,2850,2852,2855,2858],{"class":302,"line":650},[300,2849,2546],{"class":312},[300,2851,580],{"class":316},[300,2853,2854],{"class":312},"await",[300,2856,2857],{"class":342}," streamToPromise",[300,2859,2860],{"class":316},"(sitemap));\n",[300,2862,2863],{"class":302,"line":655},[300,2864,999],{"class":316},[11,2866,2867,2868,2870,2871,2419],{},"And add the ",[56,2869,2572],{}," entry in your ",[56,2872,2576],{},[49,2874,2876],{"className":2050,"code":2875,"language":2052,"meta":58,"style":58},"nitro: {\n  prerender: {\n    routes: ['/sitemap.xml', '/atom']\n  }\n}\n",[56,2877,2878,2884,2890,2905,2909],{"__ignoreMap":58},[300,2879,2880,2882],{"class":302,"line":303},[300,2881,2568],{"class":342},[300,2883,2589],{"class":316},[300,2885,2886,2888],{"class":302,"line":144},[300,2887,2594],{"class":342},[300,2889,2589],{"class":316},[300,2891,2892,2894,2896,2899,2901,2903],{"class":302,"line":327},[300,2893,2601],{"class":342},[300,2895,2604],{"class":316},[300,2897,2898],{"class":323},"'/sitemap.xml'",[300,2900,774],{"class":316},[300,2902,2607],{"class":323},[300,2904,2610],{"class":316},[300,2906,2907],{"class":302,"line":333},[300,2908,384],{"class":316},[300,2910,2911],{"class":302,"line":355},[300,2912,2619],{"class":316},[1013,2914,2915],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}",{"title":58,"searchDepth":144,"depth":144,"links":2917},[2918,2919,2920],{"id":1376,"depth":144,"text":1377},{"id":1989,"depth":144,"text":1990},{"id":2622,"depth":144,"text":2623},[232],"2024-01-06T00:00:00.000Z","If you are a user of Nuxt Content and you wish to configure an RSS feed for your website, it's a surprisingly straight forward process! In this article, we will walk through the code changes required to host an RSS feed for both a statically generated, and Universal Nuxt application.",{"draft":1335,"cover_image":2925,"excerpt":2926},"/images/nuxt-content-rss-feed.jpg",{"type":8,"value":2927},[2928],[11,2929,1963,2930,1969],{},[17,2931,1968],{"href":1966,"rel":2932},[21],"/blog/nuxt-content-rss-feed",{"title":1958,"description":2923},"blog/nuxt-content-rss-feed",[1045,2937],"rss","Q84nCS9yexV-chEK23ssGxhOLEK8jdXXo2Pym2pghvg",{"id":2940,"title":2941,"body":2942,"categories":3554,"date":3555,"description":2946,"extension":154,"img":155,"meta":3556,"navigation":161,"path":3562,"seo":3563,"stem":3564,"tags":3565,"__hash__":3568},"content/blog/fennel-initial-exploration.md","Impressions of Fennel with Hammerspoon",{"type":8,"value":2943,"toc":3548},[2944,2947,2967,2971,2980,2984,3001,3021,3028,3043,3160,3164,3181,3228,3266,3273,3444,3515,3522,3526,3529,3538,3545],[11,2945,2946],{},"A while back I read an introductory book on Lisp programming titled, \"The Little\nSchemer\". This book opened my mind to new (to me) programming paradigms, and left me\nwith a strong desire to find a way to incorporate Lisp programming into my every day\nlife. It took some time, but I believe I've found what I've been looking for: Fennel.",[11,2948,2949,2950,2955,2956,2961,2962,1373],{},"The ",[17,2951,2954],{"href":2952,"rel":2953},"https://fennel-lang.org/",[21],"Fennel"," programming language is a dialect of Lisp that boasts compatibility with\nLua, and it just so happens that two of my favorite applications are configured with\nexactly that language: ",[17,2957,2960],{"href":2958,"rel":2959},"https://www.hammerspoon.org/",[21],"Hammerspoon",", and ",[17,2963,2966],{"href":2964,"rel":2965},"https://neovim.io/",[21],"Neovim",[23,2968,2970],{"id":2969},"initial-observations","Initial Observations",[11,2972,2973,2974,2979],{},"To initially explore Fennel, I wanted to start small. My Hammerspoon configuration\nconsists of 7 ",[17,2975,2978],{"href":2976,"rel":2977},"https://github.com/cmpadden/dotfiles/tree/795749fa17e1310bb001bb7deaa22be8689f0027/hammerspoon/.hammerspoon/modules",[21],"modules"," that I use for operations such as: launching applications,\nmanaging windows, keeping my computer from going to sleep, and general operating system\nautomation. So the plan is to translate these modules into Fennel, while maintaining\nwithout breaking the existing functionality. However, at this point, I wasn't even sure\nhow to embed Fennel into my project...",[23,2981,2983],{"id":2982},"integrating-fennel-with-hammerspoon","Integrating Fennel with Hammerspoon",[11,2985,2986,2987,2992,2993,2996,2997,3000],{},"While official documentation exists describing how to ",[17,2988,2991],{"href":2989,"rel":2990},"https://fennel-lang.org/setup#embedding-fennel",[21],"embed fennel"," into your\nproject; it didn't provide me with enough clarity to know my next steps on integrating\nit with Hammerspoon. I found a few resources online demonstrating how to extend the\n",[56,2994,2995],{},"package.path"," and ",[56,2998,2999],{},"package.cpath"," properties in Lua, but I was unable to get this to\nwork.",[194,3002,3003,3009,3015],{},[197,3004,3005],{},[17,3006,3007],{"href":3007,"rel":3008},"https://blog.exupero.org/hammerspoon-with-fennel/",[21],[197,3010,3011],{},[17,3012,3013],{"href":3013,"rel":3014},"https://github.com/Hammerspoon/hammerspoon/issues/2377#issuecomment-636331435",[21],[197,3016,3017],{},[17,3018,3019],{"href":3019,"rel":3020},"https://github.com/agzam/spacehammer/blob/master/init.lua",[21],[11,3022,3023,3024,3027],{},"Ultimately, I opted to include the ",[56,3025,3026],{},"fennel.lua"," file to my Hammerspoon configuration,\nand while not ideal, it does make the configuration nicely self-contained. I'll leave it\nas a future task to include the module installed with LuaRocks.",[11,3029,3030,3031,3034,3035,3038,3039,3042],{},"With Fennel now included in my Hammerspoon configuration, all I need to do is configure\nthe ",[56,3032,3033],{},"fennel.path"," to point to the ",[56,3036,3037],{},"*.fnl"," files in the ",[56,3040,3041],{},".hammerspoon/"," directory, and\nttranslating these modules can begin!",[49,3044,3048],{"className":3045,"code":3046,"language":3047,"meta":58,"style":58},"language-lua shiki shiki-themes github-dark","-- init.lua\n\nlocal fennel = require('fennel')\n\nfennel.path = package.path .. \";\" .. os.getenv(\"HOME\") .. \"/.hammerspoon/?.fnl\"\n\ntable.insert(package.loaders or package.searchers, fennel.searcher)\n\nrequire 'main'\n","lua",[56,3049,3050,3055,3059,3080,3084,3120,3124,3148,3152],{"__ignoreMap":58},[300,3051,3052],{"class":302,"line":303},[300,3053,3054],{"class":306},"-- init.lua\n",[300,3056,3057],{"class":302,"line":144},[300,3058,330],{"emptyLinePlaceholder":161},[300,3060,3061,3064,3067,3069,3072,3074,3077],{"class":302,"line":327},[300,3062,3063],{"class":312},"local",[300,3065,3066],{"class":316}," fennel ",[300,3068,468],{"class":312},[300,3070,3071],{"class":534}," require",[300,3073,611],{"class":316},[300,3075,3076],{"class":323},"'fennel'",[300,3078,3079],{"class":316},")\n",[300,3081,3082],{"class":302,"line":333},[300,3083,330],{"emptyLinePlaceholder":161},[300,3085,3086,3089,3091,3093,3096,3099,3102,3105,3108,3110,3113,3115,3117],{"class":302,"line":355},[300,3087,3088],{"class":316},"fennel.",[300,3090,403],{"class":342},[300,3092,577],{"class":312},[300,3094,3095],{"class":534}," package.path",[300,3097,3098],{"class":312}," ..",[300,3100,3101],{"class":323}," \";\" ",[300,3103,3104],{"class":312},"..",[300,3106,3107],{"class":534}," os.getenv",[300,3109,611],{"class":316},[300,3111,3112],{"class":323},"\"HOME\"",[300,3114,587],{"class":316},[300,3116,3104],{"class":312},[300,3118,3119],{"class":323}," \"/.hammerspoon/?.fnl\"\n",[300,3121,3122],{"class":302,"line":363},[300,3123,330],{"emptyLinePlaceholder":161},[300,3125,3126,3129,3131,3134,3137,3140,3143,3146],{"class":302,"line":369},[300,3127,3128],{"class":534},"table.insert",[300,3130,611],{"class":316},[300,3132,3133],{"class":534},"package.loaders",[300,3135,3136],{"class":312}," or",[300,3138,3139],{"class":534}," package.searchers",[300,3141,3142],{"class":316},", fennel.",[300,3144,3145],{"class":342},"searcher",[300,3147,3079],{"class":316},[300,3149,3150],{"class":302,"line":375},[300,3151,330],{"emptyLinePlaceholder":161},[300,3153,3154,3157],{"class":302,"line":381},[300,3155,3156],{"class":534},"require",[300,3158,3159],{"class":323}," 'main'\n",[23,3161,3163],{"id":3162},"translating-lua-to-fennel","Translating Lua to Fennel",[11,3165,3166,3167,3172,3173,3176,3177,3180],{},"As a Fennel novice, I was happy to see that the Fennel project provides an online\ncross-compiler for Lua and Fennel called ",[17,3168,3171],{"href":3169,"rel":3170},"https://fennel-lang.org/see",[21],"anti-fennel",", and while it can generate some\nstrange-looking Fennel code, it was an extremely useful tool for me to get\nup-and-running right away. For example, by pasting the simple ",[56,3174,3175],{},"sleep"," function\nfrom the ",[56,3178,3179],{},"helpers"," module into the compiler:",[49,3182,3184],{"className":3045,"code":3183,"language":3047,"meta":58,"style":58},"function sleep(ms)\n    os.execute(\"sleep \" .. tonumber(ms) / 1000)\nend\n",[56,3185,3186,3197,3223],{"__ignoreMap":58},[300,3187,3188,3191,3194],{"class":302,"line":303},[300,3189,3190],{"class":312},"function",[300,3192,3193],{"class":342}," sleep",[300,3195,3196],{"class":316},"(ms)\n",[300,3198,3199,3202,3204,3207,3209,3212,3215,3218,3221],{"class":302,"line":144},[300,3200,3201],{"class":534},"    os.execute",[300,3203,611],{"class":316},[300,3205,3206],{"class":323},"\"sleep \" ",[300,3208,3104],{"class":312},[300,3210,3211],{"class":534}," tonumber",[300,3213,3214],{"class":316},"(ms) ",[300,3216,3217],{"class":312},"/",[300,3219,3220],{"class":534}," 1000",[300,3222,3079],{"class":316},[300,3224,3225],{"class":302,"line":327},[300,3226,3227],{"class":312},"end\n",[49,3229,3233],{"className":3230,"code":3231,"language":3232,"meta":58,"style":58},"language-lisp shiki shiki-themes github-dark","(fn sleep [ms]\n  (os.execute (.. \"sleep \" (/ (tonumber ms) 1000))))\n","lisp",[56,3234,3235,3245],{"__ignoreMap":58},[300,3236,3237,3240,3242],{"class":302,"line":303},[300,3238,3239],{"class":316},"(fn ",[300,3241,3175],{"class":534},[300,3243,3244],{"class":316}," [ms]\n",[300,3246,3247,3250,3253,3255,3257,3260,3263],{"class":302,"line":144},[300,3248,3249],{"class":316},"  (os.execute (.. ",[300,3251,3252],{"class":323},"\"sleep \"",[300,3254,580],{"class":316},[300,3256,3217],{"class":534},[300,3258,3259],{"class":316}," (tonumber ms) ",[300,3261,3262],{"class":534},"1000",[300,3264,3265],{"class":316},"))))\n",[11,3267,3268,3269,3272],{},"As another example, here is the output for my ",[217,3270,3271],{},"caffeine"," toggle:",[49,3274,3276],{"className":3045,"code":3275,"language":3047,"meta":58,"style":58},"hs.hotkey.bind(HYPER, \"0\", function()\n  hs.caffeinate.toggle(\"displayIdle\")\n  if hs.caffeinate.get(\"displayIdle\") then\n    helpers:show(\"Caffeine Enabled\", nil, helpers.styles.success, helpers.assets.check)\n  else\n    helpers:show(\"Caffeine Disabled\", nil, helpers.styles.error, helpers.assets.ban)\n  end\nend)\n",[56,3277,3278,3304,3324,3348,3391,3396,3433,3438],{"__ignoreMap":58},[300,3279,3280,3283,3286,3288,3291,3294,3297,3299,3301],{"class":302,"line":303},[300,3281,3282],{"class":316},"hs.",[300,3284,3285],{"class":342},"hotkey",[300,3287,1373],{"class":316},[300,3289,3290],{"class":534},"bind",[300,3292,3293],{"class":316},"(HYPER, ",[300,3295,3296],{"class":323},"\"0\"",[300,3298,774],{"class":316},[300,3300,3190],{"class":312},[300,3302,3303],{"class":316},"()\n",[300,3305,3306,3309,3312,3314,3317,3319,3322],{"class":302,"line":144},[300,3307,3308],{"class":316},"  hs.",[300,3310,3311],{"class":342},"caffeinate",[300,3313,1373],{"class":316},[300,3315,3316],{"class":534},"toggle",[300,3318,611],{"class":316},[300,3320,3321],{"class":323},"\"displayIdle\"",[300,3323,3079],{"class":316},[300,3325,3326,3329,3332,3334,3336,3339,3341,3343,3345],{"class":302,"line":327},[300,3327,3328],{"class":312},"  if",[300,3330,3331],{"class":316}," hs.",[300,3333,3311],{"class":342},[300,3335,1373],{"class":316},[300,3337,3338],{"class":534},"get",[300,3340,611],{"class":316},[300,3342,3321],{"class":323},[300,3344,587],{"class":316},[300,3346,3347],{"class":312},"then\n",[300,3349,3350,3353,3355,3358,3360,3363,3365,3368,3371,3374,3376,3379,3381,3384,3386,3389],{"class":302,"line":333},[300,3351,3352],{"class":342},"    helpers",[300,3354,2419],{"class":316},[300,3356,3357],{"class":534},"show",[300,3359,611],{"class":316},[300,3361,3362],{"class":323},"\"Caffeine Enabled\"",[300,3364,774],{"class":316},[300,3366,3367],{"class":534},"nil",[300,3369,3370],{"class":316},", helpers.",[300,3372,3373],{"class":342},"styles",[300,3375,1373],{"class":316},[300,3377,3378],{"class":342},"success",[300,3380,3370],{"class":316},[300,3382,3383],{"class":342},"assets",[300,3385,1373],{"class":316},[300,3387,3388],{"class":342},"check",[300,3390,3079],{"class":316},[300,3392,3393],{"class":302,"line":355},[300,3394,3395],{"class":312},"  else\n",[300,3397,3398,3400,3402,3404,3406,3409,3411,3413,3415,3417,3419,3422,3424,3426,3428,3431],{"class":302,"line":363},[300,3399,3352],{"class":342},[300,3401,2419],{"class":316},[300,3403,3357],{"class":534},[300,3405,611],{"class":316},[300,3407,3408],{"class":323},"\"Caffeine Disabled\"",[300,3410,774],{"class":316},[300,3412,3367],{"class":534},[300,3414,3370],{"class":316},[300,3416,3373],{"class":342},[300,3418,1373],{"class":316},[300,3420,3421],{"class":342},"error",[300,3423,3370],{"class":316},[300,3425,3383],{"class":342},[300,3427,1373],{"class":316},[300,3429,3430],{"class":342},"ban",[300,3432,3079],{"class":316},[300,3434,3435],{"class":302,"line":369},[300,3436,3437],{"class":312},"  end\n",[300,3439,3440,3442],{"class":302,"line":375},[300,3441,2839],{"class":312},[300,3443,3079],{"class":316},[49,3445,3447],{"className":3230,"code":3446,"language":3232,"meta":58,"style":58},"(hs.hotkey.bind HYPER :0\n  (fn [] (hs.caffeinate.toggle :displayIdle)\n    (if (hs.caffeinate.get :displayIdle)\n      (helpers:show \"Caffeine Enabled\" nil helpers.styles.success helpers.assets.check)\n      (helpers:show \"Caffeine Disabled\" nil helpers.styles.error helpers.assets.ban)))) \n",[56,3448,3449,3457,3467,3482,3500],{"__ignoreMap":58},[300,3450,3451,3454],{"class":302,"line":303},[300,3452,3453],{"class":316},"(hs.hotkey.bind HYPER ",[300,3455,3456],{"class":342},":0\n",[300,3458,3459,3462,3465],{"class":302,"line":144},[300,3460,3461],{"class":316},"  (fn [] (hs.caffeinate.toggle ",[300,3463,3464],{"class":342},":displayIdle",[300,3466,3079],{"class":316},[300,3468,3469,3472,3475,3478,3480],{"class":302,"line":327},[300,3470,3471],{"class":316},"    (",[300,3473,3474],{"class":312},"if",[300,3476,3477],{"class":316}," (hs.caffeinate.get ",[300,3479,3464],{"class":342},[300,3481,3079],{"class":316},[300,3483,3484,3487,3489,3492,3494,3497],{"class":302,"line":333},[300,3485,3486],{"class":316},"      (",[300,3488,3179],{"class":534},[300,3490,3491],{"class":316},":show ",[300,3493,3362],{"class":323},[300,3495,3496],{"class":534}," nil",[300,3498,3499],{"class":316}," helpers.styles.success helpers.assets.check)\n",[300,3501,3502,3504,3506,3508,3510,3512],{"class":302,"line":355},[300,3503,3486],{"class":316},[300,3505,3179],{"class":534},[300,3507,3491],{"class":316},[300,3509,3408],{"class":323},[300,3511,3496],{"class":534},[300,3513,3514],{"class":316}," helpers.styles.error helpers.assets.ban))))\n",[11,3516,3517,3518,3521],{},"This was especially helpful for more gnarly modules like the ",[56,3519,3520],{},"window"," module used for\nwindow management, and seeing the Lua and Fennel code side-by-side was a kick starter in\nlearning the language!",[23,3523,3525],{"id":3524},"next-steps","Next Steps",[11,3527,3528],{},"While my Fennel Hammerspoon configuration now works with parity to its Lua counterpart,\nI have not yet added new features or modules. I look forward to writing new Fennel code,\nand deepen my understanding of Lisp and the Fennel programming language.",[11,3530,3531,3532,3537],{},"Additionally, before beginning this endeavor, I was already aware of projects like\n",[17,3533,3536],{"href":3534,"rel":3535},"https://github.com/agzam/spacehammer",[21],"spacehammer","; a wildly impressive Hammerspoon configuration written in Fennel, but,\nI wanted to start small and learn the integration myself. However, with the basics out\nof the way, I hope to explore this project further, and seek lessons-learned for the\nconfiguration of my own.",[11,3539,3540,3541],{},"The full pull-request for translating my Lua Hammerspoon configuration to Fennel can be\nfound here: ",[17,3542,3543],{"href":3543,"rel":3544},"https://github.com/cmpadden/dotfiles/pull/19/files",[21],[1013,3546,3547],{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":58,"searchDepth":144,"depth":144,"links":3549},[3550,3551,3552,3553],{"id":2969,"depth":144,"text":2970},{"id":2982,"depth":144,"text":2983},{"id":3162,"depth":144,"text":3163},{"id":3524,"depth":144,"text":3525},[3232],"2023-10-22T00:00:00.000Z",{"draft":1335,"cover_image":3557,"excerpt":3558},"/images/dall-e-fennel-hammer.jpeg",{"type":8,"value":3559},[3560],[11,3561,2946],{},"/blog/fennel-initial-exploration",{"title":2941,"description":2946},"blog/fennel-initial-exploration",[3232,3566,3567],"hammerspoon","fennel","3C-7v0O8CjqbTfk2xTVi9_8IR7SpBs7DfcJxwjwkblI",{"id":3570,"title":3571,"body":3572,"categories":3953,"date":3955,"description":3956,"extension":154,"img":155,"meta":3957,"navigation":161,"path":3966,"seo":3967,"stem":3968,"tags":3969,"__hash__":3971},"content/blog/doctl.md","Exploring the Digital Ocean `doctl` Utility",{"type":8,"value":3573,"toc":3951},[3574,3585,3591,3629,3641,3662,3665,3708,3711,3766,3773,3803,3810,3829,3832,3904,3907,3924,3945,3948],[11,3575,3576,3577,3580,3581,3584],{},"I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean ",[56,3578,3579],{},"doctl"," command line utility.\nThis proved to be an ",[217,3582,3583],{},"extremely"," easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.",[11,3586,3587,3588,1373],{},"To start things off, I had to install and setup authentication to Digital Ocean. Doing\nthis on my Mac machine, I opted to use ",[17,3589,1087],{"href":1085,"rel":3590},[21],[49,3592,3594],{"className":1091,"code":3593,"language":1093,"meta":58,"style":58},"# install `doctl`\nbrew install doctl\n\n# setup authentication\ndoctl auth init\n",[56,3595,3596,3601,3610,3614,3619],{"__ignoreMap":58},[300,3597,3598],{"class":302,"line":303},[300,3599,3600],{"class":306},"# install `doctl`\n",[300,3602,3603,3605,3607],{"class":302,"line":144},[300,3604,1485],{"class":342},[300,3606,1106],{"class":323},[300,3608,3609],{"class":323}," doctl\n",[300,3611,3612],{"class":302,"line":327},[300,3613,330],{"emptyLinePlaceholder":161},[300,3615,3616],{"class":302,"line":333},[300,3617,3618],{"class":306},"# setup authentication\n",[300,3620,3621,3623,3626],{"class":302,"line":355},[300,3622,3579],{"class":342},[300,3624,3625],{"class":323}," auth",[300,3627,3628],{"class":323}," init\n",[11,3630,3631,3632,3637,3638,1373],{},"While the online ",[17,3633,3636],{"href":3634,"rel":3635},"https://docs.digitalocean.com/reference/doctl/reference/compute/droplet/create/",[21],"documentation"," is fantastic, I instead found myself mostly referencing the outputs of ",[56,3639,3640],{},"--help",[49,3642,3644],{"className":1091,"code":3643,"language":1093,"meta":58,"style":58},"doctl compute droplet create --help\n",[56,3645,3646],{"__ignoreMap":58},[300,3647,3648,3650,3653,3656,3659],{"class":302,"line":303},[300,3649,3579],{"class":342},[300,3651,3652],{"class":323}," compute",[300,3654,3655],{"class":323}," droplet",[300,3657,3658],{"class":323}," create",[300,3660,3661],{"class":534}," --help\n",[11,3663,3664],{},"I had to find the image name of the version of Ubuntu I wanted to install:",[49,3666,3668],{"className":1091,"code":3667,"language":1093,"meta":58,"style":58},"doctl compute image list --public | grep ubuntu-22\n\n# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n",[56,3669,3670,3694,3698,3703],{"__ignoreMap":58},[300,3671,3672,3674,3676,3679,3682,3685,3688,3691],{"class":302,"line":303},[300,3673,3579],{"class":342},[300,3675,3652],{"class":323},[300,3677,3678],{"class":323}," image",[300,3680,3681],{"class":323}," list",[300,3683,3684],{"class":534}," --public",[300,3686,3687],{"class":312}," |",[300,3689,3690],{"class":342}," grep",[300,3692,3693],{"class":323}," ubuntu-22\n",[300,3695,3696],{"class":302,"line":144},[300,3697,330],{"emptyLinePlaceholder":161},[300,3699,3700],{"class":302,"line":327},[300,3701,3702],{"class":306},"# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n",[300,3704,3705],{"class":302,"line":333},[300,3706,3707],{"class":306},"# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n",[11,3709,3710],{},"And also the slug of the compute size:",[49,3712,3714],{"className":1091,"code":3713,"language":1093,"meta":58,"style":58},"doctl compute size list\n\n# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n",[56,3715,3716,3727,3731,3736,3741,3746,3751,3756,3761],{"__ignoreMap":58},[300,3717,3718,3720,3722,3725],{"class":302,"line":303},[300,3719,3579],{"class":342},[300,3721,3652],{"class":323},[300,3723,3724],{"class":323}," size",[300,3726,1130],{"class":323},[300,3728,3729],{"class":302,"line":144},[300,3730,330],{"emptyLinePlaceholder":161},[300,3732,3733],{"class":302,"line":327},[300,3734,3735],{"class":306},"# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n",[300,3737,3738],{"class":302,"line":333},[300,3739,3740],{"class":306},"# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n",[300,3742,3743],{"class":302,"line":355},[300,3744,3745],{"class":306},"# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n",[300,3747,3748],{"class":302,"line":363},[300,3749,3750],{"class":306},"# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n",[300,3752,3753],{"class":302,"line":369},[300,3754,3755],{"class":306},"# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n",[300,3757,3758],{"class":302,"line":375},[300,3759,3760],{"class":306},"# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n",[300,3762,3763],{"class":302,"line":381},[300,3764,3765],{"class":306},"# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n",[11,3767,3768,3769,3772],{},"I've also configured a few SSH keys with Digital Ocean, and I can have the key (specified by ID) provisioned to the machine using the ",[56,3770,3771],{},"--ssh-keys"," flag.",[49,3774,3776],{"className":1091,"code":3775,"language":1093,"meta":58,"style":58},"doctl compute ssh-key list\n\n# ID      Name    FingerPrint\n# 1234    mini    \u003Credacted>\n",[56,3777,3778,3789,3793,3798],{"__ignoreMap":58},[300,3779,3780,3782,3784,3787],{"class":302,"line":303},[300,3781,3579],{"class":342},[300,3783,3652],{"class":323},[300,3785,3786],{"class":323}," ssh-key",[300,3788,1130],{"class":323},[300,3790,3791],{"class":302,"line":144},[300,3792,330],{"emptyLinePlaceholder":161},[300,3794,3795],{"class":302,"line":327},[300,3796,3797],{"class":306},"# ID      Name    FingerPrint\n",[300,3799,3800],{"class":302,"line":333},[300,3801,3802],{"class":306},"# 1234    mini    \u003Credacted>\n",[11,3804,3805,3806,3809],{},"Also, I wanted to install a few packages to the box upon creation, this can be done easily with the ",[56,3807,3808],{},"--user-data-file"," flag to run an initialization script.",[49,3811,3813],{"className":1091,"code":3812,"language":1093,"meta":58,"style":58},"echo 'apt install -y imagemagick zip' > bootstrap.sh\n",[56,3814,3815],{"__ignoreMap":58},[300,3816,3817,3820,3823,3826],{"class":302,"line":303},[300,3818,3819],{"class":534},"echo",[300,3821,3822],{"class":323}," 'apt install -y imagemagick zip'",[300,3824,3825],{"class":312}," >",[300,3827,3828],{"class":323}," bootstrap.sh\n",[11,3830,3831],{},"Putting it all together, here is the simple command for creating a small compute instance!",[49,3833,3835],{"className":1091,"code":3834,"language":1093,"meta":58,"style":58},"doctl compute droplet create \\\n    --image ubuntu-22-10-x64 \\\n    --size s-1vcpu-512mb-10gb \\\n    --region nyc1 \\\n    --ssh-keys 1234 \\\n    --user-data-file boostrap.sh \\\n    ephemeral\n",[56,3836,3837,3849,3859,3869,3879,3889,3899],{"__ignoreMap":58},[300,3838,3839,3841,3843,3845,3847],{"class":302,"line":303},[300,3840,3579],{"class":342},[300,3842,3652],{"class":323},[300,3844,3655],{"class":323},[300,3846,3658],{"class":323},[300,3848,1595],{"class":534},[300,3850,3851,3854,3857],{"class":302,"line":144},[300,3852,3853],{"class":534},"    --image",[300,3855,3856],{"class":323}," ubuntu-22-10-x64",[300,3858,1595],{"class":534},[300,3860,3861,3864,3867],{"class":302,"line":327},[300,3862,3863],{"class":534},"    --size",[300,3865,3866],{"class":323}," s-1vcpu-512mb-10gb",[300,3868,1595],{"class":534},[300,3870,3871,3874,3877],{"class":302,"line":333},[300,3872,3873],{"class":534},"    --region",[300,3875,3876],{"class":323}," nyc1",[300,3878,1595],{"class":534},[300,3880,3881,3884,3887],{"class":302,"line":355},[300,3882,3883],{"class":534},"    --ssh-keys",[300,3885,3886],{"class":534}," 1234",[300,3888,1595],{"class":534},[300,3890,3891,3894,3897],{"class":302,"line":363},[300,3892,3893],{"class":534},"    --user-data-file",[300,3895,3896],{"class":323}," boostrap.sh",[300,3898,1595],{"class":534},[300,3900,3901],{"class":302,"line":369},[300,3902,3903],{"class":323},"    ephemeral\n",[11,3905,3906],{},"Finally, I can connect, do my thing, and destroy the instance.",[49,3908,3910],{"className":1091,"code":3909,"language":1093,"meta":58,"style":58},"doctl compute ssh ephemeral\n",[56,3911,3912],{"__ignoreMap":58},[300,3913,3914,3916,3918,3921],{"class":302,"line":303},[300,3915,3579],{"class":342},[300,3917,3652],{"class":323},[300,3919,3920],{"class":323}," ssh",[300,3922,3923],{"class":323}," ephemeral\n",[49,3925,3927],{"className":1091,"code":3926,"language":1093,"meta":58,"style":58},"doctl compute droplet delete --force ephemeral\n",[56,3928,3929],{"__ignoreMap":58},[300,3930,3931,3933,3935,3937,3940,3943],{"class":302,"line":303},[300,3932,3579],{"class":342},[300,3934,3652],{"class":323},[300,3936,3655],{"class":323},[300,3938,3939],{"class":323}," delete",[300,3941,3942],{"class":534}," --force",[300,3944,3923],{"class":323},[11,3946,3947],{},"All-in-all, I was up and running in about 20 minutes. What a handy utility!",[1013,3949,3950],{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}",{"title":58,"searchDepth":144,"depth":144,"links":3952},[],[3954],"linux","2023-01-01T00:00:00.000Z","I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean doctl command line utility.\nThis proved to be an extremely easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.",{"excerpt":3958},{"type":8,"value":3959},[3960],[11,3961,3576,3962,3580,3964,3584],{},[56,3963,3579],{},[217,3965,3583],{},"/blog/doctl",{"title":3571,"description":3956},"blog/doctl",[3954,3970],"digital-ocean","gOaFZsdML8s6ws5hrji-wT7iTkjdI4T9ZaZFbwft_0Q",{"id":3973,"title":3974,"body":3975,"categories":4037,"date":4039,"description":3979,"extension":154,"img":155,"meta":4040,"navigation":161,"path":4045,"seo":4046,"stem":4047,"tags":4048,"__hash__":4049},"content/blog/nuxt-v3-migration.md","This Website Has Been Migrated to Nuxt 3 🎉",{"type":8,"value":3976,"toc":4035},[3977,3980,3989,3996,3999,4002,4032],[11,3978,3979],{},"This website has been migrated to the latest version of the Nuxt web framework, and with it comes all of the exciting goodies that the Vue and Nuxt teams have been concocting over the past few years.\nNot to mention, all of the great plugins in the Vue ecosystem!",[11,3981,3982,3983,3988],{},"If you're curious what changes were required to make the migration, you can check out ",[17,3984,3987],{"href":3985,"rel":3986},"https://github.com/cmpadden/cmpadden.github.io/pull/3",[21],"pull request #3"," in the GitHub repository.",[11,3990,3991],{},[3992,3993],"img",{"alt":3994,"src":3995},"Screenshot of Nuxt Migration Pull Request","/images/nuxt-migration-pr.png",[11,3997,3998],{},"While the documentation for making this migration is great, there were many breaking changes, and the overall process was quite tedious.\nFor this reason, I opted to generate a new project entirely, and port existing code to this clean slate.\nI believe that this resulted in a project with a bit less cruft.",[11,4000,4001],{},"The most valuable resources for making these changes include:",[194,4003,4004,4011,4018,4025],{},[197,4005,4006],{},[17,4007,4010],{"href":4008,"rel":4009},"https://nuxt.com/docs/migration/overview",[21],"The Nuxt Migration Guide",[197,4012,4013],{},[17,4014,4017],{"href":4015,"rel":4016},"https://nuxt.com/docs/getting-started/introduction",[21],"The Nuxt Framework Guide",[197,4019,4020],{},[17,4021,4024],{"href":4022,"rel":4023},"https://tailwindcss.nuxt.dev/",[21],"Nuxt Tailwind Module Documentation",[197,4026,4027],{},[17,4028,4031],{"href":4029,"rel":4030},"https://content.nuxtjs.org/",[21],"Nuxt Content Module Documentation",[11,4033,4034],{},"Part of the delay for doing this upgrade was in waiting for module developers to support this major release.\nI'm super thankful for all of the hard work they've don, and I'm excited to explore all of the new features available!\nI just hope that the breaking changes in this release don't cause too much fracturing of the community, as it does feel like déjà vu of Python 2 and 3.",{"title":58,"searchDepth":144,"depth":144,"links":4036},[],[4038],"web","2022-12-31T00:00:00.000Z",{"excerpt":4041},{"type":8,"value":4042},[4043],[11,4044,3979],{},"/blog/nuxt-v3-migration",{"title":3974,"description":3979},"blog/nuxt-v3-migration",[1045],"RDWRbeT6o_qX6RV64t2ekmvtChq3ieWddXgIVUWqEeM",{"id":4051,"title":4052,"body":4053,"categories":4150,"date":4152,"description":4057,"extension":154,"img":155,"meta":4153,"navigation":161,"path":4158,"seo":4159,"stem":4160,"tags":4161,"__hash__":4164},"content/blog/migrate-truenas-from-core-to-scale.md","Migrate to TrueNAS Scale from TrueNAS Core",{"type":8,"value":4054,"toc":4148},[4055,4058,4065,4137,4140],[11,4056,4057],{},"TrueNAS Scale offers a variety of interesting features that are not supported in its TrueNAS Core counterpart. Most notably, because the base operating system is Debian Linux, opposed to FreeBSD, there is native support for Linux containers via Docker, and Kubernetes Pods! This post walks through the steps required to upgrade from TrueNAS Core to TrueNAS Scale.",[11,4059,4060,4061,4064],{},"Thankfully, the upgrade procedure to migrate from TrueNAS Core to TrueNAS Scale is relatively straight forward. All it requires is to create a bootable USB of the TrueNAS Scale image, boot the USB, and select ",[217,4062,4063],{},"Install/Upgrade"," in the installation wizard. But for the sake of being thorough, you can find instructions on how to backup system configurations and install the OS below.",[4066,4067,4068,4093,4109,4112,4125,4128],"ol",{},[197,4069,4070,4071],{},"Make a backup of your system’s configuration\n",[4066,4072,4073,4079],{},[197,4074,4075,4076],{},"Navigate to ",[56,4077,4078],{},"System > General",[197,4080,4081,4082,4085,4086,4089,4090],{},"Click ",[56,4083,4084],{},"Save Config",", check the ",[217,4087,4088],{},"Export Secret Seed"," box, and click ",[56,4091,4092],{},"Save",[197,4094,4095,4096],{},"Export dataset keys for the encrypted pools\n",[4066,4097,4098,4103],{},[197,4099,4075,4100],{},[56,4101,4102],{},"Storage > Pools",[197,4104,4105,4106],{},"Click the cog icon, and select ",[56,4107,4108],{},"Export Dataset Keys",[197,4110,4111],{},"Insert the TrueNAS Core bootable USB into the NAS",[197,4113,4114,4115,2996,4118,4121,4122],{},"From the Supermicro IPMI interface select ",[217,4116,4117],{},"Remote Control",[217,4119,4120],{},"iKVM/HTML5"," and select ",[217,4123,4124],{},"Reboot",[197,4126,4127],{},"Select the bootable USB as the boot device",[197,4129,4130,4131,4133,4134],{},"From the TrueNAS installation wizard, select ",[217,4132,4063],{},", select the drive that contains the TrueNAS installation, and select ",[217,4135,4136],{},"Upgrade Install",[11,4138,4139],{},"Reboot the device, and voila — you should be up-and-running! Give the system a quick rundown to validate that your settings and pools have transferred correctly, and then enjoy all the container goodness!",[11,4141,4142,4143,1373],{},"For a breakdown of the differences between TrueNAS Core, Enterprise, and Scale, you can reference ",[17,4144,4147],{"href":4145,"rel":4146},"https://www.truenas.com/help-me-choose/",[21],"this table",{"title":58,"searchDepth":144,"depth":144,"links":4149},[],[4151],"homelab","2021-12-28T00:00:00.000Z",{"excerpt":4154},{"type":8,"value":4155},[4156],[11,4157,4057],{},"/blog/migrate-truenas-from-core-to-scale",{"title":4052,"description":4057},"blog/migrate-truenas-from-core-to-scale",[4151,4162,4163],"supermicro","truenas","C1xchapkdAV7Zc7hOp8QhOfGn2efuz7KqXEEwX8SpD4",{"id":4166,"title":4167,"body":4168,"categories":4267,"date":4268,"description":4172,"extension":154,"img":155,"meta":4269,"navigation":161,"path":4274,"seo":4275,"stem":4276,"tags":4277,"__hash__":4278},"content/blog/reset-ipmi-password-from-host-os.md","Reset IPMI Credentials from the Host OS",{"type":8,"value":4169,"toc":4265},[4170,4173,4184,4191,4194,4200,4211,4217,4220,4223,4226,4232],[11,4171,4172],{},"If you ever find yourself locked out of the Intelligent Platform Management Interface (IPMI) of a server, these\ninstructions will guide your through the process of resetting the credentials to their default values from the host\noperating system.",[11,4174,4175,4176,4179,4180,4183],{},"If you are using an operating system like TrueNAS -- good news! It's possible to reset the IPMI password directly from\nthe web interface. This is done by navigating to ",[56,4177,4178],{},"Network > IPMI",", and simply entering a new value in the ",[217,4181,4182],{},"IPMI\nPassword Reset"," field.",[11,4185,4186,4187,4190],{},"If you are using some other OS that doesn't have this feature, you can achieve similar results by using the ",[56,4188,4189],{},"ipmitool","\ncommand-line utility.",[11,4192,4193],{},"First, you'll want to determine the user ID associated with the user for whom you'd like to reset the password.",[49,4195,4198],{"className":4196,"code":4197,"language":54},[52],"# ipmitool user list\nID  Name             Callin  Link Auth  IPMI Msg   Channel Priv Limit\n1                    true    false      false      Unknown (0x00)\n2   ADMIN            true    false      false      Unknown (0x00)\n",[56,4199,4197],{"__ignoreMap":58},[11,4201,4202,4203,4206,4207,4210],{},"In this case, we will be resetting the password for ",[217,4204,4205],{},"ADMIN"," who has a user ID of ",[217,4208,4209],{},"2",". Then we'll assign the new\npassword like so:",[49,4212,4215],{"className":4213,"code":4214,"language":54},[52],"# ipmitool user set password 2 \u003Cpassword>\n",[56,4216,4214],{"__ignoreMap":58},[11,4218,4219],{},"And you should be good to go!",[11,4221,4222],{},"...",[11,4224,4225],{},"Alternatively, if you'd like to factory reset the baseboard management controller (BMC), which will reset the IPMI\ncredentials to their default value, you can issue the following command.",[49,4227,4230],{"className":4228,"code":4229,"language":54},[52],"# ipmitool raw 0x3c 0x40\n",[56,4231,4229],{"__ignoreMap":58},[11,4233,4234,4235,4238,4239,4242,4243,4238,4246,4249,4250,2174,4255,4258,4259,4264],{},"Where ",[56,4236,4237],{},"0x3c"," is the ",[56,4240,4241],{},"\u003Cnetfn>"," argument, a.k.a. the network function code that defines the functional routing for\nmessages, and ",[56,4244,4245],{},"0x40",[56,4247,4248],{},"\u003Ccmd>",". According to section 5.1 of the ",[17,4251,4254],{"href":4252,"rel":4253},"https://www.intel.com/content/dam/www/public/us/en/documents/product-briefs/ipmi-second-gen-interface-spec-v2-rev1-1.pdf",[21],"IPMI interface\nspecification",[217,4256,4257],{},"netfn"," codes ranging from 0x30 to 0x3F are reserved for vendor specific functions. I searched around for some\nSupermicro references on these vendor specific network functions without much luck other than various ",[17,4260,4263],{"href":4261,"rel":4262},"https://www.supermicro.com/support/faqs/faq.cfm?faq=15448",[21],"support\nresponses"," on how to reset a device. Bummer!",{"title":58,"searchDepth":144,"depth":144,"links":4266},[],[4151],"2021-12-27T00:00:00.000Z",{"excerpt":4270},{"type":8,"value":4271},[4272],[11,4273,4172],{},"/blog/reset-ipmi-password-from-host-os",{"title":4167,"description":4172},"blog/reset-ipmi-password-from-host-os",[4151,4162,4163],"W2XHNKDLQRjaUPl4vcHHSfPon8YhnRj4uZSV03jJ5t4",{"id":4280,"title":4281,"body":4282,"categories":4620,"date":4621,"description":4622,"extension":154,"img":155,"meta":4623,"navigation":161,"path":4630,"seo":4631,"stem":4632,"tags":4633,"__hash__":4634},"content/blog/quick-tip-rerunning-bash-commands.md","Tip: Re-running Bash Commands",{"type":8,"value":4283,"toc":4618},[4284,4291,4337,4350,4398,4401,4415,4477,4491,4523,4529,4551,4560,4584,4597,4599,4615],[11,4285,4286,4287,4290],{},"Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use ",[56,4288,4289],{},"sudo"," for a command that requires\nroot privileges.",[49,4292,4294],{"className":1408,"code":4293,"language":1410,"meta":58,"style":58},"$ pacman -Syu\nerror: you cannot perform this operation unless you are root.\n",[56,4295,4296,4306],{"__ignoreMap":58},[300,4297,4298,4300,4303],{"class":302,"line":303},[300,4299,1100],{"class":342},[300,4301,4302],{"class":323}," pacman",[300,4304,4305],{"class":534}," -Syu\n",[300,4307,4308,4311,4314,4317,4320,4323,4326,4329,4331,4334],{"class":302,"line":144},[300,4309,4310],{"class":342},"error:",[300,4312,4313],{"class":323}," you",[300,4315,4316],{"class":323}," cannot",[300,4318,4319],{"class":323}," perform",[300,4321,4322],{"class":323}," this",[300,4324,4325],{"class":323}," operation",[300,4327,4328],{"class":323}," unless",[300,4330,4313],{"class":323},[300,4332,4333],{"class":323}," are",[300,4335,4336],{"class":323}," root.\n",[11,4338,4339,4340,4343,4344,4346,4347,4349],{},"Well, I have good news for you -- you can easily re-issue a command with the\n",[56,4341,4342],{},"!!"," designator! Simply type ",[56,4345,4289],{}," followed by ",[56,4348,4342],{}," and you're good to go.",[49,4351,4353],{"className":1408,"code":4352,"language":1410,"meta":58,"style":58},"$ sudo !!\nsudo pacman -Syu\n[sudo] password for colton:\n:: Synchronizing package databases...\n",[56,4354,4355,4365,4373,4384],{"__ignoreMap":58},[300,4356,4357,4359,4362],{"class":302,"line":303},[300,4358,1100],{"class":342},[300,4360,4361],{"class":323}," sudo",[300,4363,4364],{"class":323}," !!\n",[300,4366,4367,4369,4371],{"class":302,"line":144},[300,4368,4289],{"class":342},[300,4370,4302],{"class":323},[300,4372,4305],{"class":534},[300,4374,4375,4378,4381],{"class":302,"line":327},[300,4376,4377],{"class":316},"[sudo] password ",[300,4379,4380],{"class":312},"for",[300,4382,4383],{"class":316}," colton:\n",[300,4385,4386,4389,4392,4395],{"class":302,"line":333},[300,4387,4388],{"class":534},"::",[300,4390,4391],{"class":323}," Synchronizing",[300,4393,4394],{"class":323}," package",[300,4396,4397],{"class":323}," databases...\n",[11,4399,4400],{},"--",[11,4402,4403,4404,4406,4407,4410,4411,4414],{},"Commands that are prefixed with a bang, ",[56,4405,119],{},", are considered ",[217,4408,4409],{},"Event\nDesignators,"," and are references to your command-line history. You can take a\nlook at your history with the ",[56,4412,4413],{},"history"," command.",[49,4416,4418],{"className":1408,"code":4417,"language":1410,"meta":58,"style":58},"$ history\n 1021  touch hello_world.txt\n 1022  ls\n 1023  echo \"Here we go again!\"\n 1024  find . -name *.py\n",[56,4419,4420,4427,4438,4446,4457],{"__ignoreMap":58},[300,4421,4422,4424],{"class":302,"line":303},[300,4423,1100],{"class":342},[300,4425,4426],{"class":323}," history\n",[300,4428,4429,4432,4435],{"class":302,"line":144},[300,4430,4431],{"class":342}," 1021",[300,4433,4434],{"class":323},"  touch",[300,4436,4437],{"class":323}," hello_world.txt\n",[300,4439,4440,4443],{"class":302,"line":327},[300,4441,4442],{"class":342}," 1022",[300,4444,4445],{"class":323},"  ls\n",[300,4447,4448,4451,4454],{"class":302,"line":333},[300,4449,4450],{"class":342}," 1023",[300,4452,4453],{"class":323},"  echo",[300,4455,4456],{"class":323}," \"Here we go again!\"\n",[300,4458,4459,4462,4465,4468,4471,4474],{"class":302,"line":355},[300,4460,4461],{"class":342}," 1024",[300,4463,4464],{"class":323},"  find",[300,4466,4467],{"class":323}," .",[300,4469,4470],{"class":534}," -name",[300,4472,4473],{"class":534}," *",[300,4475,4476],{"class":323},".py\n",[11,4478,4479,4480,4482,4483,4486,4487,4490],{},"There are many ways to use ",[56,4481,119],{}," in your shell. For example, if you wanted to\nre-issue a specific command in your history, you could use ",[56,4484,4485],{},"!n"," where ",[56,4488,4489],{},"n"," is\nthe number next to the command in your history.",[49,4492,4494],{"className":1408,"code":4493,"language":1410,"meta":58,"style":58},"$ !1023\necho \"Here we go again!\"\nHere we go again!\n",[56,4495,4496,4503,4509],{"__ignoreMap":58},[300,4497,4498,4500],{"class":302,"line":303},[300,4499,1100],{"class":342},[300,4501,4502],{"class":323}," !1023\n",[300,4504,4505,4507],{"class":302,"line":144},[300,4506,3819],{"class":534},[300,4508,4456],{"class":323},[300,4510,4511,4514,4517,4520],{"class":302,"line":327},[300,4512,4513],{"class":342},"Here",[300,4515,4516],{"class":323}," we",[300,4518,4519],{"class":323}," go",[300,4521,4522],{"class":323}," again!\n",[11,4524,4525,4526,1373],{},"Or... if you wanted to run the command you issued 4-commands ago, you can use\n",[56,4527,4528],{},"!-4",[49,4530,4532],{"className":1408,"code":4531,"language":1410,"meta":58,"style":58},"$ !-4\nls\nhello_world.txt\n",[56,4533,4534,4541,4546],{"__ignoreMap":58},[300,4535,4536,4538],{"class":302,"line":303},[300,4537,1100],{"class":342},[300,4539,4540],{"class":323}," !-4\n",[300,4542,4543],{"class":302,"line":144},[300,4544,4545],{"class":342},"ls\n",[300,4547,4548],{"class":302,"line":327},[300,4549,4550],{"class":342},"hello_world.txt\n",[11,4552,4553,4554,4556,4557,1373],{},"Or... if you wanted to run the last command that started with the string\n",[217,4555,2369],{},", you can use ",[56,4558,4559],{},"!find",[49,4561,4563],{"className":1408,"code":4562,"language":1410,"meta":58,"style":58},"$ !find\nfind . -name *.py\n",[56,4564,4565,4572],{"__ignoreMap":58},[300,4566,4567,4569],{"class":302,"line":303},[300,4568,1100],{"class":342},[300,4570,4571],{"class":323}," !find\n",[300,4573,4574,4576,4578,4580,4582],{"class":302,"line":144},[300,4575,2369],{"class":342},[300,4577,4467],{"class":323},[300,4579,4470],{"class":534},[300,4581,4473],{"class":534},[300,4583,4476],{"class":323},[11,4585,4586,4587,4590,4591,2569,4593,4596],{},"Be sure to check out the ",[217,4588,4589],{},"Event Designators"," section of the ",[56,4592,1410],{},[56,4594,4595],{},"man"," pages\nfor more information!",[11,4598,4400],{},[11,4600,4601,4602,4607,4608,4611,4612,4614],{},"As an aside, for even faster command-line history navigation, be sure to check\nout the excellent ",[17,4603,4606],{"href":4604,"rel":4605},"https://github.com/junegunn/fzf",[21],"fzf"," utility by ",[217,4609,4610],{},"junegunn.","\nOne of the many features of ",[56,4613,4606],{}," is browsing and re-issuing commands from your\ncommand-line history with a fuzzy-finder!",[1013,4616,4617],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}",{"title":58,"searchDepth":144,"depth":144,"links":4619},[],[1331],"2021-09-22T00:00:00.000Z","Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use sudo for a command that requires\nroot privileges.",{"draft":1335,"excerpt":4624},{"type":8,"value":4625},[4626],[11,4627,4286,4628,4290],{},[56,4629,4289],{},"/blog/quick-tip-rerunning-bash-commands",{"title":4281,"description":4622},"blog/quick-tip-rerunning-bash-commands",[1528,1410],"GM785ftlQWDjZ21CreT6jksLSt0fCcbCfvgEGxOcwJs",{"id":4636,"title":4637,"body":4638,"categories":4999,"date":5001,"description":4642,"extension":154,"img":155,"meta":5002,"navigation":161,"path":5007,"seo":5008,"stem":5009,"tags":5010,"__hash__":5015},"content/blog/unit-testing-micropython-with-mocks.md","Unit Testing in MicroPython with Mocks",{"type":8,"value":4639,"toc":4996},[4640,4643,4648,4651,4655,4666,4760,4772,4841,4851,4964,4978,4982,4993],[11,4641,4642],{},"Unit testing code for embedded systems can be challenging. While it's possible\nto leverage emulators, write side-effect free code, or run tests on the\nhardware itself, it's often easiest to unit test the code on your personal\ncomputer with mocked hardware functionality.",[4644,4645,4647],"h1",{"id":4646},"mocking","Mocking",[11,4649,4650],{},"Mocks allow us to replace the hardware interfacing functionality under-the-hood\nwith predefined results and side-effects. For example, if there is a piece of\nlogic that retrieves values from an accelerometer to get a device's\norientation, it would be possible to mock the returned values of the\naccelerometer -- allowing us to run the unit tests on a device that does not\nhave an accelerometer sensor installed.",[4644,4652,4654],{"id":4653},"a-micropython-mocking-example","A MicroPython Mocking Example",[11,4656,4657,4658,4661,4662,4665],{},"In this example, we will be unit testing a module named ",[56,4659,4660],{},"time_logger",", that\ndepends on the MicroPython library ",[56,4663,4664],{},"utime"," to log the most recent Epoch time to\na file.",[49,4667,4671],{"className":4668,"code":4669,"language":4670,"meta":58,"style":58},"language-python shiki shiki-themes github-dark","# time_logger.py\n\nclass TimeLogger(object):\n\n    def save_time(self):\n        \"\"\" Overwrite a file with the most recent Epoch timestamp from `utime`\n        \"\"\"\n        with open(\"LAST_KNOWN_TIME\", \"w+\") as f:\n            f.write(str(utime.time()))\n","python",[56,4672,4673,4678,4682,4698,4702,4713,4718,4723,4749],{"__ignoreMap":58},[300,4674,4675],{"class":302,"line":303},[300,4676,4677],{"class":306},"# time_logger.py\n",[300,4679,4680],{"class":302,"line":144},[300,4681,330],{"emptyLinePlaceholder":161},[300,4683,4684,4687,4690,4692,4695],{"class":302,"line":327},[300,4685,4686],{"class":312},"class",[300,4688,4689],{"class":342}," TimeLogger",[300,4691,611],{"class":316},[300,4693,4694],{"class":534},"object",[300,4696,4697],{"class":316},"):\n",[300,4699,4700],{"class":302,"line":333},[300,4701,330],{"emptyLinePlaceholder":161},[300,4703,4704,4707,4710],{"class":302,"line":355},[300,4705,4706],{"class":312},"    def",[300,4708,4709],{"class":342}," save_time",[300,4711,4712],{"class":316},"(self):\n",[300,4714,4715],{"class":302,"line":363},[300,4716,4717],{"class":323},"        \"\"\" Overwrite a file with the most recent Epoch timestamp from `utime`\n",[300,4719,4720],{"class":302,"line":369},[300,4721,4722],{"class":323},"        \"\"\"\n",[300,4724,4725,4728,4731,4733,4736,4738,4741,4743,4746],{"class":302,"line":375},[300,4726,4727],{"class":312},"        with",[300,4729,4730],{"class":534}," open",[300,4732,611],{"class":316},[300,4734,4735],{"class":323},"\"LAST_KNOWN_TIME\"",[300,4737,774],{"class":316},[300,4739,4740],{"class":323},"\"w+\"",[300,4742,587],{"class":316},[300,4744,4745],{"class":312},"as",[300,4747,4748],{"class":316}," f:\n",[300,4750,4751,4754,4757],{"class":302,"line":381},[300,4752,4753],{"class":316},"            f.write(",[300,4755,4756],{"class":534},"str",[300,4758,4759],{"class":316},"(utime.time()))\n",[11,4761,4762,4763,4765,4766,4768,4769,4771],{},"First, because the ",[56,4764,4664],{}," module is not installed on the machine that the unit\ntests on, we must mock ",[56,4767,4664],{}," module before importing ",[56,4770,4660],{}," in our\nunit test file.",[49,4773,4775],{"className":4668,"code":4774,"language":4670,"meta":58,"style":58},"# test_time_logger.py\n\nimport unittest\n\nfrom unittest.mock import MagicMock\n\nsys.modules['utime'] = MagicMock()\nfrom time_logger import TimeLogger\n",[56,4776,4777,4782,4786,4793,4797,4809,4813,4829],{"__ignoreMap":58},[300,4778,4779],{"class":302,"line":303},[300,4780,4781],{"class":306},"# test_time_logger.py\n",[300,4783,4784],{"class":302,"line":144},[300,4785,330],{"emptyLinePlaceholder":161},[300,4787,4788,4790],{"class":302,"line":327},[300,4789,313],{"class":312},[300,4791,4792],{"class":316}," unittest\n",[300,4794,4795],{"class":302,"line":333},[300,4796,330],{"emptyLinePlaceholder":161},[300,4798,4799,4801,4804,4806],{"class":302,"line":355},[300,4800,320],{"class":312},[300,4802,4803],{"class":316}," unittest.mock ",[300,4805,313],{"class":312},[300,4807,4808],{"class":316}," MagicMock\n",[300,4810,4811],{"class":302,"line":363},[300,4812,330],{"emptyLinePlaceholder":161},[300,4814,4815,4818,4821,4824,4826],{"class":302,"line":369},[300,4816,4817],{"class":316},"sys.modules[",[300,4819,4820],{"class":323},"'utime'",[300,4822,4823],{"class":316},"] ",[300,4825,468],{"class":312},[300,4827,4828],{"class":316}," MagicMock()\n",[300,4830,4831,4833,4836,4838],{"class":302,"line":375},[300,4832,320],{"class":312},[300,4834,4835],{"class":316}," time_logger ",[300,4837,313],{"class":312},[300,4839,4840],{"class":316}," TimeLogger\n",[11,4842,4843,4844,4847,4848,1373],{},"Then, we can write a test that patches the ",[56,4845,4846],{},"utime.time"," functionality so that\nit returns a value of our choosing -- in this case, ",[56,4849,4850],{},"1234",[49,4852,4854],{"className":4668,"code":4853,"language":4670,"meta":58,"style":58},"class TestTimeLogger(unittest.TestCase):\n\n    def test_save_time(self):\n        \"\"\" Verify that the Epoch time is written to file\n        \"\"\"\n        with unittest.mock.patch(\"utime.time\", return_value=1234):\n            t = TimeLogger()\n            t.save_time()\n            with open(\"LAST_KNOWN_TIME\") as f:\n                self.assertEqual(\"1234\", f.read())\n",[56,4855,4856,4875,4879,4888,4893,4897,4918,4928,4933,4950],{"__ignoreMap":58},[300,4857,4858,4860,4863,4865,4868,4870,4873],{"class":302,"line":303},[300,4859,4686],{"class":312},[300,4861,4862],{"class":342}," TestTimeLogger",[300,4864,611],{"class":316},[300,4866,4867],{"class":342},"unittest",[300,4869,1373],{"class":316},[300,4871,4872],{"class":342},"TestCase",[300,4874,4697],{"class":316},[300,4876,4877],{"class":302,"line":144},[300,4878,330],{"emptyLinePlaceholder":161},[300,4880,4881,4883,4886],{"class":302,"line":327},[300,4882,4706],{"class":312},[300,4884,4885],{"class":342}," test_save_time",[300,4887,4712],{"class":316},[300,4889,4890],{"class":302,"line":333},[300,4891,4892],{"class":323},"        \"\"\" Verify that the Epoch time is written to file\n",[300,4894,4895],{"class":302,"line":355},[300,4896,4722],{"class":323},[300,4898,4899,4901,4904,4907,4909,4912,4914,4916],{"class":302,"line":363},[300,4900,4727],{"class":312},[300,4902,4903],{"class":316}," unittest.mock.patch(",[300,4905,4906],{"class":323},"\"utime.time\"",[300,4908,774],{"class":316},[300,4910,4911],{"class":583},"return_value",[300,4913,468],{"class":312},[300,4915,4850],{"class":534},[300,4917,4697],{"class":316},[300,4919,4920,4923,4925],{"class":302,"line":369},[300,4921,4922],{"class":316},"            t ",[300,4924,468],{"class":312},[300,4926,4927],{"class":316}," TimeLogger()\n",[300,4929,4930],{"class":302,"line":375},[300,4931,4932],{"class":316},"            t.save_time()\n",[300,4934,4935,4938,4940,4942,4944,4946,4948],{"class":302,"line":381},[300,4936,4937],{"class":312},"            with",[300,4939,4730],{"class":534},[300,4941,611],{"class":316},[300,4943,4735],{"class":323},[300,4945,587],{"class":316},[300,4947,4745],{"class":312},[300,4949,4748],{"class":316},[300,4951,4952,4955,4958,4961],{"class":302,"line":387},[300,4953,4954],{"class":534},"                self",[300,4956,4957],{"class":316},".assertEqual(",[300,4959,4960],{"class":323},"\"1234\"",[300,4962,4963],{"class":316},", f.read())\n",[11,4965,4966,4967,4970,4971,4974,4975,4977],{},"Now, when the ",[56,4968,4969],{},"save_time"," method gets the latest time from ",[56,4972,4973],{},"utime.time()",", the\nvalue will be patched to return ",[56,4976,4850],{},". That value will be written to a file,\nand our unit test will pass!",[23,4979,4981],{"id":4980},"references","References",[4066,4983,4984],{},[197,4985,4986],{},[17,4987,4990,4992],{"href":4988,"rel":4989},"https://docs.python.org/3/library/unittest.html",[21],[56,4991,4867],{}," — Unit testing framework",[1013,4994,4995],{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}",{"title":58,"searchDepth":144,"depth":144,"links":4997},[4998],{"id":4980,"depth":144,"text":4981},[4670,5000],"embedded","2020-02-07T00:00:00.000Z",{"draft":1335,"excerpt":5003},{"type":8,"value":5004},[5005],[11,5006,4642],{},"/blog/unit-testing-micropython-with-mocks",{"title":4637,"description":4642},"blog/unit-testing-micropython-with-mocks",[5011,5012,5013,5014],"micropython","testing","mocks","tutorial","SKZdic9alE5hreDfifqpEQtIogev8oC7Be--P0F4nwY",{"id":5017,"title":5018,"body":5019,"categories":5791,"date":5792,"description":5023,"extension":154,"img":155,"meta":5793,"navigation":161,"path":5798,"seo":5799,"stem":5800,"tags":5801,"__hash__":5803},"content/blog/persistent-archlinux-usb.md","Create a Persistent Arch Linux Bootable USB with Vagrant",{"type":8,"value":5020,"toc":5780},[5021,5024,5026,5051,5053,5057,5068,5087,5094,5109,5140,5197,5204,5214,5369,5373,5381,5386,5401,5474,5478,5488,5511,5525,5545,5549,5581,5619,5623,5629,5635,5641,5655,5661,5664,5667,5671,5688,5707,5709,5777],[11,5022,5023],{},"When installing a linux distribution, it is common for the instructions to have\nthe user create a bootable USB, boot from the device, and proceed with the\ninstallation procedure from that live medium. However, this blog post will\noutline an alternative approach where a virtual machine created with Vagrant\nwill be used in favor of the live medium.",[4644,5025,1377],{"id":1376},[11,5027,5028,5029,5032,5033,5050],{},"The original intention was to use Docker for this process -- leveraging the\n",[56,5030,5031],{},"--device"," flag and mounting the target USB device in the Docker container,\nbut the underlying hypervisor in Docker Desktop for Mac does not support this.\n",[5034,5035,5036,2569,5041,2569,5045],"sup",{},[17,5037,5040],{"href":5038,"rel":5039},"https://docs.docker.com/docker-for-mac/docker-toolbox/",[21],"1",[17,5042,4209],{"href":5043,"rel":5044},"https://github.com/moby/hyperkit",[21],[17,5046,5049],{"href":5047,"rel":5048},"https://github.com/docker/for-mac/issues/900",[21],"3"," While there are workarounds using Docker\nMachine, Vagrant felt like the path of least resistance.",[4644,5052,1990],{"id":1989},[23,5054,5056],{"id":5055},"create-an-arch-linux-virtual-machine-with-vagrant","Create an Arch Linux Virtual Machine with Vagrant",[11,5058,5059,5060,5067],{},"Get the latest Arch Linux image ",[5034,5061,5062],{},[17,5063,5066],{"href":5064,"rel":5065},"https://app.vagrantup.com/archlinux/boxes/archlinux",[21],"4"," from the Vagrant Cloud Box\nCatalog.",[49,5069,5071],{"className":1408,"code":5070,"language":1410,"meta":58,"style":58},"vagrant box add archlinux/archlinux\n",[56,5072,5073],{"__ignoreMap":58},[300,5074,5075,5078,5081,5084],{"class":302,"line":303},[300,5076,5077],{"class":342},"vagrant",[300,5079,5080],{"class":323}," box",[300,5082,5083],{"class":323}," add",[300,5085,5086],{"class":323}," archlinux/archlinux\n",[11,5088,5089,5090,5093],{},"Determine the USB vendor information for the thumb-drive that we will\npass-through to the virtual machine. Using the ",[56,5091,5092],{},"VBoxManage"," utility that comes\nwith Virtual Box, list the devices, and make note of the Vendor and Product ID.",[49,5095,5097],{"className":1408,"code":5096,"language":1410,"meta":58,"style":58}," VBoxManage list usbhost\n",[56,5098,5099],{"__ignoreMap":58},[300,5100,5101,5104,5106],{"class":302,"line":303},[300,5102,5103],{"class":342}," VBoxManage",[300,5105,3681],{"class":323},[300,5107,5108],{"class":323}," usbhost\n",[11,5110,5111,5112,5115,5116,5119,5120,5132,5133,5136,5137,5139],{},"Create a ",[56,5113,5114],{},"Vagrantfile"," with ",[56,5117,5118],{},"archlinx/archlinux"," as the target box, and the USB\ndevice information that is passed through. ",[5034,5121,5122,2569,5127],{},[17,5123,5126],{"href":5124,"rel":5125},"https://antonyjepson.wordpress.com/2012/01/26/quickly-attaching-usb-devices-to-virtualbox-guests-using-vboxmanage/",[21],"5",[17,5128,5131],{"href":5129,"rel":5130},"https://gist.github.com/dscape/7d829c0c116ef419f963",[21],"6"," Vagrant\noffers a handy customization parameter ",[56,5134,5135],{},"vb.customize"," that calls the\n",[56,5138,5092],{}," command under-the-hood, allowing one to enable the guest machine\nto access the host machine's USB devices.",[49,5141,5143],{"className":1259,"code":5142,"language":1261,"meta":58,"style":58},"# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"archlinux/archlinux\"\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.name = \"archlinux\"\n    vb.customize ['modifyvm', :id, '--usb', 'on']\n    vb.customize ['usbfilter', 'add', '1', '--target', :id, '--name', 'SanDisk Ultra Fit', '--vendorid', '0x0781', '--productid', '0x5583']\n  end\nend\n",[56,5144,5145,5150,5155,5159,5164,5169,5174,5179,5184,5189,5193],{"__ignoreMap":58},[300,5146,5147],{"class":302,"line":303},[300,5148,5149],{},"# -*- mode: ruby -*-\n",[300,5151,5152],{"class":302,"line":144},[300,5153,5154],{},"# vi: set ft=ruby :\n",[300,5156,5157],{"class":302,"line":327},[300,5158,330],{"emptyLinePlaceholder":161},[300,5160,5161],{"class":302,"line":333},[300,5162,5163],{},"Vagrant.configure(\"2\") do |config|\n",[300,5165,5166],{"class":302,"line":355},[300,5167,5168],{},"  config.vm.box = \"archlinux/archlinux\"\n",[300,5170,5171],{"class":302,"line":363},[300,5172,5173],{},"  config.vm.provider \"virtualbox\" do |vb|\n",[300,5175,5176],{"class":302,"line":369},[300,5177,5178],{},"    vb.name = \"archlinux\"\n",[300,5180,5181],{"class":302,"line":375},[300,5182,5183],{},"    vb.customize ['modifyvm', :id, '--usb', 'on']\n",[300,5185,5186],{"class":302,"line":381},[300,5187,5188],{},"    vb.customize ['usbfilter', 'add', '1', '--target', :id, '--name', 'SanDisk Ultra Fit', '--vendorid', '0x0781', '--productid', '0x5583']\n",[300,5190,5191],{"class":302,"line":387},[300,5192,3437],{},[300,5194,5195],{"class":302,"line":556},[300,5196,3227],{},[11,5198,5199,5200,5203],{},"When virtual machine is brought up, the ",[56,5201,5202],{},"usbfilter"," is applied, and the guest\nis able to access to the host machine's USB device that was specified in the\nfilter.",[11,5205,5206,5207,5209,5210,5213],{},"Start the machine, ",[56,5208,1319],{}," into the guest, and list the devices to confirm that\nthe USB device is available (see: ",[56,5211,5212],{},"/dev/sdb",").",[49,5215,5217],{"className":1408,"code":5216,"language":1410,"meta":58,"style":58},"$ vagrant up\n$ vagrant ssh\n[vagrant@archlinux ~]$ lsblk\nNAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda      8:0    0   20G  0 disk\n├─sda1   8:1    0  1.9G  0 part [SWAP]\n└─sda2   8:2    0 18.1G  0 part /\nsdb      8:16   1 28.7G  0 disk\n└─sdb1   8:17   1    8G  0 part\n",[56,5218,5219,5229,5238,5249,5272,5292,5313,5333,5351],{"__ignoreMap":58},[300,5220,5221,5223,5226],{"class":302,"line":303},[300,5222,1100],{"class":342},[300,5224,5225],{"class":323}," vagrant",[300,5227,5228],{"class":323}," up\n",[300,5230,5231,5233,5235],{"class":302,"line":144},[300,5232,1100],{"class":342},[300,5234,5225],{"class":323},[300,5236,5237],{"class":323}," ssh\n",[300,5239,5240,5243,5246],{"class":302,"line":327},[300,5241,5242],{"class":316},"[vagrant@archlinux ",[300,5244,5245],{"class":312},"~",[300,5247,5248],{"class":316},"]$ lsblk\n",[300,5250,5251,5254,5257,5260,5263,5266,5269],{"class":302,"line":333},[300,5252,5253],{"class":342},"NAME",[300,5255,5256],{"class":323},"   MAJ:MIN",[300,5258,5259],{"class":323}," RM",[300,5261,5262],{"class":323},"  SIZE",[300,5264,5265],{"class":323}," RO",[300,5267,5268],{"class":323}," TYPE",[300,5270,5271],{"class":323}," MOUNTPOINT\n",[300,5273,5274,5277,5280,5283,5286,5289],{"class":302,"line":355},[300,5275,5276],{"class":342},"sda",[300,5278,5279],{"class":323},"      8:0",[300,5281,5282],{"class":534},"    0",[300,5284,5285],{"class":323},"   20G",[300,5287,5288],{"class":534},"  0",[300,5290,5291],{"class":323}," disk\n",[300,5293,5294,5297,5300,5302,5305,5307,5310],{"class":302,"line":363},[300,5295,5296],{"class":342},"├─sda1",[300,5298,5299],{"class":323},"   8:1",[300,5301,5282],{"class":534},[300,5303,5304],{"class":323},"  1.9G",[300,5306,5288],{"class":534},[300,5308,5309],{"class":323}," part",[300,5311,5312],{"class":316}," [SWAP]\n",[300,5314,5315,5318,5321,5323,5326,5328,5330],{"class":302,"line":369},[300,5316,5317],{"class":342},"└─sda2",[300,5319,5320],{"class":323},"   8:2",[300,5322,5282],{"class":534},[300,5324,5325],{"class":323}," 18.1G",[300,5327,5288],{"class":534},[300,5329,5309],{"class":323},[300,5331,5332],{"class":323}," /\n",[300,5334,5335,5338,5341,5344,5347,5349],{"class":302,"line":375},[300,5336,5337],{"class":342},"sdb",[300,5339,5340],{"class":323},"      8:16",[300,5342,5343],{"class":534},"   1",[300,5345,5346],{"class":323}," 28.7G",[300,5348,5288],{"class":534},[300,5350,5291],{"class":323},[300,5352,5353,5356,5359,5361,5364,5366],{"class":302,"line":381},[300,5354,5355],{"class":342},"└─sdb1",[300,5357,5358],{"class":323},"   8:17",[300,5360,5343],{"class":534},[300,5362,5363],{"class":323},"    8G",[300,5365,5288],{"class":534},[300,5367,5368],{"class":323}," part\n",[23,5370,5372],{"id":5371},"install-arch-linux-on-the-usb-drive","Install Arch Linux on the USB Drive",[11,5374,2949,5375,5380],{},[17,5376,5379],{"href":5377,"rel":5378},"https://wiki.archlinux.org/index.php/Installation_guide",[21],"Arch Linux Installation Guide"," outlines the installation procedure in\ngreat detail -- the following steps follow this closely with a few alteration\ndue to installing onto removable media.",[5382,5383,5385],"h3",{"id":5384},"partition-the-disk-uefi-with-gpt","Partition the Disk (UEFI with GPT)",[49,5387,5389],{"className":1408,"code":5388,"language":1410,"meta":58,"style":58},"[root@archlinux ~]# fdisk /dev/sdb\n",[56,5390,5391],{"__ignoreMap":58},[300,5392,5393,5396,5398],{"class":302,"line":303},[300,5394,5395],{"class":316},"[root@archlinux ",[300,5397,5245],{"class":312},[300,5399,5400],{"class":316},"]# fdisk /dev/sdb\n",[49,5402,5404],{"className":1259,"code":5403,"language":1261,"meta":58,"style":58},"Command (m for help): p\nDisk /dev/sdb: 28.66 GiB, 30752636928 bytes, 60063744 sectors\nDisk model: Ultra Fit\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: gpt\nDisk identifier: E1D6C445-1B79-AB4D-A442-FA4AD6DF4ECC\n\nDevice       Start      End  Sectors  Size Type\n/dev/sdb1     2048  1050623  1048576  512M EFI System\n/dev/sdb2  1050624 60063710 59013087 28.1G Linux filesystem\n\nFilesystem/RAID signature on partition 1 will be wiped.\n",[56,5405,5406,5411,5416,5421,5426,5431,5436,5441,5446,5450,5455,5460,5465,5469],{"__ignoreMap":58},[300,5407,5408],{"class":302,"line":303},[300,5409,5410],{},"Command (m for help): p\n",[300,5412,5413],{"class":302,"line":144},[300,5414,5415],{},"Disk /dev/sdb: 28.66 GiB, 30752636928 bytes, 60063744 sectors\n",[300,5417,5418],{"class":302,"line":327},[300,5419,5420],{},"Disk model: Ultra Fit\n",[300,5422,5423],{"class":302,"line":333},[300,5424,5425],{},"Units: sectors of 1 * 512 = 512 bytes\n",[300,5427,5428],{"class":302,"line":355},[300,5429,5430],{},"Sector size (logical/physical): 512 bytes / 512 bytes\n",[300,5432,5433],{"class":302,"line":363},[300,5434,5435],{},"I/O size (minimum/optimal): 512 bytes / 512 bytes\n",[300,5437,5438],{"class":302,"line":369},[300,5439,5440],{},"Disklabel type: gpt\n",[300,5442,5443],{"class":302,"line":375},[300,5444,5445],{},"Disk identifier: E1D6C445-1B79-AB4D-A442-FA4AD6DF4ECC\n",[300,5447,5448],{"class":302,"line":381},[300,5449,330],{"emptyLinePlaceholder":161},[300,5451,5452],{"class":302,"line":387},[300,5453,5454],{},"Device       Start      End  Sectors  Size Type\n",[300,5456,5457],{"class":302,"line":556},[300,5458,5459],{},"/dev/sdb1     2048  1050623  1048576  512M EFI System\n",[300,5461,5462],{"class":302,"line":568},[300,5463,5464],{},"/dev/sdb2  1050624 60063710 59013087 28.1G Linux filesystem\n",[300,5466,5467],{"class":302,"line":594},[300,5468,330],{"emptyLinePlaceholder":161},[300,5470,5471],{"class":302,"line":619},[300,5472,5473],{},"Filesystem/RAID signature on partition 1 will be wiped.\n",[5382,5475,5477],{"id":5476},"format-the-partitions","Format the Partitions",[11,5479,5480,5481],{},"The UEFI specification mandates support for FAT file-systems, and FAT32 is\nrecommended for removable media. ",[5034,5482,5483],{},[17,5484,5487],{"href":5485,"rel":5486},"https://wiki.archlinux.org/index.php/EFI_system_partition#Format_the_partition",[21],"7",[49,5489,5491],{"className":1408,"code":5490,"language":1410,"meta":58,"style":58},"[root@archlinux ~]# pacman -Sy dosfstools\n[root@archlinux ~]# mkfs.fat -F32 /dev/sdb1\n",[56,5492,5493,5502],{"__ignoreMap":58},[300,5494,5495,5497,5499],{"class":302,"line":303},[300,5496,5395],{"class":316},[300,5498,5245],{"class":312},[300,5500,5501],{"class":316},"]# pacman -Sy dosfstools\n",[300,5503,5504,5506,5508],{"class":302,"line":144},[300,5505,5395],{"class":316},[300,5507,5245],{"class":312},[300,5509,5510],{"class":316},"]# mkfs.fat -F32 /dev/sdb1\n",[11,5512,5513,5514,5517,5518],{},"As for the root partition, it is recommended to use ",[56,5515,5516],{},"ext4"," without a journal to\nreduce the reads and writes to the file-system as this is detrimental to the\nflash-based USB drive. ",[5034,5519,5520],{},[17,5521,5524],{"href":5522,"rel":5523},"https://wiki.archlinux.org/index.php/Install_Arch_Linux_on_a_USB_key#Installation_tweaks",[21],"8",[49,5526,5528],{"className":1408,"code":5527,"language":1410,"meta":58,"style":58},"[root@archlinux ~]# mkfs.ext4 -O \"^has_journal\" /dev/sdb2\n",[56,5529,5530],{"__ignoreMap":58},[300,5531,5532,5534,5536,5539,5542],{"class":302,"line":303},[300,5533,5395],{"class":316},[300,5535,5245],{"class":312},[300,5537,5538],{"class":316},"]# mkfs.ext4 -O ",[300,5540,5541],{"class":323},"\"^has_journal\"",[300,5543,5544],{"class":316}," /dev/sdb2\n",[5382,5546,5548],{"id":5547},"mount-the-partitions-and-bootstrap-the-environment","Mount the Partitions and Bootstrap the Environment",[49,5550,5552],{"className":1408,"code":5551,"language":1410,"meta":58,"style":58},"[root@archlinux ~]# mount /dev/sdb2 /mnt\n[root@archlinux ~]# mkdir -p /mnt/boot/efi\n[root@archlinux ~]# mount /dev/sdb1 /mnt/boot/efi\n",[56,5553,5554,5563,5572],{"__ignoreMap":58},[300,5555,5556,5558,5560],{"class":302,"line":303},[300,5557,5395],{"class":316},[300,5559,5245],{"class":312},[300,5561,5562],{"class":316},"]# mount /dev/sdb2 /mnt\n",[300,5564,5565,5567,5569],{"class":302,"line":144},[300,5566,5395],{"class":316},[300,5568,5245],{"class":312},[300,5570,5571],{"class":316},"]# mkdir -p /mnt/boot/efi\n",[300,5573,5574,5576,5578],{"class":302,"line":327},[300,5575,5395],{"class":316},[300,5577,5245],{"class":312},[300,5579,5580],{"class":316},"]# mount /dev/sdb1 /mnt/boot/efi\n",[49,5582,5584],{"className":1408,"code":5583,"language":1410,"meta":58,"style":58},"[root@archlinux ~]# pacman -S arch-install-scripts\n[root@archlinux ~]# pacstrap /mnt base linux linux-firmware\n[root@archlinux ~]# genfstab -U /mnt >> /mnt/etc/fstab\n",[56,5585,5586,5595,5604],{"__ignoreMap":58},[300,5587,5588,5590,5592],{"class":302,"line":303},[300,5589,5395],{"class":316},[300,5591,5245],{"class":312},[300,5593,5594],{"class":316},"]# pacman -S arch-install-scripts\n",[300,5596,5597,5599,5601],{"class":302,"line":144},[300,5598,5395],{"class":316},[300,5600,5245],{"class":312},[300,5602,5603],{"class":316},"]# pacstrap /mnt base linux linux-firmware\n",[300,5605,5606,5608,5610,5613,5616],{"class":302,"line":327},[300,5607,5395],{"class":316},[300,5609,5245],{"class":312},[300,5611,5612],{"class":316},"]# genfstab -U /mnt ",[300,5614,5615],{"class":312},">>",[300,5617,5618],{"class":316}," /mnt/etc/fstab\n",[5382,5620,5622],{"id":5621},"configure-the-new-environment","Configure the New Environment",[49,5624,5627],{"className":5625,"code":5626,"language":54},[52],"[root@archlinux ~]# arch-chroot /mnt\n",[56,5628,5626],{"__ignoreMap":58},[49,5630,5633],{"className":5631,"code":5632,"language":54},[52],"[root@archlinux /]# ln -sf /usr/share/zoneinfo/US/Eastern /etc/localtime\n[root@archlinux /]# hwclock --systohc\n[root@archlinux /]# sed -i 's/#en_US.UTF-8/en_US.UTF-8/' /etc/locale.gen\n[root@archlinux /]# locale-gen\n[root@archlinux /]# echo \"LANG=en_US.UTF-8\" > /etc/locale.conf\n",[56,5634,5632],{"__ignoreMap":58},[49,5636,5639],{"className":5637,"code":5638,"language":54},[52],"[root@archlinux /]# hostnamectl set-hostname usb\n[root@archlinux /]# echo \"127.0.0.1        localhost\" >> /etc/hosts\n[root@archlinux /]# echo \"::1              localhost\" >> /etc/hosts\n",[56,5640,5638],{"__ignoreMap":58},[11,5642,5643,5644,5647,5648],{},"Note, one difference here from a standard installation is that the\n",[56,5645,5646],{},"--removable"," flag is specified when installing the GRUB bootloader.\n",[5034,5649,5650],{},[17,5651,5654],{"href":5652,"rel":5653},"https://wiki.archlinux.org/index.php/GRUB#UEFI_systems",[21],"10",[49,5656,5659],{"className":5657,"code":5658,"language":54},[52],"[root@archlinux /]# pacman -S grub\n[root@archlinux /]# grub-install --target=x86_64-efi --efi-directory=/boot/efi  --removable --recheck\n[root@usb /]# grub-mkconfig -o /boot/grub/grub.cfg\n",[56,5660,5658],{"__ignoreMap":58},[11,5662,5663],{},"Shutdown the virtual machine, restart the host machine, and boot the newly\ncreated Arch Linux thumb-drive!",[11,5665,5666],{},"🎉",[23,5668,5670],{"id":5669},"side-note","Side-note",[11,5672,5673,5674,5677,5678,5680,5681],{},"It was attempted to use the ",[56,5675,5676],{},"controlvm usbattach"," command to pass the USB\ndevice to the guest machine, but this did not work as it expects the virtual\nmachine to already be running, and the ",[56,5679,5135],{}," option runs prior to\nbooting the machine. ",[5034,5682,5683],{},[17,5684,5687],{"href":5685,"rel":5686},"https://www.vagrantup.com/docs/virtualbox/configuration.html#vboxmanage-customizations",[21],"11",[49,5689,5691],{"className":1259,"code":5690,"language":1261,"meta":58,"style":58},"Command: [\"controlvm\", \"060a716b-1965-49e2-bc56-12beed5df716\", \"usbattach36fc9e60-c465-11cf-8056-444553540000\"]\n\nStderr: VBoxManage.exe: error: Machine '060a716b-1965-49e2-bc56-12beed5df716' is not currently running.\n",[56,5692,5693,5698,5702],{"__ignoreMap":58},[300,5694,5695],{"class":302,"line":303},[300,5696,5697],{},"Command: [\"controlvm\", \"060a716b-1965-49e2-bc56-12beed5df716\", \"usbattach36fc9e60-c465-11cf-8056-444553540000\"]\n",[300,5699,5700],{"class":302,"line":144},[300,5701,330],{"emptyLinePlaceholder":161},[300,5703,5704],{"class":302,"line":327},[300,5705,5706],{},"Stderr: VBoxManage.exe: error: Machine '060a716b-1965-49e2-bc56-12beed5df716' is not currently running.\n",[23,5708,4981],{"id":4980},[4066,5710,5711,5717,5723,5729,5735,5741,5747,5753,5759,5765,5771],{},[197,5712,5713],{},[17,5714,5716],{"href":5038,"rel":5715},[21],"Docker Desktop on Mac vs. Docker Toolbox",[197,5718,5719],{},[17,5720,5722],{"href":5043,"rel":5721},[21],"GitHub - HyperKit",[197,5724,5725],{},[17,5726,5728],{"href":5047,"rel":5727},[21],"GitHub - Docker for Mac - Issue #900",[197,5730,5731],{},[17,5732,5734],{"href":5064,"rel":5733},[21],"Vagrant Cloud - Arch Linux",[197,5736,5737],{},[17,5738,5740],{"href":5124,"rel":5739},[21],"Attaching USB Devices to VirtualBox Guests using VBoxManage",[197,5742,5743],{},[17,5744,5746],{"href":5129,"rel":5745},[21],"GitHub Gist - Vagrant USB Filter",[197,5748,5749],{},[17,5750,5752],{"href":5485,"rel":5751},[21],"Arch Linux Wiki - EFI System Partition - Format Partitions",[197,5754,5755],{},[17,5756,5758],{"href":5522,"rel":5757},[21],"Arch Linux Wiki - Arch Linux on USB - Installation Tweaks",[197,5760,5761],{},[17,5762,5764],{"href":5377,"rel":5763},[21],"Arch Linux Wiki - Installation Guide",[197,5766,5767],{},[17,5768,5770],{"href":5652,"rel":5769},[21],"Arch Linux Wiki - GRUB - UEFI Systems",[197,5772,5773],{},[17,5774,5776],{"href":5685,"rel":5775},[21],"Vagrant VBoxManage Customizations ",[1013,5778,5779],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}",{"title":58,"searchDepth":144,"depth":144,"links":5781},[5782,5783,5789,5790],{"id":5055,"depth":144,"text":5056},{"id":5371,"depth":144,"text":5372,"children":5784},[5785,5786,5787,5788],{"id":5384,"depth":327,"text":5385},{"id":5476,"depth":327,"text":5477},{"id":5547,"depth":327,"text":5548},{"id":5621,"depth":327,"text":5622},{"id":5669,"depth":144,"text":5670},{"id":4980,"depth":144,"text":4981},[3954],"2020-01-09T00:00:00.000Z",{"draft":1335,"excerpt":5794},{"type":8,"value":5795},[5796],[11,5797,5023],{},"/blog/persistent-archlinux-usb",{"title":5018,"description":5023},"blog/persistent-archlinux-usb",[5077,5802],"archlinux","JYhD1S0bmBi6XNGS-w38u1W-vg2AeQNPDVK_a8zi9fo",{"id":5805,"title":5806,"body":5807,"categories":5920,"date":5921,"description":5811,"extension":154,"img":155,"meta":5922,"navigation":161,"path":5927,"seo":5928,"stem":5929,"tags":5930,"__hash__":5933},"content/blog/docker-selinux-volumes.md","Docker Volume Permissions with SELinux",{"type":8,"value":5808,"toc":5918},[5809,5812,5821,5824,5866,5877,5883,5886,5894,5899,5915],[11,5810,5811],{},"Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes.",[49,5813,5815],{"className":1259,"code":5814,"language":1261,"meta":58,"style":58},"mkdir: can't create directory '/data': Permission denied\n",[56,5816,5817],{"__ignoreMap":58},[300,5818,5819],{"class":302,"line":303},[300,5820,5814],{},[5822,5823],"hr",{},[49,5825,5827],{"className":1408,"code":5826,"language":1410,"meta":58,"style":58},"$ docker info --format '{{json .SecurityOptions}}'\n[\n  \"name=seccomp,profile=/etc/docker/seccomp.json\",\n  \"name=selinux\"\n]\n",[56,5828,5829,5845,5850,5857,5862],{"__ignoreMap":58},[300,5830,5831,5833,5836,5839,5842],{"class":302,"line":303},[300,5832,1100],{"class":342},[300,5834,5835],{"class":323}," docker",[300,5837,5838],{"class":323}," info",[300,5840,5841],{"class":534}," --format",[300,5843,5844],{"class":323}," '{{json .SecurityOptions}}'\n",[300,5846,5847],{"class":302,"line":144},[300,5848,5849],{"class":316},"[\n",[300,5851,5852,5855],{"class":302,"line":327},[300,5853,5854],{"class":323},"  \"name=seccomp,profile=/etc/docker/seccomp.json\"",[300,5856,2174],{"class":316},[300,5858,5859],{"class":302,"line":333},[300,5860,5861],{"class":323},"  \"name=selinux\"\n",[300,5863,5864],{"class":302,"line":355},[300,5865,2610],{"class":316},[11,5867,5868,5869,5872,5873,5876],{},"It turns out that this can be resolved by appending the ",[56,5870,5871],{},":z"," flag to the volume\nmappings in the ",[56,5874,5875],{},"docker-compose.yml"," file, indicating that the volume content\nis shared.",[49,5878,5881],{"className":5879,"code":5880,"language":54},[52],"services:\n  server:\n    volumes:\n      - ./data:/data:z\n",[56,5882,5880],{"__ignoreMap":58},[11,5884,5885],{},"From the Docker documentation:",[268,5887,5888],{},[11,5889,2949,5890,5893],{},[56,5891,5892],{},"z"," option tells Docker that two containers share the volume content. As\na result, Docker labels the content with a shared content label. Shared\nvolume labels allow all containers to read/write content.",[11,5895,5896],{},[5897,5898,4981],"strong",{},[194,5900,5901,5908],{},[197,5902,5903],{},[17,5904,5907],{"href":5905,"rel":5906},"https://docs.docker.com/engine/reference/commandline/info/",[21],"Docker Docs: Docker Info",[197,5909,5910],{},[17,5911,5914],{"href":5912,"rel":5913},"https://docs.docker.com/engine/reference/commandline/run/#mount-volumes-from-container---volumes-from",[21],"Docker Docs: Mounting Volumes",[1013,5916,5917],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}",{"title":58,"searchDepth":144,"depth":144,"links":5919},[],[3954],"2019-12-26T00:00:00.000Z",{"draft":1335,"excerpt":5923},{"type":8,"value":5924},[5925],[11,5926,5811],{},"/blog/docker-selinux-volumes",{"title":5806,"description":5811},"blog/docker-selinux-volumes",[5931,5932],"docker","selinux","iD3JsJaS5O8jgZpBq_Z75Z2KFQaJaWhmQoS-l0kiPj8",{"id":5935,"title":5936,"body":5937,"categories":6092,"date":6093,"description":6094,"extension":154,"img":155,"meta":6095,"navigation":161,"path":6105,"seo":6106,"stem":6107,"tags":6108,"__hash__":6111},"content/blog/apu2-firmware-upgrade.md","Upgrading the Firmware on the PCEngines APU2",{"type":8,"value":5938,"toc":6090},[5939,5948,5951,5954,5960,5975,6003,6010,6025,6028,6052,6057,6087],[11,5940,5941,5942,5947],{},"I've had a ",[17,5943,5946],{"href":5944,"rel":5945},"https://pcengines.ch/apu2.htm",[21],"PCEngines APU2"," gathering dust for a\nfew years, and have recently decided to dust it off.",[11,5949,5950],{},"Since the last time the device has been powered on, there have been many great\nimprovements to the firmware, and it was very-much due for an upgrade. The\nfollowing steps outline how the firmware was upgraded on the APU from the\nalready-installed operating system -- CentOS.",[11,5952,5953],{},"First, we will connect to the device over the serial port",[49,5955,5958],{"className":5956,"code":5957,"language":54},[52],"screen /dev/tty.usbserial 115200\n",[56,5959,5957],{"__ignoreMap":58},[11,5961,5962,5963,5966,5967,5970,5971,5974],{},"Then, we will install the ",[56,5964,5965],{},"flashrom"," utility that is needed to update the\nfirmware. Because it is not available in the default ",[56,5968,5969],{},"yum"," repositories, we\nwill enable the ",[217,5972,5973],{},"Extra Packages for Enterprise Linux"," (EPEL) repository before\ninstallation.",[49,5976,5978],{"className":1408,"code":5977,"language":1410,"meta":58,"style":58},"sudo yum install epel-release\nsudo yum install flashrom\n",[56,5979,5980,5992],{"__ignoreMap":58},[300,5981,5982,5984,5987,5989],{"class":302,"line":303},[300,5983,4289],{"class":342},[300,5985,5986],{"class":323}," yum",[300,5988,1106],{"class":323},[300,5990,5991],{"class":323}," epel-release\n",[300,5993,5994,5996,5998,6000],{"class":302,"line":144},[300,5995,4289],{"class":342},[300,5997,5986],{"class":323},[300,5999,1106],{"class":323},[300,6001,6002],{"class":323}," flashrom\n",[11,6004,6005,6006,1373],{},"Next, we will download the latest version of the firmware that is compatible\nwith the APU2 device from the PC Engines release website:\n",[17,6007,6008],{"href":6008,"rel":6009},"https://pcengines.github.io/",[21],[49,6011,6013],{"className":1408,"code":6012,"language":1410,"meta":58,"style":58},"curl -O https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom\n",[56,6014,6015],{"__ignoreMap":58},[300,6016,6017,6020,6022],{"class":302,"line":303},[300,6018,6019],{"class":342},"curl",[300,6021,1192],{"class":534},[300,6023,6024],{"class":323}," https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom\n",[11,6026,6027],{},"And finally, we will flash the firmware...",[49,6029,6031],{"className":1408,"code":6030,"language":1410,"meta":58,"style":58},"sudo flashrom -w apu2_v4.11.0.1.rom -p internal:boardmismatch=force\n",[56,6032,6033],{"__ignoreMap":58},[300,6034,6035,6037,6040,6043,6046,6049],{"class":302,"line":303},[300,6036,4289],{"class":342},[300,6038,6039],{"class":323}," flashrom",[300,6041,6042],{"class":534}," -w",[300,6044,6045],{"class":323}," apu2_v4.11.0.1.rom",[300,6047,6048],{"class":534}," -p",[300,6050,6051],{"class":323}," internal:boardmismatch=force\n",[11,6053,6054],{},[5897,6055,6056],{},"References:",[194,6058,6059,6064,6069,6075,6081],{},[197,6060,6061],{},[17,6062,5944],{"href":5944,"rel":6063},[21],[197,6065,6066],{},[17,6067,6008],{"href":6008,"rel":6068},[21],[197,6070,6071],{},[17,6072,6073],{"href":6073,"rel":6074},"https://github.com/pcengines/apu2-documentation/blob/master/docs/firmware_flashing.md",[21],[197,6076,6077],{},[17,6078,6079],{"href":6079,"rel":6080},"https://github.com/pcengines/apu2-documentation/blob/master/docs/cold_reset.md",[21],[197,6082,6083],{},[17,6084,6085],{"href":6085,"rel":6086},"https://github.com/elad/openbsd-apu2",[21],[1013,6088,6089],{},"html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}",{"title":58,"searchDepth":144,"depth":144,"links":6091},[],[3954],"2019-12-21T00:00:00.000Z","I've had a PCEngines APU2 gathering dust for a\nfew years, and have recently decided to dust it off.",{"draft":1335,"excerpt":6096},{"type":8,"value":6097},[6098,6103],[11,6099,5941,6100,5947],{},[17,6101,5946],{"href":5944,"rel":6102},[21],[11,6104,5950],{},"/blog/apu2-firmware-upgrade",{"title":5936,"description":6094},"blog/apu2-firmware-upgrade",[6109,6110],"pcengine","apu","_FTEVqGIbJYJW-VlrW2oMBNMBWWDlOe5mlP2ar9EU6k",1769569832444]
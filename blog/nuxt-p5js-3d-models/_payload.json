[{"data":1,"prerenderedAt":820},["ShallowReactive",2],{"/blog/nuxt-p5js-3d-models":3},{"id":4,"title":5,"body":6,"categories":787,"date":789,"description":790,"extension":791,"img":792,"meta":793,"navigation":96,"path":812,"seo":813,"stem":814,"tags":815,"__hash__":819},"content/blog/nuxt-p5js-3d-models.md","Render three-dimensional models in `NuxtContent` with p5.js",{"type":7,"value":8,"toc":785},"minimark",[9,30,42,55,158,165,176,184,201,207,778,781],[10,11,12,13,17,18,21,22,29],"p",{},"Three-dimensional models, whether they be of the format ",[14,15,16],"code",{},".obj"," or ",[14,19,20],{},".stl",", can be easily rendered in your Nuxt project by using the ",[23,24,28],"a",{"href":25,"rel":26},"https://p5js.org/",[27],"nofollow","p5js.org"," library.",[31,32,33],"blockquote",{},[10,34,35,36,41],{},"Update 2025: the interactive demos on this site now load the standalone ",[23,37,40],{"href":38,"rel":39},"https://cmpadden.github.io/p5/",[27],"p5 playground"," within an iframe. The component API described below still works when embedding the GitHub Pages build of that project.",[10,43,44,45,48,49,54],{},"I've been using p5 for a while now to tinker and explore generative art, some of which can be found in the ",[23,46,47],{"href":47},"/playground"," section of this website. To use it with Nuxt, a ",[23,50,53],{"href":51,"rel":52},"https://github.com/cmpadden/cmpadden.github.io/blob/70ba674acdbe80c4a41b510a9b54edcddb19f489/plugins/p5.client.js",[27],"client-side plugin"," was created like so:",[56,57,62],"pre",{"className":58,"code":59,"language":60,"meta":61,"style":61},"language-js shiki shiki-themes github-dark","// plugins/p5.client.js\nimport p5 from 'p5'\n\nexport default defineNuxtPlugin(() => {\n  return {\n    provide: {\n      p5, p5\n    }\n  }\n})\n","js","",[14,63,64,73,91,98,120,128,134,140,146,152],{"__ignoreMap":61},[65,66,69],"span",{"class":67,"line":68},"line",1,[65,70,72],{"class":71},"sAwPA","// plugins/p5.client.js\n",[65,74,76,80,84,87],{"class":67,"line":75},2,[65,77,79],{"class":78},"snl16","import",[65,81,83],{"class":82},"s95oV"," p5 ",[65,85,86],{"class":78},"from",[65,88,90],{"class":89},"sU2Wk"," 'p5'\n",[65,92,94],{"class":67,"line":93},3,[65,95,97],{"emptyLinePlaceholder":96},true,"\n",[65,99,101,104,107,111,114,117],{"class":67,"line":100},4,[65,102,103],{"class":78},"export",[65,105,106],{"class":78}," default",[65,108,110],{"class":109},"svObZ"," defineNuxtPlugin",[65,112,113],{"class":82},"(() ",[65,115,116],{"class":78},"=>",[65,118,119],{"class":82}," {\n",[65,121,123,126],{"class":67,"line":122},5,[65,124,125],{"class":78},"  return",[65,127,119],{"class":82},[65,129,131],{"class":67,"line":130},6,[65,132,133],{"class":82},"    provide: {\n",[65,135,137],{"class":67,"line":136},7,[65,138,139],{"class":82},"      p5, p5\n",[65,141,143],{"class":67,"line":142},8,[65,144,145],{"class":82},"    }\n",[65,147,149],{"class":67,"line":148},9,[65,150,151],{"class":82},"  }\n",[65,153,155],{"class":67,"line":154},10,[65,156,157],{"class":82},"})\n",[10,159,160,161,164],{},"As I've been exploring 3d-printing lately, I wanted a way to showcase some of the models I've created directly on this website. So, the ",[14,162,163],{},"ModelPreview"," component was created, and the snippet below shows how it's embedded in markdown.",[10,166,167,168,171,172,175],{},"The Vue component was embedded in our markdown using the following syntax is used. The ",[14,169,170],{},"path"," prop with the location of the file we want to render; in this case, that file is served on the website as well in the ",[14,173,174],{},"public/models"," folder.",[56,177,182],{"className":178,"code":180,"language":181},[179],"language-text",":ModelPreview{path=\"/models/eevee.stl\"}\n","text",[14,183,180],{"__ignoreMap":61},[10,185,186,187,190,191,194,195,200],{},"The component was registered globally by using the ",[14,188,189],{},"ModelPreview.global.vue"," filename so that it was accessible in our markdown. Alternatively, this could have been accomplished by placing the component in the ",[14,192,193],{},"components/content"," folder. However, I wanted to use this component in both markdown and Vue files. See the ",[23,196,199],{"href":197,"rel":198},"https://content.nuxt.com/usage/markdown#vue-components",[27],"NuxtContent"," documentation for more details.",[10,202,203,204,206],{},"The full source code for the ",[14,205,163],{}," component at the time of this writing can be found below. Not too bad!",[56,208,210],{"className":58,"code":209,"language":60,"meta":61,"style":61},"\u003Ctemplate>\n    \u003Cdiv id=\"canvas\" class=\"h-64\" />\n\u003C/template>\n\n\u003Cscript setup lang=\"ts\">\nconst { $p5 } = useNuxtApp();\n\nconst { path, backgroundColor = 100 } = defineProps \u003C { path: string, backgroundColor?: Number } > ()\n\nonMounted(() => {\nconsole.log(backgroundColor);\n    const sketch = (s) => {\n        const c = document.getElementById(\"canvas\");\n\n        const WIDTH = c.clientWidth;\n        const HEIGHT = c.clientHeight;\n\n        let model;\n        let angle;\n        let rotate = true;\n\n        s.preload = () => {\n            model = s.loadModel(path, true);\n        };\n\n        s.setup = () => {\n            s.createCanvas(WIDTH, HEIGHT, s.WEBGL);\n        };\n\n        s.mouseClicked = () => {\n            rotate = false; // disable object rotation on click\n        };\n\n        s.draw = () => {\n            s.background(backgroundColor);\n            s.lights();\n\n            if (rotate) {\n                angle = s.frameCount * 0.005;\n            }\n            s.rotateX(angle);\n            s.rotateY(angle);\n            s.orbitControl();\n\n            s.model(model);\n        };\n    };\n\n    new $p5(sketch, \"canvas\");\n});\n\u003C/script>\n",[14,211,212,224,252,261,265,285,290,294,314,318,323,335,361,386,391,404,417,422,431,439,455,460,478,500,506,511,527,555,560,565,581,598,603,608,624,634,645,650,659,678,684,695,705,715,720,731,736,742,747,763,769],{"__ignoreMap":61},[65,213,214,217,221],{"class":67,"line":68},[65,215,216],{"class":82},"\u003C",[65,218,220],{"class":219},"s4JwU","template",[65,222,223],{"class":82},">\n",[65,225,226,229,232,235,238,241,244,246,249],{"class":67,"line":75},[65,227,228],{"class":82},"    \u003C",[65,230,231],{"class":219},"div",[65,233,234],{"class":109}," id",[65,236,237],{"class":78},"=",[65,239,240],{"class":89},"\"canvas\"",[65,242,243],{"class":109}," class",[65,245,237],{"class":78},[65,247,248],{"class":89},"\"h-64\"",[65,250,251],{"class":82}," />\n",[65,253,254,257,259],{"class":67,"line":93},[65,255,256],{"class":82},"\u003C/",[65,258,220],{"class":219},[65,260,223],{"class":82},[65,262,263],{"class":67,"line":100},[65,264,97],{"emptyLinePlaceholder":96},[65,266,267,269,272,275,278,280,283],{"class":67,"line":122},[65,268,216],{"class":82},[65,270,271],{"class":219},"script",[65,273,274],{"class":109}," setup",[65,276,277],{"class":109}," lang",[65,279,237],{"class":78},[65,281,282],{"class":89},"\"ts\"",[65,284,223],{"class":82},[65,286,287],{"class":67,"line":130},[65,288,289],{"class":82},"const { $p5 } = useNuxtApp();\n",[65,291,292],{"class":67,"line":136},[65,293,97],{"emptyLinePlaceholder":96},[65,295,296,299,301,305,308,311],{"class":67,"line":142},[65,297,298],{"class":82},"const { path, backgroundColor ",[65,300,237],{"class":78},[65,302,304],{"class":303},"sDLfK"," 100",[65,306,307],{"class":82}," } = defineProps \u003C { path: string, backgroundColor",[65,309,310],{"class":78},"?:",[65,312,313],{"class":82}," Number } > ()\n",[65,315,316],{"class":67,"line":148},[65,317,97],{"emptyLinePlaceholder":96},[65,319,320],{"class":67,"line":154},[65,321,322],{"class":82},"onMounted(() => {\n",[65,324,326,329,332],{"class":67,"line":325},11,[65,327,328],{"class":82},"console.",[65,330,331],{"class":109},"log",[65,333,334],{"class":82},"(backgroundColor);\n",[65,336,338,341,344,347,350,354,357,359],{"class":67,"line":337},12,[65,339,340],{"class":82},"    const ",[65,342,343],{"class":109},"sketch",[65,345,346],{"class":78}," =",[65,348,349],{"class":82}," (",[65,351,353],{"class":352},"s9osk","s",[65,355,356],{"class":82},") ",[65,358,116],{"class":78},[65,360,119],{"class":82},[65,362,364,367,370,372,375,378,381,383],{"class":67,"line":363},13,[65,365,366],{"class":78},"        const",[65,368,369],{"class":303}," c",[65,371,346],{"class":78},[65,373,374],{"class":82}," document.",[65,376,377],{"class":109},"getElementById",[65,379,380],{"class":82},"(",[65,382,240],{"class":89},[65,384,385],{"class":82},");\n",[65,387,389],{"class":67,"line":388},14,[65,390,97],{"emptyLinePlaceholder":96},[65,392,394,396,399,401],{"class":67,"line":393},15,[65,395,366],{"class":78},[65,397,398],{"class":303}," WIDTH",[65,400,346],{"class":78},[65,402,403],{"class":82}," c.clientWidth;\n",[65,405,407,409,412,414],{"class":67,"line":406},16,[65,408,366],{"class":78},[65,410,411],{"class":303}," HEIGHT",[65,413,346],{"class":78},[65,415,416],{"class":82}," c.clientHeight;\n",[65,418,420],{"class":67,"line":419},17,[65,421,97],{"emptyLinePlaceholder":96},[65,423,425,428],{"class":67,"line":424},18,[65,426,427],{"class":78},"        let",[65,429,430],{"class":82}," model;\n",[65,432,434,436],{"class":67,"line":433},19,[65,435,427],{"class":78},[65,437,438],{"class":82}," angle;\n",[65,440,442,444,447,449,452],{"class":67,"line":441},20,[65,443,427],{"class":78},[65,445,446],{"class":82}," rotate ",[65,448,237],{"class":78},[65,450,451],{"class":303}," true",[65,453,454],{"class":82},";\n",[65,456,458],{"class":67,"line":457},21,[65,459,97],{"emptyLinePlaceholder":96},[65,461,463,466,469,471,474,476],{"class":67,"line":462},22,[65,464,465],{"class":82},"        s.",[65,467,468],{"class":109},"preload",[65,470,346],{"class":78},[65,472,473],{"class":82}," () ",[65,475,116],{"class":78},[65,477,119],{"class":82},[65,479,481,484,486,489,492,495,498],{"class":67,"line":480},23,[65,482,483],{"class":82},"            model ",[65,485,237],{"class":78},[65,487,488],{"class":82}," s.",[65,490,491],{"class":109},"loadModel",[65,493,494],{"class":82},"(path, ",[65,496,497],{"class":303},"true",[65,499,385],{"class":82},[65,501,503],{"class":67,"line":502},24,[65,504,505],{"class":82},"        };\n",[65,507,509],{"class":67,"line":508},25,[65,510,97],{"emptyLinePlaceholder":96},[65,512,514,516,519,521,523,525],{"class":67,"line":513},26,[65,515,465],{"class":82},[65,517,518],{"class":109},"setup",[65,520,346],{"class":78},[65,522,473],{"class":82},[65,524,116],{"class":78},[65,526,119],{"class":82},[65,528,530,533,536,538,541,544,547,550,553],{"class":67,"line":529},27,[65,531,532],{"class":82},"            s.",[65,534,535],{"class":109},"createCanvas",[65,537,380],{"class":82},[65,539,540],{"class":303},"WIDTH",[65,542,543],{"class":82},", ",[65,545,546],{"class":303},"HEIGHT",[65,548,549],{"class":82},", s.",[65,551,552],{"class":303},"WEBGL",[65,554,385],{"class":82},[65,556,558],{"class":67,"line":557},28,[65,559,505],{"class":82},[65,561,563],{"class":67,"line":562},29,[65,564,97],{"emptyLinePlaceholder":96},[65,566,568,570,573,575,577,579],{"class":67,"line":567},30,[65,569,465],{"class":82},[65,571,572],{"class":109},"mouseClicked",[65,574,346],{"class":78},[65,576,473],{"class":82},[65,578,116],{"class":78},[65,580,119],{"class":82},[65,582,584,587,589,592,595],{"class":67,"line":583},31,[65,585,586],{"class":82},"            rotate ",[65,588,237],{"class":78},[65,590,591],{"class":303}," false",[65,593,594],{"class":82},"; ",[65,596,597],{"class":71},"// disable object rotation on click\n",[65,599,601],{"class":67,"line":600},32,[65,602,505],{"class":82},[65,604,606],{"class":67,"line":605},33,[65,607,97],{"emptyLinePlaceholder":96},[65,609,611,613,616,618,620,622],{"class":67,"line":610},34,[65,612,465],{"class":82},[65,614,615],{"class":109},"draw",[65,617,346],{"class":78},[65,619,473],{"class":82},[65,621,116],{"class":78},[65,623,119],{"class":82},[65,625,627,629,632],{"class":67,"line":626},35,[65,628,532],{"class":82},[65,630,631],{"class":109},"background",[65,633,334],{"class":82},[65,635,637,639,642],{"class":67,"line":636},36,[65,638,532],{"class":82},[65,640,641],{"class":109},"lights",[65,643,644],{"class":82},"();\n",[65,646,648],{"class":67,"line":647},37,[65,649,97],{"emptyLinePlaceholder":96},[65,651,653,656],{"class":67,"line":652},38,[65,654,655],{"class":78},"            if",[65,657,658],{"class":82}," (rotate) {\n",[65,660,662,665,667,670,673,676],{"class":67,"line":661},39,[65,663,664],{"class":82},"                angle ",[65,666,237],{"class":78},[65,668,669],{"class":82}," s.frameCount ",[65,671,672],{"class":78},"*",[65,674,675],{"class":303}," 0.005",[65,677,454],{"class":82},[65,679,681],{"class":67,"line":680},40,[65,682,683],{"class":82},"            }\n",[65,685,687,689,692],{"class":67,"line":686},41,[65,688,532],{"class":82},[65,690,691],{"class":109},"rotateX",[65,693,694],{"class":82},"(angle);\n",[65,696,698,700,703],{"class":67,"line":697},42,[65,699,532],{"class":82},[65,701,702],{"class":109},"rotateY",[65,704,694],{"class":82},[65,706,708,710,713],{"class":67,"line":707},43,[65,709,532],{"class":82},[65,711,712],{"class":109},"orbitControl",[65,714,644],{"class":82},[65,716,718],{"class":67,"line":717},44,[65,719,97],{"emptyLinePlaceholder":96},[65,721,723,725,728],{"class":67,"line":722},45,[65,724,532],{"class":82},[65,726,727],{"class":109},"model",[65,729,730],{"class":82},"(model);\n",[65,732,734],{"class":67,"line":733},46,[65,735,505],{"class":82},[65,737,739],{"class":67,"line":738},47,[65,740,741],{"class":82},"    };\n",[65,743,745],{"class":67,"line":744},48,[65,746,97],{"emptyLinePlaceholder":96},[65,748,750,753,756,759,761],{"class":67,"line":749},49,[65,751,752],{"class":78},"    new",[65,754,755],{"class":109}," $p5",[65,757,758],{"class":82},"(sketch, ",[65,760,240],{"class":89},[65,762,385],{"class":82},[65,764,766],{"class":67,"line":765},50,[65,767,768],{"class":82},"});\n",[65,770,772,774,776],{"class":67,"line":771},51,[65,773,256],{"class":82},[65,775,271],{"class":219},[65,777,223],{"class":82},[10,779,780],{},"Looking forward to sharing more models soon!",[782,783,784],"style",{},"html pre.shiki code .sAwPA, html code.shiki .sAwPA{--shiki-default:#6A737D}html pre.shiki code .snl16, html code.shiki .snl16{--shiki-default:#F97583}html pre.shiki code .s95oV, html code.shiki .s95oV{--shiki-default:#E1E4E8}html pre.shiki code .sU2Wk, html code.shiki .sU2Wk{--shiki-default:#9ECBFF}html pre.shiki code .svObZ, html code.shiki .svObZ{--shiki-default:#B392F0}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s4JwU, html code.shiki .s4JwU{--shiki-default:#85E89D}html pre.shiki code .sDLfK, html code.shiki .sDLfK{--shiki-default:#79B8FF}html pre.shiki code .s9osk, html code.shiki .s9osk{--shiki-default:#FFAB70}",{"title":61,"searchDepth":75,"depth":75,"links":786},[],[788],"examples","2024-12-31T00:00:00.000Z","Three-dimensional models, whether they be of the format .obj or .stl, can be easily rendered in your Nuxt project by using the p5js.org library.","md",null,{"excerpt":794},{"type":7,"value":795},[796,805],[10,797,12,798,17,800,21,802,29],{},[14,799,16],{},[14,801,20],{},[23,803,28],{"href":25,"rel":804},[27],[31,806,807],{},[10,808,35,809,41],{},[23,810,40],{"href":38,"rel":811},[27],"/blog/nuxt-p5js-3d-models",{"title":5,"description":790},"blog/nuxt-p5js-3d-models",[816,817,818],"nuxt","p5js","3d","pBHaMSnWo-XXhMF6keiqMEvsD4FFFEAW6RtJfHfHkDg",1769570278493]
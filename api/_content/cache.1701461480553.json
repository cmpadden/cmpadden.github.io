{"generatedAt":1701461496221,"generateTime":2474,"contents":[{"_path":"/articles/apu2-firmware-upgrade","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Upgrading the Firmware on the PCEngines APU2","description":"I've had a PCEngines APU2 gathering dust for a\nfew years, and have recently decided to dust it off.","date":"2019-12-21","draft":false,"tags":["pcengine","apu"],"categories":["linux"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I've had a "},{"type":"element","tag":"a","props":{"href":"https://pcengines.ch/apu2.htm","rel":["nofollow"]},"children":[{"type":"text","value":"PCEngines APU2"}]},{"type":"text","value":" gathering dust for a\nfew years, and have recently decided to dust it off."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since the last time the device has been powered on, there have been many great\nimprovements to the firmware, and it was very-much due for an upgrade. The\nfollowing steps outline how the firmware was upgraded on the APU from the\nalready-installed operating system -- CentOS."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I've had a "},{"type":"element","tag":"a","props":{"href":"https://pcengines.ch/apu2.htm","rel":["nofollow"]},"children":[{"type":"text","value":"PCEngines APU2"}]},{"type":"text","value":" gathering dust for a\nfew years, and have recently decided to dust it off."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since the last time the device has been powered on, there have been many great\nimprovements to the firmware, and it was very-much due for an upgrade. The\nfollowing steps outline how the firmware was upgraded on the APU from the\nalready-installed operating system -- CentOS."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, we will connect to the device over the serial port"}]},{"type":"element","tag":"pre","props":{"code":"screen /dev/tty.usbserial 115200\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"screen /dev/tty.usbserial 115200\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, we will install the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"flashrom"}]},{"type":"text","value":" utility that is needed to update the\nfirmware. Because it is not available in the default "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"yum"}]},{"type":"text","value":" repositories, we\nwill enable the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Extra Packages for Enterprise Linux"}]},{"type":"text","value":" (EPEL) repository before\ninstallation."}]},{"type":"element","tag":"pre","props":{"code":"sudo yum install epel-release\nsudo yum install flashrom\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"epel-release\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"flashrom"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next, we will download the latest version of the firmware that is compatible\nwith the APU2 device from the PC Engines release website:\n"},{"type":"element","tag":"a","props":{"href":"https://pcengines.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"https://pcengines.github.io/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"code":"curl -O https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-O"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"https://3mdeb.com/open-source-firmware/pcengines/apu2/apu2_v4.11.0.1.rom"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And finally, we will flash the firmware..."}]},{"type":"element","tag":"pre","props":{"code":"sudo flashrom -w apu2_v4.11.0.1.rom -p internal:boardmismatch=force\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"flashrom"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-w"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"apu2_v4.11.0.1.rom"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"internal:boardmismatch=force"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"References:"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://pcengines.ch/apu2.htm","rel":["nofollow"]},"children":[{"type":"text","value":"https://pcengines.ch/apu2.htm"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://pcengines.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"https://pcengines.github.io/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/pcengines/apu2-documentation/blob/master/docs/firmware_flashing.md","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/pcengines/apu2-documentation/blob/master/docs/firmware_flashing.md"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/pcengines/apu2-documentation/blob/master/docs/cold_reset.md","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/pcengines/apu2-documentation/blob/master/docs/cold_reset.md"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/elad/openbsd-apu2","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/elad/openbsd-apu2"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-912143{color:#268BD2;}.ct-751194{color:#839496;}.ct-196625{color:#2AA198;}.ct-586139{color:#CB4B16;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:apu2-firmware-upgrade.md","_source":"content","_file":"articles/apu2-firmware-upgrade.md","_extension":"md"},{"_path":"/articles/docker-selinux-volumes","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Docker Volume Permissions with SELinux","description":"Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes.","date":"2019-12-26","draft":false,"tags":["docker","selinux"],"categories":["linux"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unfamiliar with running Docker on a SELinux enabled system, I found myself\nrunning into a bunch of file permission errors while creating volumes."}]},{"type":"element","tag":"pre","props":{"code":"mkdir: can't create directory '/data': Permission denied\n","language":"txt","meta":"","className":"language-txt solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"mkdir: can't create directory '/data': Permission denied"}]}]}]}]},{"type":"element","tag":"hr","props":{"id":""},"children":[]},{"type":"element","tag":"pre","props":{"code":"$ docker info --format '{{json .SecurityOptions}}'\n[\n  \"name=seccomp,profile=/etc/docker/seccomp.json\",\n  \"name=selinux\"\n]\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--format"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"'{{json .SecurityOptions}}'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"name=seccomp,profile=/etc/docker/seccomp.json\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"name=selinux\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It turns out that this can be resolved by appending the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":":z"}]},{"type":"text","value":" flag to the volume\nmappings in the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" file, indicating that the volume content\nis shared."}]},{"type":"element","tag":"pre","props":{"code":"services:\n  server:\n    volumes:\n      - ./data:/data:z\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"services:\n  server:\n    volumes:\n      - ./data:/data:z\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"From the Docker documentation:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"z"}]},{"type":"text","value":" option tells Docker that two containers share the volume content. As\na result, Docker labels the content with a shared content label. Shared\nvolume labels allow all containers to read/write content."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"References"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/engine/reference/commandline/info/","rel":["nofollow"]},"children":[{"type":"text","value":"Docker Docs: Docker Info"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/engine/reference/commandline/run/#mount-volumes-from-container---volumes-from","rel":["nofollow"]},"children":[{"type":"text","value":"Docker Docs: Mounting Volumes"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-912143{color:#268BD2;}.ct-751194{color:#839496;}.ct-196625{color:#2AA198;}.ct-586139{color:#CB4B16;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:docker-selinux-volumes.md","_source":"content","_file":"articles/docker-selinux-volumes.md","_extension":"md"},{"_path":"/articles/doctl","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Exploring the Digital Ocean `doctl` Utility","description":"I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean doctl command line utility.\nThis proved to be an extremely easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future.","date":"2023-01-01","tags":["linux","digital-ocean"],"categories":["linux"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"doctl"}]},{"type":"text","value":" command line utility.\nThis proved to be an "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"extremely"}]},{"type":"text","value":" easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I recently had the need to spool up a small ephemeral Linux instance, and wanted to try something new by exploring the Digital Ocean "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"doctl"}]},{"type":"text","value":" command line utility.\nThis proved to be an "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"extremely"}]},{"type":"text","value":" easy way to configure, create, connect, and destroy a Linux box, and I foresee myself using this service even more in the future."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To start things off, I had to install and setup authentication to Digital Ocean. Doing\nthis on my Mac machine, I opted to use "},{"type":"element","tag":"a","props":{"href":"https://brew.sh/","rel":["nofollow"]},"children":[{"type":"text","value":"Homebrew"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"# install `doctl`\nbrew install doctl\n\n# setup authentication\ndoctl auth init\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# install `doctl`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"brew"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"doctl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# setup authentication\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"init"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While the online "},{"type":"element","tag":"a","props":{"href":"https://docs.digitalocean.com/reference/doctl/reference/compute/droplet/create/","rel":["nofollow"]},"children":[{"type":"text","value":"documentation"}]},{"type":"text","value":" is fantastic, I instead found myself mostly referencing the outputs of "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"--help"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute droplet create --help\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"droplet"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--help"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I had to find the image name of the version of Ubuntu I wanted to install:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute image list --public | grep ubuntu-22\n\n# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--public"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ubuntu-22\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# 118857366    22.04 (LTS) x64    snapshot    Ubuntu    ubuntu-22-04-x64    true    7\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# 119383150    22.10 x64          snapshot    Ubuntu    ubuntu-22-10-x64    true    7"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And also the slug of the compute size:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute size list\n\n# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"list\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# Slug                  Description    Memory    VCPUs    Disk    Price Monthly    Price Hourly\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# s-1vcpu-512mb-10gb    Basic          512       1        10      4.00             0.005950\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# s-1vcpu-1gb           Basic          1024      1        25      6.00             0.008930\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# s-1vcpu-1gb-amd       Basic AMD      1024      1        25      7.00             0.010420\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# s-1vcpu-1gb-intel     Basic Intel    1024      1        25      7.00             0.010420\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# s-1vcpu-2gb           Basic          2048      1        50      12.00            0.017860\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# s-1vcpu-2gb-amd       Basic AMD      2048      1        50      14.00            0.020830"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I've also configured a few SSH keys with Digital Ocean, and I can have the key (specified by ID) provisioned to the machine using the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"--ssh-keys"}]},{"type":"text","value":" flag."}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute ssh-key list\n\n# ID      Name    FingerPrint\n# 1234    mini    <redacted>\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ssh-key"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"list\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# ID      Name    FingerPrint\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# 1234    mini    <redacted>"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also, I wanted to install a few packages to the box upon creation, this can be done easily with the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"--user-data-file"}]},{"type":"text","value":" flag to run an initialization script."}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"echo 'apt install -y imagemagick zip' > bootstrap.sh\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"'apt install -y imagemagick zip'"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"bootstrap.sh"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Putting it all together, here is the simple command for creating a small compute instance!"}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute droplet create \\\n    --image ubuntu-22-10-x64 \\\n    --size s-1vcpu-512mb-10gb \\\n    --region nyc1 \\\n    --ssh-keys 1234 \\\n    --user-data-file boostrap.sh \\\n    ephemeral\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"droplet"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--image"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ubuntu-22-10-x64"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--size"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"s-1vcpu-512mb-10gb"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--region"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"nyc1"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--ssh-keys"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1234"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--user-data-file"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"boostrap.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"\\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ephemeral"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, I can connect, do my thing, and destroy the instance."}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute ssh ephemeral\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ephemeral"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-sh solarized-dark","code":"doctl compute droplet delete --force ephemeral\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"doctl"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"compute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"droplet"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"--force"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ephemeral"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All-in-all, I was up and running in about 20 minutes. What a handy utility!"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-880162{color:#586E75;font-style:italic;}.ct-912143{color:#268BD2;}.ct-751194{color:#839496;}.ct-196625{color:#2AA198;}.ct-586139{color:#CB4B16;}.ct-149616{color:#859900;}.ct-589151{color:#D33682;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:doctl.md","_source":"content","_file":"articles/doctl.md","_extension":"md"},{"_path":"/articles/fennel-initial-exploration","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Fennel Impressions with Hammerspoon","description":"A while back I read an introductory book on Lisp programming titled, \"The Little\nSchemer\". This book opened my mind to new (to me) programming paradigms, and left me\nwith a strong desire to find a way to incorporate Lisp programming into my every day\nlife. It took some time, but I believe I've found what I've been looking for: Fennel.","draft":false,"date":"2023-10-22","tags":["lisp","hammerspoon","fennel"],"categories":["lisp"],"cover_image":"/images/dall-e-fennel-hammer.jpeg","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A while back I read an introductory book on Lisp programming titled, \"The Little\nSchemer\". This book opened my mind to new (to me) programming paradigms, and left me\nwith a strong desire to find a way to incorporate Lisp programming into my every day\nlife. It took some time, but I believe I've found what I've been looking for: Fennel."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A while back I read an introductory book on Lisp programming titled, \"The Little\nSchemer\". This book opened my mind to new (to me) programming paradigms, and left me\nwith a strong desire to find a way to incorporate Lisp programming into my every day\nlife. It took some time, but I believe I've found what I've been looking for: Fennel."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"a","props":{"href":"https://fennel-lang.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Fennel"}]},{"type":"text","value":" programming language is a dialect of Lisp that boasts compatibility with\nLua, and it just so happens that two of my favorite applications are configured with\nexactly that language: "},{"type":"element","tag":"a","props":{"href":"https://www.hammerspoon.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Hammerspoon"}]},{"type":"text","value":", and "},{"type":"element","tag":"a","props":{"href":"https://neovim.io/","rel":["nofollow"]},"children":[{"type":"text","value":"Neovim"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"initial-observations"},"children":[{"type":"text","value":"Initial Observations"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To initially explore Fennel, I wanted to start small. My Hammerspoon configuration\nconsists of 7 "},{"type":"element","tag":"a","props":{"href":"https://github.com/cmpadden/dotfiles/tree/795749fa17e1310bb001bb7deaa22be8689f0027/hammerspoon/.hammerspoon/modules","rel":["nofollow"]},"children":[{"type":"text","value":"modules"}]},{"type":"text","value":" that I use for operations such as: launching applications,\nmanaging windows, keeping my computer from going to sleep, and general operating system\nautomation. So the plan is to translate these modules into Fennel, while maintaining\nwithout breaking the existing functionality. However, at this point, I wasn't even sure\nhow to embed Fennel into my project..."}]},{"type":"element","tag":"h2","props":{"id":"integrating-fennel-with-hammerspoon"},"children":[{"type":"text","value":"Integrating Fennel with Hammerspoon"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While official documentation exists describing how to "},{"type":"element","tag":"a","props":{"href":"https://fennel-lang.org/setup#embedding-fennel","rel":["nofollow"]},"children":[{"type":"text","value":"embed fennel"}]},{"type":"text","value":" into your\nproject; it didn't provide me with enough clarity to know my next steps on integrating\nit with Hammerspoon. I found a few resources online demonstrating how to extend the\n"},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"package.path"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"package.cpath"}]},{"type":"text","value":" properties in Lua, but I was unable to get this to\nwork."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.exupero.org/hammerspoon-with-fennel/","rel":["nofollow"]},"children":[{"type":"text","value":"https://blog.exupero.org/hammerspoon-with-fennel/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/Hammerspoon/hammerspoon/issues/2377#issuecomment-636331435","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/Hammerspoon/hammerspoon/issues/2377#issuecomment-636331435"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/agzam/spacehammer/blob/master/init.lua","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/agzam/spacehammer/blob/master/init.lua"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ultimately, I opted to include the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"fennel.lua"}]},{"type":"text","value":" file to my Hammerspoon configuration,\nand while not ideal, it does make the configuration nicely self-contained. I'll leave it\nas a future task to include the module installed with LuaRocks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With Fennel now included in my Hammerspoon configuration, all I need to do is configure\nthe "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"fennel.path"}]},{"type":"text","value":" to point to the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"*.fnl"}]},{"type":"text","value":" files in the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":".hammerspoon/"}]},{"type":"text","value":" directory, and\nttranslating these modules can begin!"}]},{"type":"element","tag":"pre","props":{"className":"language-lua solarized-dark","code":"-- init.lua\n\nlocal fennel = require('fennel')\n\nfennel.path = package.path .. \";\" .. os.getenv(\"HOME\") .. \"/.hammerspoon/?.fnl\"\n\ntable.insert(package.loaders or package.searchers, fennel.searcher)\n\nrequire 'main'\n","language":"lua","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"-- init.lua\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"fennel"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"'fennel'"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"fennel"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".path "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"package.path"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\";\" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"os.getenv"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"HOME\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"/.hammerspoon/?.fnl\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"table.insert"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"package.loaders"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"package.searchers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"fennel"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".searcher)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"'main'"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"translating-lua-to-fennel"},"children":[{"type":"text","value":"Translating Lua to Fennel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a Fennel novice, I was happy to see that the Fennel project provides an online\ncross-compiler for Lua and Fennel called "},{"type":"element","tag":"a","props":{"href":"https://fennel-lang.org/see","rel":["nofollow"]},"children":[{"type":"text","value":"anti-fennel"}]},{"type":"text","value":", and while it can generate some\nstrange-looking Fennel code, it was an extremely useful tool for me to get\nup-and-running right away. For example, by pasting the simple "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"sleep"}]},{"type":"text","value":" function\nfrom the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"helpers"}]},{"type":"text","value":" module into the compiler:"}]},{"type":"element","tag":"pre","props":{"className":"language-lua solarized-dark","code":"function sleep(ms)\n    os.execute(\"sleep \" .. tonumber(ms) / 1000)\nend\n","language":"lua","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sleep"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"(ms)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"os.execute"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"sleep \" "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"tonumber"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"ms"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"end"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-lisp solarized-dark","code":"(fn sleep [ms]\n  (os.execute (.. \"sleep \" (/ (tonumber ms) 1000))))\n","language":"lisp","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"(fn sleep [ms]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  (os.execute (.. "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"sleep \""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" (tonumber ms) "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"))))"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As another example, here is the output for my "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"caffeine"}]},{"type":"text","value":" toggle:"}]},{"type":"element","tag":"pre","props":{"className":"language-lua solarized-dark","code":"hs.hotkey.bind(HYPER, \"0\", function()\n  hs.caffeinate.toggle(\"displayIdle\")\n  if hs.caffeinate.get(\"displayIdle\") then\n    helpers:show(\"Caffeine Enabled\", nil, helpers.styles.success, helpers.assets.check)\n  else\n    helpers:show(\"Caffeine Disabled\", nil, helpers.styles.error, helpers.assets.ban)\n  end\nend)\n","language":"lua","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"hs"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".hotkey."}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"bind"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"HYPER"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"0\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"hs"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".caffeinate."}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"toggle"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"displayIdle\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"hs"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".caffeinate."}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"displayIdle\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"then\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"helpers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"Caffeine Enabled\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"nil"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"helpers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".styles.success, "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"helpers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".assets.check)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"else\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"helpers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"Caffeine Disabled\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"nil"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"helpers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".styles.error, "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"helpers"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".assets.ban)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"end\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-lisp solarized-dark","code":"(hs.hotkey.bind HYPER :0\n  (fn [] (hs.caffeinate.toggle :displayIdle)\n    (if (hs.caffeinate.get :displayIdle)\n      (helpers:show \"Caffeine Enabled\" nil helpers.styles.success helpers.assets.check)\n      (helpers:show \"Caffeine Disabled\" nil helpers.styles.error helpers.assets.ban)))) \n","language":"lisp","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"(hs.hotkey.bind HYPER "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":":0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  (fn [] (hs.caffeinate.toggle "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":":displayIdle"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" (hs.caffeinate.get "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":":displayIdle"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"      (helpers:show "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"Caffeine Enabled\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"nil"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" helpers.styles.success helpers.assets.check)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"      (helpers:show "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"Caffeine Disabled\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-328313"},"children":[{"type":"text","value":"nil"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" helpers.styles.error helpers.assets.ban)))) "}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This was especially helpful for more gnarly modules like the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":" module used for\nwindow management, and seeing the Lua and Fennel code side-by-side was a kick starter in\nlearning the language!"}]},{"type":"element","tag":"h2","props":{"id":"next-steps"},"children":[{"type":"text","value":"Next Steps"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While my Fennel Hammerspoon configuration now works with parity to its Lua counterpart,\nI have not yet added new features or modules. I look forward to writing new Fennel code,\nand deepen my understanding of Lisp and the Fennel programming language."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally, before beginning this endeavor, I was already aware of projects like\n"},{"type":"element","tag":"a","props":{"href":"https://github.com/agzam/spacehammer","rel":["nofollow"]},"children":[{"type":"text","value":"spacehammer"}]},{"type":"text","value":"; a wildly impressive Hammerspoon configuration written in Fennel, but,\nI wanted to start small and learn the integration myself. However, with the basics out\nof the way, I hope to explore this project further, and seek lessons-learned for the\nconfiguration of my own."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The full pull-request for translating my Lua Hammerspoon configuration to Fennel can be\nfound here: "},{"type":"element","tag":"a","props":{"href":"https://github.com/cmpadden/dotfiles/pull/19/files","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/cmpadden/dotfiles/pull/19/files"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-880162{color:#586E75;font-style:italic;}.ct-149616{color:#859900;}.ct-751194{color:#839496;}.ct-912143{color:#268BD2;}.ct-196625{color:#2AA198;}.ct-328313{color:#B58900;}.ct-589151{color:#D33682;}.ct-586139{color:#CB4B16;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"initial-observations","depth":2,"text":"Initial Observations"},{"id":"integrating-fennel-with-hammerspoon","depth":2,"text":"Integrating Fennel with Hammerspoon"},{"id":"translating-lua-to-fennel","depth":2,"text":"Translating Lua to Fennel"},{"id":"next-steps","depth":2,"text":"Next Steps"}]}},"_type":"markdown","_id":"content:articles:fennel-initial-exploration.md","_source":"content","_file":"articles/fennel-initial-exploration.md","_extension":"md"},{"_path":"/articles/migrate-truenas-from-core-to-scale","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Migrate to TrueNAS Scale from TrueNAS Core","description":"TrueNAS Scale offers a variety of interesting features that are not supported in its TrueNAS Core counterpart. Most notably, because the base operating system is Debian Linux, opposed to FreeBSD, there is native support for Linux containers via Docker, and Kubernetes Pods! This post walks through the steps required to upgrade from TrueNAS Core to TrueNAS Scale.","date":"2021-12-28","tags":["homelab","supermicro","truenas"],"categories":["homelab"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TrueNAS Scale offers a variety of interesting features that are not supported in its TrueNAS Core counterpart. Most notably, because the base operating system is Debian Linux, opposed to FreeBSD, there is native support for Linux containers via Docker, and Kubernetes Pods! This post walks through the steps required to upgrade from TrueNAS Core to TrueNAS Scale."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TrueNAS Scale offers a variety of interesting features that are not supported in its TrueNAS Core counterpart. Most notably, because the base operating system is Debian Linux, opposed to FreeBSD, there is native support for Linux containers via Docker, and Kubernetes Pods! This post walks through the steps required to upgrade from TrueNAS Core to TrueNAS Scale."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thankfully, the upgrade procedure to migrate from TrueNAS Core to TrueNAS Scale is relatively straight forward. All it requires is to create a bootable USB of the TrueNAS Scale image, boot the USB, and select "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Install/Upgrade"}]},{"type":"text","value":" in the installation wizard. But for the sake of being thorough, you can find instructions on how to backup system configurations and install the OS below."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Make a backup of your system’s configuration\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Navigate to "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"System > General"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Click "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Save Config"}]},{"type":"text","value":", check the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Export Secret Seed"}]},{"type":"text","value":" box, and click "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Save"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Export dataset keys for the encrypted pools\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Navigate to "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Storage > Pools"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Click the cog icon, and select "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Export Dataset Keys"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Insert the TrueNAS Core bootable USB into the NAS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"From the Supermicro IPMI interface select "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Remote Control"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"iKVM/HTML5"}]},{"type":"text","value":" and select "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Reboot"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select the bootable USB as the boot device"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"From the TrueNAS installation wizard, select "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Install/Upgrade"}]},{"type":"text","value":", select the drive that contains the TrueNAS installation, and select "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Upgrade Install"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reboot the device, and voila — you should be up-and-running! Give the system a quick rundown to validate that your settings and pools have transferred correctly, and then enjoy all the container goodness!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a breakdown of the differences between TrueNAS Core, Enterprise, and Scale, you can reference "},{"type":"element","tag":"a","props":{"href":"https://www.truenas.com/help-me-choose/","rel":["nofollow"]},"children":[{"type":"text","value":"this table"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:migrate-truenas-from-core-to-scale.md","_source":"content","_file":"articles/migrate-truenas-from-core-to-scale.md","_extension":"md"},{"_path":"/articles/nuxt-v3-migration","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"This Website Has Been Migrated to Nuxt 3 🎉","description":"This website has been migrated to the latest version of the Nuxt web framework, and with it comes all of the exciting goodies that the Vue and Nuxt teams have been concocting over the past few years.\nNot to mention, all of the great plugins in the Vue ecosystem!","date":"2022-12-31","tags":["nuxt"],"categories":["web"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This website has been migrated to the latest version of the Nuxt web framework, and with it comes all of the exciting goodies that the Vue and Nuxt teams have been concocting over the past few years.\nNot to mention, all of the great plugins in the Vue ecosystem!"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This website has been migrated to the latest version of the Nuxt web framework, and with it comes all of the exciting goodies that the Vue and Nuxt teams have been concocting over the past few years.\nNot to mention, all of the great plugins in the Vue ecosystem!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're curious what changes were required to make the migration, you can check out "},{"type":"element","tag":"a","props":{"href":"https://github.com/cmpadden/cmpadden.github.io/pull/3","rel":["nofollow"]},"children":[{"type":"text","value":"pull request #3"}]},{"type":"text","value":" in the GitHub repository."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Screenshot of Nuxt Migration Pull Request","src":"/images/nuxt-migration-pr.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While the documentation for making this migration is great, there were many breaking changes, and the overall process was quite tedious.\nFor this reason, I opted to generate a new project entirely, and port existing code to this clean slate.\nI believe that this resulted in a project with a bit less cruft."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The most valuable resources for making these changes include:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/migration/overview","rel":["nofollow"]},"children":[{"type":"text","value":"The Nuxt Migration Guide"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/getting-started/introduction","rel":["nofollow"]},"children":[{"type":"text","value":"The Nuxt Framework Guide"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://tailwindcss.nuxt.dev/","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt Tailwind Module Documentation"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://content.nuxtjs.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt Content Module Documentation"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Part of the delay for doing this upgrade was in waiting for module developers to support this major release.\nI'm super thankful for all of the hard work they've don, and I'm excited to explore all of the new features available!\nI just hope that the breaking changes in this release don't cause too much fracturing of the community, as it does feel like déjà vu of Python 2 and 3."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:nuxt-v3-migration.md","_source":"content","_file":"articles/nuxt-v3-migration.md","_extension":"md"},{"_path":"/articles/persistent-archlinux-usb","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Create a Persistent Arch Linux Bootable USB with Vagrant","description":"When installing a linux distribution, it is common for the instructions to have\nthe user create a bootable USB, boot from the device, and proceed with the\ninstallation procedure from that live medium. However, this blog post will\noutline an alternative approach where a virtual machine created with Vagrant\nwill be used in favor of the live medium.","date":"2020-01-09","draft":false,"tags":["vagrant","archlinux"],"categories":["linux"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When installing a linux distribution, it is common for the instructions to have\nthe user create a bootable USB, boot from the device, and proceed with the\ninstallation procedure from that live medium. However, this blog post will\noutline an alternative approach where a virtual machine created with Vagrant\nwill be used in favor of the live medium."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When installing a linux distribution, it is common for the instructions to have\nthe user create a bootable USB, boot from the device, and proceed with the\ninstallation procedure from that live medium. However, this blog post will\noutline an alternative approach where a virtual machine created with Vagrant\nwill be used in favor of the live medium."}]},{"type":"element","tag":"h1","props":{"id":"preface"},"children":[{"type":"text","value":"Preface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The original intention was to use Docker for this process -- leveraging the\n"},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"--device"}]},{"type":"text","value":" flag and mounting the target USB device in the Docker container,\nbut the underlying hypervisor in Docker Desktop for Mac does not support this.\n"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/docker-for-mac/docker-toolbox/","rel":["nofollow"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://github.com/moby/hyperkit","rel":["nofollow"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://github.com/docker/for-mac/issues/900","rel":["nofollow"]},"children":[{"type":"text","value":"3"}]}]},{"type":"text","value":" While there are workarounds using Docker\nMachine, Vagrant felt like the path of least resistance."}]},{"type":"element","tag":"h1","props":{"id":"instructions"},"children":[{"type":"text","value":"Instructions"}]},{"type":"element","tag":"h2","props":{"id":"create-an-arch-linux-virtual-machine-with-vagrant"},"children":[{"type":"text","value":"Create an Arch Linux Virtual Machine with Vagrant"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Get the latest Arch Linux image "},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://app.vagrantup.com/archlinux/boxes/archlinux","rel":["nofollow"]},"children":[{"type":"text","value":"4"}]}]},{"type":"text","value":" from the Vagrant Cloud Box\nCatalog."}]},{"type":"element","tag":"pre","props":{"code":"vagrant box add archlinux/archlinux\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"vagrant"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"box"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"archlinux/archlinux"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Determine the USB vendor information for the thumb-drive that we will\npass-through to the virtual machine. Using the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"VBoxManage"}]},{"type":"text","value":" utility that comes\nwith Virtual Box, list the devices, and make note of the Vendor and Product ID."}]},{"type":"element","tag":"pre","props":{"code":" VBoxManage list usbhost\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"VBoxManage"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"usbhost"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Vagrantfile"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"archlinx/archlinux"}]},{"type":"text","value":" as the target box, and the USB\ndevice information that is passed through. "},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://antonyjepson.wordpress.com/2012/01/26/quickly-attaching-usb-devices-to-virtualbox-guests-using-vboxmanage/","rel":["nofollow"]},"children":[{"type":"text","value":"5"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://gist.github.com/dscape/7d829c0c116ef419f963","rel":["nofollow"]},"children":[{"type":"text","value":"6"}]}]},{"type":"text","value":" Vagrant\noffers a handy customization parameter "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"vb.customize"}]},{"type":"text","value":" that calls the\n"},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"VBoxManage"}]},{"type":"text","value":" command under-the-hood, allowing one to enable the guest machine\nto access the host machine's USB devices."}]},{"type":"element","tag":"pre","props":{"code":"# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"archlinux/archlinux\"\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.name = \"archlinux\"\n    vb.customize ['modifyvm', :id, '--usb', 'on']\n    vb.customize ['usbfilter', 'add', '1', '--target', :id, '--name', 'SanDisk Ultra Fit', '--vendorid', '0x0781', '--productid', '0x5583']\n  end\nend\n","language":"txt","meta":"","className":"language-txt solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# -*- mode: ruby -*-\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# vi: set ft=ruby :\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Vagrant.configure(\"2\") do |config|\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  config.vm.box = \"archlinux/archlinux\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  config.vm.provider \"virtualbox\" do |vb|\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    vb.name = \"archlinux\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    vb.customize ['modifyvm', :id, '--usb', 'on']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    vb.customize ['usbfilter', 'add', '1', '--target', :id, '--name', 'SanDisk Ultra Fit', '--vendorid', '0x0781', '--productid', '0x5583']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  end\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"end"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When virtual machine is brought up, the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"usbfilter"}]},{"type":"text","value":" is applied, and the guest\nis able to access to the host machine's USB device that was specified in the\nfilter."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Start the machine, "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"ssh"}]},{"type":"text","value":" into the guest, and list the devices to confirm that\nthe USB device is available (see: "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/dev/sdb"}]},{"type":"text","value":")."}]},{"type":"element","tag":"pre","props":{"code":"$ vagrant up\n$ vagrant ssh\n[vagrant@archlinux ~]$ lsblk\nNAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda      8:0    0   20G  0 disk\n├─sda1   8:1    0  1.9G  0 part [SWAP]\n└─sda2   8:2    0 18.1G  0 part /\nsdb      8:16   1 28.7G  0 disk\n└─sdb1   8:17   1    8G  0 part\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"vagrant"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"up\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"vagrant"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ssh\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[vagrant@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]$ lsblk\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"MAJ:MIN"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"RM"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"SIZE"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"RO"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"TYPE"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"MOUNTPOINT\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sda"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":":0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"G"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"disk\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"├─sda1"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":":1"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1.9"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"G"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"part"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" [SWAP]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"└─sda2"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":":2"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"18.1"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"G"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"part"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sdb"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":":16"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"28.7"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"G"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"disk\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"└─sdb1"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":":17"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"G"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"part"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"install-arch-linux-on-the-usb-drive"},"children":[{"type":"text","value":"Install Arch Linux on the USB Drive"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Installation_guide","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Linux Installation Guide"}]},{"type":"text","value":" outlines the installation procedure in\ngreat detail -- the following steps follow this closely with a few alteration\ndue to installing onto removable media."}]},{"type":"element","tag":"h3","props":{"id":"partition-the-disk-uefi-with-gpt"},"children":[{"type":"text","value":"Partition the Disk (UEFI with GPT)"}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux ~]# fdisk /dev/sdb\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# fdisk /dev/sdb"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"Command (m for help): p\nDisk /dev/sdb: 28.66 GiB, 30752636928 bytes, 60063744 sectors\nDisk model: Ultra Fit\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: gpt\nDisk identifier: E1D6C445-1B79-AB4D-A442-FA4AD6DF4ECC\n\nDevice       Start      End  Sectors  Size Type\n/dev/sdb1     2048  1050623  1048576  512M EFI System\n/dev/sdb2  1050624 60063710 59013087 28.1G Linux filesystem\n\nFilesystem/RAID signature on partition 1 will be wiped.\n","language":"txt","meta":"","className":"language-txt solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Command (m for help): p\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Disk /dev/sdb: 28.66 GiB, 30752636928 bytes, 60063744 sectors\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Disk model: Ultra Fit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Units: sectors of 1 * 512 = 512 bytes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Sector size (logical/physical): 512 bytes / 512 bytes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"I/O size (minimum/optimal): 512 bytes / 512 bytes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Disklabel type: gpt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Disk identifier: E1D6C445-1B79-AB4D-A442-FA4AD6DF4ECC\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Device       Start      End  Sectors  Size Type\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/dev/sdb1     2048  1050623  1048576  512M EFI System\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/dev/sdb2  1050624 60063710 59013087 28.1G Linux filesystem\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Filesystem/RAID signature on partition 1 will be wiped."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"format-the-partitions"},"children":[{"type":"text","value":"Format the Partitions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The UEFI specification mandates support for FAT file-systems, and FAT32 is\nrecommended for removable media. "},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/EFI_system_partition#Format_the_partition","rel":["nofollow"]},"children":[{"type":"text","value":"7"}]}]}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux ~]# pacman -Sy dosfstools\n[root@archlinux ~]# mkfs.fat -F32 /dev/sdb1\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# pacman -Sy dosfstools\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# mkfs.fat -F32 /dev/sdb1"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As for the root partition, it is recommended to use "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"ext4"}]},{"type":"text","value":" without a journal to\nreduce the reads and writes to the file-system as this is detrimental to the\nflash-based USB drive. "},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Install_Arch_Linux_on_a_USB_key#Installation_tweaks","rel":["nofollow"]},"children":[{"type":"text","value":"8"}]}]}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux ~]# mkfs.ext4 -O \"^has_journal\" /dev/sdb2\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# mkfs.ext4 -O "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"^has_journal\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" /dev/sdb2"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"mount-the-partitions-and-bootstrap-the-environment"},"children":[{"type":"text","value":"Mount the Partitions and Bootstrap the Environment"}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux ~]# mount /dev/sdb2 /mnt\n[root@archlinux ~]# mkdir -p /mnt/boot/efi\n[root@archlinux ~]# mount /dev/sdb1 /mnt/boot/efi\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# mount /dev/sdb2 /mnt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# mkdir -p /mnt/boot/efi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# mount /dev/sdb1 /mnt/boot/efi"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux ~]# pacman -S arch-install-scripts\n[root@archlinux ~]# pacstrap /mnt base linux linux-firmware\n[root@archlinux ~]# genfstab -U /mnt >> /mnt/etc/fstab\n","language":"bash","meta":"","className":"language-bash solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# pacman -S arch-install-scripts\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# pacstrap /mnt base linux linux-firmware\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[root@archlinux "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"]# genfstab -U /mnt "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" /mnt/etc/fstab"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"configure-the-new-environment"},"children":[{"type":"text","value":"Configure the New Environment"}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux ~]# arch-chroot /mnt\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[root@archlinux ~]# arch-chroot /mnt\n"}]}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux /]# ln -sf /usr/share/zoneinfo/US/Eastern /etc/localtime\n[root@archlinux /]# hwclock --systohc\n[root@archlinux /]# sed -i 's/#en_US.UTF-8/en_US.UTF-8/' /etc/locale.gen\n[root@archlinux /]# locale-gen\n[root@archlinux /]# echo \"LANG=en_US.UTF-8\" > /etc/locale.conf\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[root@archlinux /]# ln -sf /usr/share/zoneinfo/US/Eastern /etc/localtime\n[root@archlinux /]# hwclock --systohc\n[root@archlinux /]# sed -i 's/#en_US.UTF-8/en_US.UTF-8/' /etc/locale.gen\n[root@archlinux /]# locale-gen\n[root@archlinux /]# echo \"LANG=en_US.UTF-8\" > /etc/locale.conf\n"}]}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux /]# hostnamectl set-hostname usb\n[root@archlinux /]# echo \"127.0.0.1        localhost\" >> /etc/hosts\n[root@archlinux /]# echo \"::1              localhost\" >> /etc/hosts\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[root@archlinux /]# hostnamectl set-hostname usb\n[root@archlinux /]# echo \"127.0.0.1        localhost\" >> /etc/hosts\n[root@archlinux /]# echo \"::1              localhost\" >> /etc/hosts\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note, one difference here from a standard installation is that the\n"},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"--removable"}]},{"type":"text","value":" flag is specified when installing the GRUB bootloader.\n"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/GRUB#UEFI_systems","rel":["nofollow"]},"children":[{"type":"text","value":"10"}]}]}]},{"type":"element","tag":"pre","props":{"code":"[root@archlinux /]# pacman -S grub\n[root@archlinux /]# grub-install --target=x86_64-efi --efi-directory=/boot/efi  --removable --recheck\n[root@usb /]# grub-mkconfig -o /boot/grub/grub.cfg\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[root@archlinux /]# pacman -S grub\n[root@archlinux /]# grub-install --target=x86_64-efi --efi-directory=/boot/efi  --removable --recheck\n[root@usb /]# grub-mkconfig -o /boot/grub/grub.cfg\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Shutdown the virtual machine, restart the host machine, and boot the newly\ncreated Arch Linux thumb-drive!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"🎉"}]},{"type":"element","tag":"h2","props":{"id":"side-note"},"children":[{"type":"text","value":"Side-note"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It was attempted to use the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"controlvm usbattach"}]},{"type":"text","value":" command to pass the USB\ndevice to the guest machine, but this did not work as it expects the virtual\nmachine to already be running, and the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"vb.customize"}]},{"type":"text","value":" option runs prior to\nbooting the machine. "},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.vagrantup.com/docs/virtualbox/configuration.html#vboxmanage-customizations","rel":["nofollow"]},"children":[{"type":"text","value":"11"}]}]}]},{"type":"element","tag":"pre","props":{"code":"Command: [\"controlvm\", \"060a716b-1965-49e2-bc56-12beed5df716\", \"usbattach36fc9e60-c465-11cf-8056-444553540000\"]\n\nStderr: VBoxManage.exe: error: Machine '060a716b-1965-49e2-bc56-12beed5df716' is not currently running.\n","language":"txt","meta":"","className":"language-txt solarized-dark"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Command: [\"controlvm\", \"060a716b-1965-49e2-bc56-12beed5df716\", \"usbattach36fc9e60-c465-11cf-8056-444553540000\"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Stderr: VBoxManage.exe: error: Machine '060a716b-1965-49e2-bc56-12beed5df716' is not currently running."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"references"},"children":[{"type":"text","value":"References"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/docker-for-mac/docker-toolbox/","rel":["nofollow"]},"children":[{"type":"text","value":"Docker Desktop on Mac vs. Docker Toolbox"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/moby/hyperkit","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub - HyperKit"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/docker/for-mac/issues/900","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub - Docker for Mac - Issue #900"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://app.vagrantup.com/archlinux/boxes/archlinux","rel":["nofollow"]},"children":[{"type":"text","value":"Vagrant Cloud - Arch Linux"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://antonyjepson.wordpress.com/2012/01/26/quickly-attaching-usb-devices-to-virtualbox-guests-using-vboxmanage/","rel":["nofollow"]},"children":[{"type":"text","value":"Attaching USB Devices to VirtualBox Guests using VBoxManage"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gist.github.com/dscape/7d829c0c116ef419f963","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub Gist - Vagrant USB Filter"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/EFI_system_partition#Format_the_partition","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Linux Wiki - EFI System Partition - Format Partitions"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Install_Arch_Linux_on_a_USB_key#Installation_tweaks","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Linux Wiki - Arch Linux on USB - Installation Tweaks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/Installation_guide","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Linux Wiki - Installation Guide"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wiki.archlinux.org/index.php/GRUB#UEFI_systems","rel":["nofollow"]},"children":[{"type":"text","value":"Arch Linux Wiki - GRUB - UEFI Systems"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.vagrantup.com/docs/virtualbox/configuration.html#vboxmanage-customizations","rel":["nofollow"]},"children":[{"type":"text","value":"Vagrant VBoxManage Customizations "}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-912143{color:#268BD2;}.ct-751194{color:#839496;}.ct-196625{color:#2AA198;}.ct-149616{color:#859900;}.ct-589151{color:#D33682;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"create-an-arch-linux-virtual-machine-with-vagrant","depth":2,"text":"Create an Arch Linux Virtual Machine with Vagrant"},{"id":"install-arch-linux-on-the-usb-drive","depth":2,"text":"Install Arch Linux on the USB Drive","children":[{"id":"partition-the-disk-uefi-with-gpt","depth":3,"text":"Partition the Disk (UEFI with GPT)"},{"id":"format-the-partitions","depth":3,"text":"Format the Partitions"},{"id":"mount-the-partitions-and-bootstrap-the-environment","depth":3,"text":"Mount the Partitions and Bootstrap the Environment"},{"id":"configure-the-new-environment","depth":3,"text":"Configure the New Environment"}]},{"id":"side-note","depth":2,"text":"Side-note"},{"id":"references","depth":2,"text":"References"}]}},"_type":"markdown","_id":"content:articles:persistent-archlinux-usb.md","_source":"content","_file":"articles/persistent-archlinux-usb.md","_extension":"md"},{"_path":"/articles/quick-tip-rerunning-bash-commands","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Tip: Re-running Bash Commands","description":"Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use sudo for a command that requires\nroot privileges.","date":"2021-09-22","draft":false,"tags":["tip","bash"],"categories":["tips"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" for a command that requires\nroot privileges."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do you ever find yourself having to re-run a Bash command? I often find this\nhappening to myself when I neglect to use "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" for a command that requires\nroot privileges."}]},{"type":"element","tag":"pre","props":{"className":"language-bash solarized-dark","code":"$ pacman -Syu\nerror: you cannot perform this operation unless you are root.\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-Syu\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"error:"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"you"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"cannot"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"perform"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"operation"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"unless"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"you"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"are"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"root."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Well, I have good news for you -- you can easily re-issue a command with the\n"},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!!"}]},{"type":"text","value":" designator! Simply type "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" followed by "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!!"}]},{"type":"text","value":" and you're good to go."}]},{"type":"element","tag":"pre","props":{"className":"language-bash solarized-dark","code":"$ sudo !!\nsudo pacman -Syu\n[sudo] password for colton:\n:: Synchronizing package databases...\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"!!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"pacman"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-Syu\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"[sudo] password "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" colton:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"Synchronizing"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"package"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"databases..."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Commands that are prefixed with a bang, "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!"}]},{"type":"text","value":", are considered "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Event\nDesignators,"}]},{"type":"text","value":" and are references to your command-line history. You can take a\nlook at your history with the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"history"}]},{"type":"text","value":" command."}]},{"type":"element","tag":"pre","props":{"className":"language-bash solarized-dark","code":"$ history\n 1021  touch hello_world.txt\n 1022  ls\n 1023  echo \"Here we go again!\"\n 1024  find . -name *.py\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"history\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"1021"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"touch"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"hello_world.txt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"1022"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"ls\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"1023"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"Here we go again!\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-name"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":".py"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are many ways to use "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!"}]},{"type":"text","value":" in your shell. For example, if you wanted to\nre-issue a specific command in your history, you could use "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!n"}]},{"type":"text","value":" where "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" is\nthe number next to the command in your history."}]},{"type":"element","tag":"pre","props":{"className":"language-bash solarized-dark","code":"$ !1023\necho \"Here we go again!\"\nHere we go again!\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"!1023\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"Here we go again!\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"Here"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"we"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"go"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"again!"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Or... if you wanted to run the command you issued 4-commands ago, you can use\n"},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!-4"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-bash solarized-dark","code":"$ !-4\nls\nhello_world.txt\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"!-4\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"ls\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"hello_world.txt"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Or... if you wanted to run the last command that started with the string\n"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"find"}]},{"type":"text","value":", you can use "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"!find"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-bash solarized-dark","code":"$ !find\nfind . -name *.py\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"!find\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"-name"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":".py"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Be sure to check out the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Event Designators"}]},{"type":"text","value":" section of the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"bash"}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"man"}]},{"type":"text","value":" pages\nfor more information!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As an aside, for even faster command-line history navigation, be sure to check\nout the excellent "},{"type":"element","tag":"a","props":{"href":"https://github.com/junegunn/fzf","rel":["nofollow"]},"children":[{"type":"text","value":"fzf"}]},{"type":"text","value":" utility by "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"junegunn."}]},{"type":"text","value":"\nOne of the many features of "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"fzf"}]},{"type":"text","value":" is browsing and re-issuing commands from your\ncommand-line history with a fuzzy-finder!"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-912143{color:#268BD2;}.ct-751194{color:#839496;}.ct-196625{color:#2AA198;}.ct-586139{color:#CB4B16;}.ct-149616{color:#859900;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:quick-tip-rerunning-bash-commands.md","_source":"content","_file":"articles/quick-tip-rerunning-bash-commands.md","_extension":"md"},{"_path":"/articles/reset-ipmi-password-from-host-os","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Reset IPMI Credentials from the Host OS","description":"If you ever find yourself locked out of the Intelligent Platform Management Interface (IPMI) of a server, these\ninstructions will guide your through the process of resetting the credentials to their default values from the host\noperating system.","date":"2021-12-27","tags":["homelab","supermicro","truenas"],"categories":["homelab"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you ever find yourself locked out of the Intelligent Platform Management Interface (IPMI) of a server, these\ninstructions will guide your through the process of resetting the credentials to their default values from the host\noperating system."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you ever find yourself locked out of the Intelligent Platform Management Interface (IPMI) of a server, these\ninstructions will guide your through the process of resetting the credentials to their default values from the host\noperating system."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you are using an operating system like TrueNAS -- good news! It's possible to reset the IPMI password directly from\nthe web interface. This is done by navigating to "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Network > IPMI"}]},{"type":"text","value":", and simply entering a new value in the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"IPMI\nPassword Reset"}]},{"type":"text","value":" field."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you are using some other OS that doesn't have this feature, you can achieve similar results by using the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"ipmitool"}]},{"type":"text","value":"\ncommand-line utility."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, you'll want to determine the user ID associated with the user for whom you'd like to reset the password."}]},{"type":"element","tag":"pre","props":{"code":"# ipmitool user list\nID  Name             Callin  Link Auth  IPMI Msg   Channel Priv Limit\n1                    true    false      false      Unknown (0x00)\n2   ADMIN            true    false      false      Unknown (0x00)\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# ipmitool user list\nID  Name             Callin  Link Auth  IPMI Msg   Channel Priv Limit\n1                    true    false      false      Unknown (0x00)\n2   ADMIN            true    false      false      Unknown (0x00)\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this case, we will be resetting the password for "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"ADMIN"}]},{"type":"text","value":" who has a user ID of "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"2"}]},{"type":"text","value":". Then we'll assign the new\npassword like so:"}]},{"type":"element","tag":"pre","props":{"code":"# ipmitool user set password 2 <password>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# ipmitool user set password 2 <password>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And you should be good to go!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Alternatively, if you'd like to factory reset the baseboard management controller (BMC), which will reset the IPMI\ncredentials to their default value, you can issue the following command."}]},{"type":"element","tag":"pre","props":{"code":"# ipmitool raw 0x3c 0x40\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# ipmitool raw 0x3c 0x40\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"0x3c"}]},{"type":"text","value":" is the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<netfn>"}]},{"type":"text","value":" argument, a.k.a. the network function code that defines the functional routing for\nmessages, and "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"0x40"}]},{"type":"text","value":" is the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<cmd>"}]},{"type":"text","value":". According to section 5.1 of the "},{"type":"element","tag":"a","props":{"href":"https://www.intel.com/content/dam/www/public/us/en/documents/product-briefs/ipmi-second-gen-interface-spec-v2-rev1-1.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"IPMI interface\nspecification"}]},{"type":"text","value":",\n"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"netfn"}]},{"type":"text","value":" codes ranging from 0x30 to 0x3F are reserved for vendor specific functions. I searched around for some\nSupermicro references on these vendor specific network functions without much luck other than various "},{"type":"element","tag":"a","props":{"href":"https://www.supermicro.com/support/faqs/faq.cfm?faq=15448","rel":["nofollow"]},"children":[{"type":"text","value":"support\nresponses"}]},{"type":"text","value":" on how to reset a device. Bummer!"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:reset-ipmi-password-from-host-os.md","_source":"content","_file":"articles/reset-ipmi-password-from-host-os.md","_extension":"md"},{"_path":"/articles/unit-testing-micropython-with-mocks","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Unit Testing in MicroPython with Mocks","description":"Unit testing code for embedded systems can be challenging. While it's possible\nto leverage emulators, write side-effect free code, or run tests on the\nhardware itself, it's often easiest to unit test the code on your personal\ncomputer with mocked hardware functionality.","date":"2020-02-07","draft":false,"tags":["micropython","testing","mocks","tutorial"],"categories":["python","embedded"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unit testing code for embedded systems can be challenging. While it's possible\nto leverage emulators, write side-effect free code, or run tests on the\nhardware itself, it's often easiest to unit test the code on your personal\ncomputer with mocked hardware functionality."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unit testing code for embedded systems can be challenging. While it's possible\nto leverage emulators, write side-effect free code, or run tests on the\nhardware itself, it's often easiest to unit test the code on your personal\ncomputer with mocked hardware functionality."}]},{"type":"element","tag":"h1","props":{"id":"mocking"},"children":[{"type":"text","value":"Mocking"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mocks allow us to replace the hardware interfacing functionality under-the-hood\nwith predefined results and side-effects. For example, if there is a piece of\nlogic that retrieves values from an accelerometer to get a device's\norientation, it would be possible to mock the returned values of the\naccelerometer -- allowing us to run the unit tests on a device that does not\nhave an accelerometer sensor installed."}]},{"type":"element","tag":"h1","props":{"id":"a-micropython-mocking-example"},"children":[{"type":"text","value":"A MicroPython Mocking Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this example, we will be unit testing a module named "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"time_logger"}]},{"type":"text","value":", that\ndepends on the MicroPython library "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"utime"}]},{"type":"text","value":" to log the most recent Epoch time to\na file."}]},{"type":"element","tag":"pre","props":{"className":"language-python solarized-dark","code":"# time_logger.py\n\nclass TimeLogger(object):\n\n    def save_time(self):\n        \"\"\" Overwrite a file with the most recent Epoch timestamp from `utime`\n        \"\"\"\n        with open(\"LAST_KNOWN_TIME\", \"w+\") as f:\n            f.write(str(utime.time()))\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# time_logger.py\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-561205"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"TimeLogger"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-561205"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"save_time"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"(self):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"\"\"\" Overwrite a file with the most recent Epoch timestamp from `utime`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"        \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"LAST_KNOWN_TIME\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"w+\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" f:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"            f.write("}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"(utime.time()))"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, because the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"utime"}]},{"type":"text","value":" module is not installed on the machine that the unit\ntests on, we must mock "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"utime"}]},{"type":"text","value":" module before importing "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"time_logger"}]},{"type":"text","value":" in our\nunit test file."}]},{"type":"element","tag":"pre","props":{"className":"language-python solarized-dark","code":"# test_time_logger.py\n\nimport unittest\n\nfrom unittest.mock import MagicMock\n\nsys.modules['utime'] = MagicMock()\nfrom time_logger import TimeLogger\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"# test_time_logger.py\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" unittest\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" unittest.mock "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" MagicMock\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"sys.modules["}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"'utime'"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" MagicMock()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" time_logger "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" TimeLogger"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, we can write a test that patches the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"utime.time"}]},{"type":"text","value":" functionality so that\nit returns a value of our choosing -- in this case, "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"1234"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-python solarized-dark","code":"class TestTimeLogger(unittest.TestCase):\n\n    def test_save_time(self):\n        \"\"\" Verify that the Epoch time is written to file\n        \"\"\"\n        with unittest.mock.patch(\"utime.time\", return_value=1234):\n            t = TimeLogger()\n            t.save_time()\n            with open(\"LAST_KNOWN_TIME\") as f:\n                self.assertEqual(\"1234\", f.read())\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-561205"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-586139"},"children":[{"type":"text","value":"TestTimeLogger"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-116619"},"children":[{"type":"text","value":"unittest"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-116619"},"children":[{"type":"text","value":"TestCase"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-561205"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"test_save_time"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"(self):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"\"\"\" Verify that the Epoch time is written to file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-880162"},"children":[{"type":"text","value":"        \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" unittest.mock.patch("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"utime.time\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", return_value"}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-589151"},"children":[{"type":"text","value":"1234"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"            t "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" TimeLogger()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"            t.save_time()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"LAST_KNOWN_TIME\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-149616"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":" f:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-912143"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":".assertEqual("}]},{"type":"element","tag":"span","props":{"class":"ct-196625"},"children":[{"type":"text","value":"\"1234\""}]},{"type":"element","tag":"span","props":{"class":"ct-751194"},"children":[{"type":"text","value":", f.read())"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, when the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"save_time"}]},{"type":"text","value":" method gets the latest time from "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"utime.time()"}]},{"type":"text","value":", the\nvalue will be patched to return "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"1234"}]},{"type":"text","value":". That value will be written to a file,\nand our unit test will pass!"}]},{"type":"element","tag":"h2","props":{"id":"references"},"children":[{"type":"text","value":"References"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/unittest.html","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"unittest"}]},{"type":"text","value":" — Unit testing framework"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".solarized-dark{color:#839496;background:#002B36;}.ct-880162{color:#586E75;font-style:italic;}.ct-561205{color:#93A1A1;font-weight:bold;}.ct-751194{color:#839496;}.ct-586139{color:#CB4B16;}.ct-149616{color:#859900;}.ct-912143{color:#268BD2;}.ct-196625{color:#2AA198;}.ct-116619{color:#6C71C4;}.ct-589151{color:#D33682;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"references","depth":2,"text":"References"}]}},"_type":"markdown","_id":"content:articles:unit-testing-micropython-with-mocks.md","_source":"content","_file":"articles/unit-testing-micropython-with-mocks.md","_extension":"md"}],"navigation":[{"title":"Articles","_path":"/articles","children":[{"title":"Upgrading the Firmware on the PCEngines APU2","_path":"/articles/apu2-firmware-upgrade"},{"title":"Docker Volume Permissions with SELinux","_path":"/articles/docker-selinux-volumes"},{"title":"Exploring the Digital Ocean `doctl` Utility","_path":"/articles/doctl"},{"title":"Fennel Impressions with Hammerspoon","_path":"/articles/fennel-initial-exploration"},{"title":"Migrate to TrueNAS Scale from TrueNAS Core","_path":"/articles/migrate-truenas-from-core-to-scale"},{"title":"This Website Has Been Migrated to Nuxt 3 🎉","_path":"/articles/nuxt-v3-migration"},{"title":"Create a Persistent Arch Linux Bootable USB with Vagrant","_path":"/articles/persistent-archlinux-usb"},{"title":"Tip: Re-running Bash Commands","_path":"/articles/quick-tip-rerunning-bash-commands"},{"title":"Reset IPMI Credentials from the Host OS","_path":"/articles/reset-ipmi-password-from-host-os"},{"title":"Unit Testing in MicroPython with Mocks","_path":"/articles/unit-testing-micropython-with-mocks"}]}]}
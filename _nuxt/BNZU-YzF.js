import{_ as h,c as o,g as a,e as t,n as m,t as d,F as c,h as p,d as v,o as i}from"./gYh6ilP8.js";const g={mounted(){typeof navigator.requestMIDIAccess<"u"&&navigator.requestMIDIAccess().then(n=>{this.midi=n,this.midi.inputs.forEach(e=>{e.onmidimessage=u=>{this.events.push(u),this.events.length>15&&this.events.shift()}})},n=>{console.error(n)})},data(){return{tooltip:!1,midi:void 0,events:[]}},computed:{inputs(){if(typeof this.midi<"u")return Array.from(this.midi.inputs.values())},outputs(){if(typeof this.midi<"u")return Array.from(this.midi.outputs.values())}},filters:{midiCommand:n=>{switch(n){case 144:return"Note On";case 128:return"Note Off";default:return n}},midiNote:n=>`${["C","C# / Db","D","D# / Eb","E","F","F# / Bb","G","G# / Ab","A","A# / Bb","B"][n%12]} (${Math.floor(n/12)-2})`}},x={class:"h-2/3 bg-gradient-to-b from-green-100 to-green-50"},b={key:0,class:"p-4 text-center font-light tracking-wide"},_={key:1},y={class:"flex flex-wrap"},w={class:"absolute bottom-16 right-2"},k={class:"p-3 font-mono text-orange-900"},I={class:"mb-2 font-bold"},M={class:"mb-2"},N={key:0,class:"p-4 text-center italic"},D={key:1},C={class:"flex-1"},A={class:"flex-1"},z={class:"mb-2"},E={key:0,class:"p-4 text-center italic"},V={key:1},B={class:"flex-1"},F={class:"flex-1"},S={class:"absolute bottom-2 right-2"},O={class:"container mx-auto p-8"},P={class:"w-full table-auto border-2 border-green-800 bg-green-50 text-sm"},q={class:"divide-y divide-gray-100"},G={key:0},T={class:"p-2 text-left"},U={class:"p-2 text-left"},W={class:"p-2 text-left"},H={class:"p-2 text-left"},L={key:0,class:"p-2 text-left"},R={key:1,class:"p-2 text-left"},Y={class:"p-2 text-left"},j={class:"p-2 text-right"};function J(n,e,u,K,l,r){return i(),o("div",x,[typeof l.midi>"u"?(i(),o("div",b,e[1]||(e[1]=[a(" Unfortunately, the Web MIDI API is "),t("a",{class:"text-blue-500 underline",href:"https://developer.mozilla.org/en-US/docs/Web/API/MIDIMessageEvent#browser_compatibility"},"not supported",-1),a(" in all browsers... ")]))):(i(),o("div",_,[t("div",y,[t("div",w,[t("div",{class:m([{hidden:!l.tooltip,block:l.tooltip},"z-50 max-w-md break-words rounded-lg border-2 border-green-800 bg-yellow-200 text-sm font-normal leading-normal"])},[t("div",null,[e[5]||(e[5]=t("div",{class:"mb-0 rounded-t-lg border-b border-solid bg-green-600 p-3 font-semibold uppercase text-white opacity-75"}," MIDI Status ",-1)),t("div",k,[t("div",I,[e[2]||(e[2]=a(" Enabled: ")),t("span",null,d(typeof l.midi<"u"?"Yep!":"Nope"),1)]),t("div",M,[e[3]||(e[3]=t("div",{class:"font-bold"},"Inputs:",-1)),r.inputs.length===0?(i(),o("div",N," No input devices detected :( ")):(i(),o("div",D,[(i(!0),o(c,null,p(r.inputs,s=>(i(),o("div",{key:s.id,class:"flex"},[t("div",C,d(s.manufacturer),1),t("div",A,d(s.name),1)]))),128))]))]),t("div",z,[e[4]||(e[4]=t("div",{class:"font-bold"},"Outputs:",-1)),r.outputs.length===0?(i(),o("div",E," No output devices detected :( ")):(i(),o("div",V,[(i(!0),o(c,null,p(r.outputs,s=>(i(),o("div",{key:s.id,class:"flex"},[t("div",B,d(s.manufacturer),1),t("div",F,d(s.name),1)]))),128))]))])])])],2)]),t("div",S,[t("button",{ref:"btnRef",onClick:e[0]||(e[0]=s=>l.tooltip=!l.tooltip),class:"rounded-lg bg-green-800 px-2 py-1 text-white shadow hover:text-yellow-200 hover:shadow-lg",type:"button"},e[6]||(e[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20",class:"h-10 w-10"},[t("g",{fill:"none"},[t("path",{d:"M2.5 4a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-15zm.5 6h2v3.5a.5.5 0 0 0 1 0V10h2v3.5a.5.5 0 0 0 1 0V10h2v3.5a.5.5 0 0 0 1 0V10h2v3.5a.5.5 0 0 0 1 0V10h2v5H3v-5zm2.75-2.5a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5zm6.25-1a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm-3 .251a.75.75 0 1 1-1.5 0a.75.75 0 0 1 1.5 0z",fill:"currentColor"})])],-1)]),512)])]),t("div",O,[e[9]||(e[9]=t("div",{class:"font-display text-4xl font-light tracking-wide"}," MIDI Events ",-1)),t("table",P,[e[8]||(e[8]=t("thead",{class:"bg-green-800 font-semibold uppercase text-white"},[t("tr",null,[t("th",{class:"p-2 text-left"},"Timestamp"),t("th",{class:"p-2 text-left"},"Command #"),t("th",{class:"p-2 text-left"},"Command"),t("th",{class:"p-2 text-left"},"Note #"),t("th",{class:"p-2 text-left"},"Note"),t("th",{class:"p-2 text-left"},"Velocity"),t("th",{class:"p-2 text-right"},"MIDI Source")])],-1)),t("tbody",q,[l.events.length===0?(i(),o("tr",G,e[7]||(e[7]=[t("td",{class:"p-4 text-center italic",colspan:"7"}," Press a key, or turn a knob! ",-1)]))):v("",!0),(i(!0),o(c,null,p(l.events,(s,f)=>(i(),o("tr",{key:f},[t("td",T,d(s.timeStamp.toFixed(2)),1),t("td",U,d(s.data[0]),1),t("td",W,d(s.data[0]|n.midiCommand),1),t("td",H,d(s.data[1]),1),s.data[0]===144||s.data[0]==128?(i(),o("td",L,d(s.data[1]|n.midiNote),1)):(i(),o("td",R,"-")),t("td",Y,d(s.data[2]),1),t("td",j,d(s.srcElement.name),1)]))),128))])])])]))])}const X=h(g,[["render",J]]);export{X as default};

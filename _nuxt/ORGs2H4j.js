import{u as A,j as g,w as R,k as m,c as r,b as s,F as d,r as v,a as c,h as S,o as l,t as _,i as f,f as y,g as D,n as C,_ as F}from"./Bg6Fs0XQ.js";import{_ as L}from"./T65wemHO.js";import j from"./DrKxITK0.js";import{u as z}from"./DkLtOmDw.js";import{q as E}from"./-RJvyHAL.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";import"./DGvNJ-I6.js";import"./DvDH6DOc.js";const M={class:"container mx-auto font-mono text-white"},G=s("h1",{class:"my-6 text-2xl font-extrabold"},"Blog",-1),H={class:"grid grid-cols-4 gap-4"},I={class:"col-span-4 lg:col-span-3"},J={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},K={class:"col-span-10 lg:col-span-2"},O={class:"col-span-10 lg:col-span-8"},P={class:"flex-col space-y-2"},Q={class:"col-span-4 border-l border-gray-700 pl-4 lg:col-span-1"},U={class:"my-2 space-y-2"},W=s("p",{class:"text-xl font-bold"},"Categories",-1),X=["onClick"],Y={key:0,class:"my-2 space-y-2"},Z=s("p",{class:"text-xl font-bold"},"Tags",-1),ee=["onClick"],_e={__name:"index",async setup(te){let i,h;const u=A(),o=g([]);u.query.category&&(o.value=[u.query.category]);const a=g([]);u.query.tag&&(a.value=[u.query.tag]);const k=g(!0),{data:p}=([i,h]=R(()=>z("articles",()=>E().only(["_id","_path","title","description","date","img","author","tags","categories","img","excerpt","summary"]).sort({date:-1}).find())),i=await i,h(),i),w=m(()=>[...new Set(p.value.map(e=>e.categories).flat().sort())]),b=m(()=>[...new Set(p.value.map(e=>e.tags).flat().sort())]),q=m(()=>p.value.filter(e=>!(o.value.length>0&&!o.value.every(n=>e.categories.includes(n))||a.value.length>0&&!a.value.every(n=>e.tags.includes(n)))));function N(e){a.value.includes(e)?a.value=a.value.filter(n=>n!==e):a.value.push(e)}function T(e){o.value.includes(e)?o.value=o.value.filter(n=>n!==e):o.value.push(e)}return(e,n)=>{const B=F,V=L,$=j;return l(),r("section",M,[G,s("div",H,[s("div",I,[s("div",J,[(l(!0),r(d,null,v(c(q),t=>(l(),r(d,{key:t._id},[s("div",K,_(t.date),1),s("div",O,[s("div",P,[f(B,{class:"text-orange-500",to:t._path},{default:y(()=>[D(_(t.title),1)]),_:2},1032,["to"]),f($,{value:t},{default:y(()=>[f(V,{class:"line-clamp-5 text-xs text-gray-400",value:{body:t.excerpt}},null,8,["value"])]),_:2},1032,["value"])])])],64))),128))])]),s("div",Q,[s("div",U,[W,(l(!0),r(d,null,v(c(w),t=>(l(),r("div",{key:t,class:C([{"bg-orange-500rtext-white":c(o).includes(t)},"cursor-pointer p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:x=>T(t)},_(t),11,X))),128))]),c(k)?(l(),r("div",Y,[Z,(l(!0),r(d,null,v(c(b),(t,x)=>(l(),r("div",{key:x,class:C([{"bg-orange-500 text-white":c(a).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:se=>N(t)},_(t),11,ee))),128))])):S("",!0)])])])}}};export{_e as default};

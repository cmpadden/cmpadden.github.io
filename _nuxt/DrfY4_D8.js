import{_ as $}from"./CjEwrSdN.js";import{l as A,r as _,k as B,m as p,c as r,e as o,F as d,h as m,u as i,d as D,o as l,f as v,w as E,g as F,t as f,j as L,n as h}from"./BRBtTEmL.js";import{_ as R}from"./CROX6Rnd.js";import{u as j}from"./BadF9Ril.js";import{q as z}from"./Bj3bCfCS.js";import"./D3dtVWrF.js";const G={class:"container mx-auto font-mono text-gray-700 dark:text-white"},H={class:"grid grid-cols-4 gap-4"},I={class:"col-span-4 lg:col-span-3"},J={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},K={class:"col-span-10 lg:col-span-8"},M={class:"flex-col space-y-2"},O={class:"col-span-4 border-l border-gray-300 dark:border-gray-700 pl-4 lg:col-span-1"},P={class:"my-2 space-y-2"},Q=["onClick"],U={key:0,class:"my-2 space-y-2"},W=["onClick"],ne={__name:"index",async setup(X){let c,x;const u=A(),a=_([]);u.query.category&&(a.value=[u.query.category]);const n=_([]);u.query.tag&&(n.value=[u.query.tag]);const k=_(!0),{data:g}=([c,x]=B(()=>j("articles",()=>z("content").order("date","DESC").all())),c=await c,x(),c),C=p(()=>[...new Set(g.value.map(e=>e.categories).flat().sort())]),w=p(()=>[...new Set(g.value.map(e=>e.tags).flat().sort())]),b=p(()=>g.value.filter(e=>!(a.value.length>0&&!a.value.every(s=>e.categories.includes(s))||n.value.length>0&&!n.value.every(s=>e.tags.includes(s)))));function q(e){n.value.includes(e)?n.value=n.value.filter(s=>s!==e):n.value.push(e)}function N(e){a.value.includes(e)?a.value=a.value.filter(s=>s!==e):a.value.push(e)}return(e,s)=>{const T=$,S=L,V=R;return l(),r("section",G,[o("div",H,[o("div",I,[o("div",J,[(l(!0),r(d,null,m(i(b),t=>(l(),r(d,{key:t._id},[v(T,{datetime:t.date,class:"col-span-10 lg:col-span-2",year:"numeric",month:"short",day:"2-digit"},null,8,["datetime"]),o("div",K,[o("div",M,[v(S,{class:"text-orange-500",to:t.path},{default:E(()=>[F(f(t.title),1)]),_:2},1032,["to"]),v(V,{value:t.meta.excerpt,class:"line-clamp-5 text-xs text-gray-600 dark:text-gray-400"},null,8,["value"])])])],64))),128))])]),o("div",O,[o("div",P,[s[0]||(s[0]=o("p",{class:"text-xl font-bold"},"Categories",-1)),(l(!0),r(d,null,m(i(C),t=>(l(),r("div",{key:t,class:h([{"bg-orange-500 text-white":i(a).includes(t)},"cursor-pointer p-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:y=>N(t)},f(t),11,Q))),128))]),i(k)?(l(),r("div",U,[s[1]||(s[1]=o("p",{class:"text-xl font-bold"},"Tags",-1)),(l(!0),r(d,null,m(i(w),(t,y)=>(l(),r("div",{key:y,class:h([{"bg-orange-500 text-white":i(n).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:Y=>q(t)},f(t),11,W))),128))])):D("",!0)])])])}}};export{ne as default};

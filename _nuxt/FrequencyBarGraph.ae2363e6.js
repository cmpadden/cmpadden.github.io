import{_ as n,o as r,c as h,d as c}from"./entry.fc587c95.js";const o={name:"FrequencyBarGraph",props:{canvasWidth:{type:Number,default:750},canvasHeight:{type:Number,default:500},fillStyle:{type:String,default:"rgba(0,0,0)"},strokeStyle:{type:String,default:"rgb(255, 255, 255)"}},mounted(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.source=this.audioCtx.createMediaStreamSource(t),this.source.connect(this.analyser),this.analyser.fftSize=256,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.canvas=document.getElementById("frequencyBarGraphCanvas"),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.draw()}).catch(function(t){console.error(t)})},methods:{map(t,a,e,s,i){return(t-a)*(i-a)/(e-a)+s},draw(){requestAnimationFrame(this.draw),this.analyser.getByteFrequencyData(this.dataArray),this.canvasCtx.fillStyle=this.fillStyle,this.canvasCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight);const t=this.canvasWidth/this.bufferLength;let a=0;for(let e=0;e<this.bufferLength;e++){const s=this.dataArray[e],i=this.map(s,0,255,0,this.canvasHeight);this.canvasCtx.fillStyle=`rgb(${s},${0},${s})`,this.canvasCtx.fillRect(a,this.canvasHeight-i,t,i),a+=t+1}}}},d=["width","height"];function l(t,a,e,s,i,u){return r(),h("div",null,[c("canvas",{id:"frequencyBarGraphCanvas",width:e.canvasWidth,height:e.canvasHeight},null,8,d)])}const y=n(o,[["render",l]]);export{y as default};

import{N as ue,C as de,t as fe,c as ve,a as pe,H as X,p as me,T as ce,l as p,u as x,S as g,o as Q}from"./open-closed.285151d8.js";import{g as Y,r as b,h as Z,i as w,j as S,k as G,l as A,m as he,p as H,n as ge,q as $}from"./entry.11f8fb72.js";function be(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function q(){let e=[],t={addEventListener(n,r,i,l){return n.addEventListener(r,i,l),t.add(()=>n.removeEventListener(r,i,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);t.add(()=>clearTimeout(r))},style(n,r,i){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=q();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function j(e,...t){e&&t.length>0&&e.classList.add(...t)}function F(e,...t){e&&t.length>0&&e.classList.remove(...t)}var P=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(P||{});function ye(e,t){let n=q();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(e),[l,a]=[r,i].map(o=>{let[s=0]=o.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,d)=>d-u);return s});return l!==0?n.setTimeout(()=>t("finished"),l+a):t("finished"),n.add(()=>t("cancelled")),n.dispose}function W(e,t,n,r,i,l){let a=q(),o=l!==void 0?be(l):()=>{};return F(e,...i),j(e,...t,...n),a.nextFrame(()=>{F(e,...n),j(e,...r),a.add(ye(e,s=>(F(e,...r,...t),j(e,...i),o(s))))}),a.add(()=>F(e,...t,...n,...r,...i)),a.add(()=>o("cancelled")),a.dispose}function h(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let D=Symbol("TransitionContext");var Se=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Se||{});function Ee(){return $(D,null)!==null}function Te(){let e=$(D,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Le(){let e=$(M,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let M=Symbol("NestingContext");function C(e){return"children"in e?C(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function J(e){let t=b([]),n=b(!1);S(()=>n.value=!0),G(()=>n.value=!1);function r(l,a=g.Hidden){let o=t.value.findIndex(({id:s})=>s===l);o!==-1&&(x(a,{[g.Unmount](){t.value.splice(o,1)},[g.Hidden](){t.value[o].state="hidden"}}),!C(t)&&n.value&&(e==null||e()))}function i(l){let a=t.value.find(({id:o})=>o===l);return a?a.state!=="visible"&&(a.state="visible"):t.value.push({id:l,state:"visible"}),()=>r(l,g.Unmount)}return{children:t,register:i,unregister:r}}let K=ue.RenderStrategy,ee=Y({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:i}){let l=b(0);function a(){l.value|=p.Opening,t("beforeEnter")}function o(){l.value&=~p.Opening,t("afterEnter")}function s(){l.value|=p.Closing,t("beforeLeave")}function u(){l.value&=~p.Closing,t("afterLeave")}if(!Ee()&&de())return()=>Z(te,{...e,onBeforeEnter:a,onAfterEnter:o,onBeforeLeave:s,onAfterLeave:u},r);let d=b(null),E=w(()=>e.unmount?g.Unmount:g.Hidden);i({el:d,$el:d});let{show:m,appear:R}=Te(),{register:U,unregister:B}=Le(),f=b(m.value?"visible":"hidden"),_={value:!0},y=fe(),T={value:!1},N=J(()=>{!T.value&&f.value!=="hidden"&&(f.value="hidden",B(y),u())});S(()=>{let v=U(y);G(v)}),A(()=>{if(E.value===g.Hidden&&y){if(m.value&&f.value!=="visible"){f.value="visible";return}x(f.value,{hidden:()=>B(y),visible:()=>U(y)})}});let V=h(e.enter),z=h(e.enterFrom),ne=h(e.enterTo),I=h(e.entered),re=h(e.leave),le=h(e.leaveFrom),ae=h(e.leaveTo);S(()=>{A(()=>{if(f.value==="visible"){let v=Q(d);if(v instanceof Comment&&v.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ie(v){let O=_.value&&!R.value,c=Q(d);!c||!(c instanceof HTMLElement)||O||(T.value=!0,m.value&&a(),m.value||s(),v(m.value?W(c,V,z,ne,I,L=>{T.value=!1,L===P.Finished&&o()}):W(c,re,le,ae,I,L=>{T.value=!1,L===P.Finished&&(C(N)||(f.value="hidden",B(y),u()))})))}return S(()=>{he([m],(v,O,c)=>{ie(c),_.value=!1},{immediate:!0})}),H(M,N),ve(w(()=>x(f.value,{visible:p.Open,hidden:p.Closed})|l.value)),()=>{let{appear:v,show:O,enter:c,enterFrom:L,enterTo:we,entered:Ae,leave:Ce,leaveFrom:Be,leaveTo:Oe,...k}=e,oe={ref:d},se={...k,...R.value&&m.value&&pe.isServer?{class:ge([n.class,k.class,...V,...z])}:{}};return X({theirProps:se,ourProps:oe,slot:{},slots:r,attrs:n,features:K,visible:f.value==="visible",name:"TransitionChild"})}}}),Fe=ee,te=Y({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r}){let i=me(),l=w(()=>e.show===null&&i!==null?(i.value&p.Open)===p.Open:e.show);A(()=>{if(![!0,!1].includes(l.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let a=b(l.value?"visible":"hidden"),o=J(()=>{a.value="hidden"}),s=b(!0),u={show:l,appear:w(()=>e.appear||!s.value)};return S(()=>{A(()=>{s.value=!1,l.value?a.value="visible":C(o)||(a.value="hidden")})}),H(M,o),H(D,u),()=>{let d=ce(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),E={unmount:e.unmount};return X({ourProps:{...E,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[Z(Fe,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...E,...d},r.default)]},attrs:{},features:K,visible:a.value==="visible",name:"Transition"})}}});const He=Object.freeze(Object.defineProperty({__proto__:null,TransitionChild:ee,TransitionRoot:te},Symbol.toStringTag,{value:"Module"}));export{te as S,ee as h,q as r,He as t};

import{_ as $}from"./D4sRXUON.js";import{l as A,r as g,k as D,m,c as r,e as o,F as _,h as v,u as c,d as y,o as a,f as h,i as E,w as F,g as L,t as f,j as R,n as k}from"./ClmBsYs7.js";import{_ as j}from"./B_vVd0gU.js";import{u as z}from"./NH4JIIQi.js";import{q as G}from"./B6_57ghN.js";import"./tUHBincE.js";const H={class:"container mx-auto font-mono text-white"},I={class:"grid grid-cols-4 gap-4"},J={class:"col-span-4 lg:col-span-3"},K={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},M={class:"col-span-10 lg:col-span-8"},O={class:"flex-col space-y-2"},P={class:"col-span-4 border-l border-gray-700 pl-4 lg:col-span-1"},Q={class:"my-2 space-y-2"},U=["onClick"],W={key:0,class:"my-2 space-y-2"},X=["onClick"],le={__name:"index",async setup(Y){let u,x;const d=A(),n=g([]);d.query.category&&(n.value=[d.query.category]);const l=g([]);d.query.tag&&(l.value=[d.query.tag]);const C=g(!0),{data:p}=([u,x]=D(()=>z("articles",()=>G("content").order("date","DESC").all())),u=await u,x(),u),w=m(()=>[...new Set(p.value.map(e=>e.categories).flat().sort())]),b=m(()=>[...new Set(p.value.map(e=>e.tags).flat().sort())]),q=m(()=>p.value.filter(e=>!(n.value.length>0&&!n.value.every(s=>e.categories.includes(s))||l.value.length>0&&!l.value.every(s=>e.tags.includes(s)))));function N(e){l.value.includes(e)?l.value=l.value.filter(s=>s!==e):l.value.push(e)}function T(e){n.value.includes(e)?n.value=n.value.filter(s=>s!==e):n.value.push(e)}return(e,s)=>{const B=$,S=R,V=j;return a(),r("section",H,[o("div",I,[o("div",J,[o("div",K,[(a(!0),r(_,null,v(c(q),t=>{var i;return a(),r(_,{key:t._id},[h(B,{datetime:t.date,class:"col-span-10 lg:col-span-2",year:"numeric",month:"short",day:"2-digit"},null,8,["datetime"]),o("div",M,[o("div",O,[h(S,{class:"text-orange-500",to:t.path},{default:F(()=>[L(f(t.title),1)]),_:2},1032,["to"]),(i=t.meta)!=null&&i.excerpt?(a(),E(V,{key:0,value:t.meta.excerpt,class:"line-clamp-5 text-xs text-gray-400"},null,8,["value"])):y("",!0)])])],64)}),128))])]),o("div",P,[o("div",Q,[s[0]||(s[0]=o("p",{class:"text-xl font-bold"},"Categories",-1)),(a(!0),r(_,null,v(c(w),t=>(a(),r("div",{key:t,class:k([{"bg-orange-500 text-white":c(n).includes(t)},"cursor-pointer p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:i=>T(t)},f(t),11,U))),128))]),c(C)?(a(),r("div",W,[s[1]||(s[1]=o("p",{class:"text-xl font-bold"},"Tags",-1)),(a(!0),r(_,null,v(c(b),(t,i)=>(a(),r("div",{key:i,class:k([{"bg-orange-500 text-white":c(l).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:Z=>N(t)},f(t),11,X))),128))])):y("",!0)])])])}}};export{le as default};

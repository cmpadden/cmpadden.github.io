(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{310:function(t,e,r){"use strict";r.r(e);r(261),r(264),r(13),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(49),r(78);var n={name:"Spectrogram",props:{canvasWidth:{type:Number,default:750},canvasHeight:{type:Number,default:500},fillStyle:{type:String,default:"rgba(0,0,0)"}},data:function(){return{dataArray:[],dataArrayHistory:[]}},mounted:function(){var t=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.audioCtx=new(window.AudioContext||window.webkitAudioContext),t.analyser=t.audioCtx.createAnalyser(),t.source=t.audioCtx.createMediaStreamSource(e),t.source.connect(t.analyser),t.analyser.fftSize=256,t.bufferLength=t.analyser.frequencyBinCount,t.dataArray=new Uint8Array(t.bufferLength),t.canvas=document.getElementById(t._uid),t.canvasCtx=t.canvas.getContext("2d"),t.canvasCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.draw()})).catch((function(t){console.error(t)}))},methods:{draw:function(){requestAnimationFrame(this.draw),this.analyser.getByteFrequencyData(this.dataArray),this.dataArrayHistory.push(this.dataArray.slice()),this.dataArrayHistory.length>256&&this.dataArrayHistory.shift(),this.canvasCtx.fillStyle=this.fillStyle,this.canvasCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight);for(var t=this.canvasWidth/this.bufferLength,e=this.canvasHeight/256,r=0;r<this.dataArrayHistory.length;r++)for(var n=0;n<this.dataArrayHistory[r].length;n++){var c=this.dataArrayHistory[r][n];this.canvasCtx.fillStyle="rgb(".concat(c,",",0,",").concat(c,")"),this.canvasCtx.fillRect(n*t,r*e,t,e)}}}},c=r(17),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("canvas",{attrs:{id:t._uid,width:t.canvasWidth,height:t.canvasHeight}})])}),[],!1,null,null,null);e.default=component.exports}}]);
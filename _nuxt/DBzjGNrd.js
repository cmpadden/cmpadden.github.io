import{u as R,l as g,w as S,m,c as r,b as y,a as o,F as d,r as v,h as i,o as l,t as p,e as f,j as C,d as D,p as k,k as F}from"./1FmnzlcH.js";import{_ as L}from"./C4oH6Z_h.js";import j from"./DJVqUksQ.js";import{u as z}from"./Br5KM2aQ.js";import{q as E}from"./Dvjavy5w.js";import"./C-v3KzvZ.js";import"./CxYJgpPD.js";import"./Ba_oy8xZ.js";import"./IShi1APO.js";const M={class:"container mx-auto font-mono text-white"},G={class:"grid grid-cols-4 gap-4"},H={class:"col-span-4 lg:col-span-3"},I={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},J={class:"col-span-10 lg:col-span-2"},K={class:"col-span-10 lg:col-span-8"},O={class:"flex-col space-y-2"},P={class:"col-span-4 border-l border-gray-700 pl-4 lg:col-span-1"},Q={class:"my-2 space-y-2"},U=["onClick"],W={key:0,class:"my-2 space-y-2"},X=["onClick"],ce={__name:"index",async setup(Y){let c,h;const u=R(),a=g([]);u.query.category&&(a.value=[u.query.category]);const n=g([]);u.query.tag&&(n.value=[u.query.tag]);const w=g(!0),{data:_}=([c,h]=S(()=>z("articles",()=>E().only(["_id","_path","title","description","date","img","author","tags","categories","img","excerpt","summary"]).sort({date:-1}).find())),c=await c,h(),c),b=m(()=>[...new Set(_.value.map(e=>e.categories).flat().sort())]),q=m(()=>[...new Set(_.value.map(e=>e.tags).flat().sort())]),N=m(()=>_.value.filter(e=>!(a.value.length>0&&!a.value.every(s=>e.categories.includes(s))||n.value.length>0&&!n.value.every(s=>e.tags.includes(s)))));function T(e){n.value.includes(e)?n.value=n.value.filter(s=>s!==e):n.value.push(e)}function V(e){a.value.includes(e)?a.value=a.value.filter(s=>s!==e):a.value.push(e)}return(e,s)=>{const $=F,A=L,B=j;return l(),r("section",M,[y("",!0),o("div",G,[o("div",H,[o("div",I,[(l(!0),r(d,null,v(i(N),t=>(l(),r(d,{key:t._id},[o("div",J,p(t.date),1),o("div",K,[o("div",O,[f($,{class:"text-orange-500",to:t._path},{default:C(()=>[D(p(t.title),1)]),_:2},1032,["to"]),f(B,{value:t},{default:C(()=>[f(A,{class:"line-clamp-5 text-xs text-gray-400",value:{body:t.excerpt}},null,8,["value"])]),_:2},1032,["value"])])])],64))),128))])]),o("div",P,[o("div",Q,[s[0]||(s[0]=o("p",{class:"text-xl font-bold"},"Categories",-1)),(l(!0),r(d,null,v(i(b),t=>(l(),r("div",{key:t,class:k([{"bg-orange-500 text-white":i(a).includes(t)},"cursor-pointer p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:x=>V(t)},p(t),11,U))),128))]),i(w)?(l(),r("div",W,[s[1]||(s[1]=o("p",{class:"text-xl font-bold"},"Tags",-1)),(l(!0),r(d,null,v(i(q),(t,x)=>(l(),r("div",{key:x,class:k([{"bg-orange-500 text-white":i(n).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:Z=>T(t)},p(t),11,X))),128))])):y("",!0)])])])}}};export{ce as default};

import{k as V,r as _,j as A,l as v,c as l,d as x,e as o,F as d,h as f,u as i,o as r,t as g,f as y,w as B,g as $,i as E,n as C}from"./D5yKK8mC.js";import{_ as F}from"./C8JQT2jD.js";import{f as L}from"./BAYaU90R.js";import{u as R}from"./BiPqQixu.js";import{q as j}from"./BJdEH0Zq.js";const z={class:"container mx-auto font-mono text-white"},G={class:"grid grid-cols-4 gap-4"},H={class:"col-span-4 lg:col-span-3"},I={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},J={class:"col-span-10 lg:col-span-2"},K={class:"col-span-10 lg:col-span-8"},M={class:"flex-col space-y-2"},O={class:"col-span-4 border-l border-gray-700 pl-4 lg:col-span-1"},P={class:"my-2 space-y-2"},Q=["onClick"],U={key:0,class:"my-2 space-y-2"},W=["onClick"],ae={__name:"index",async setup(X){let c,m;const u=V(),a=_([]);u.query.category&&(a.value=[u.query.category]);const n=_([]);u.query.tag&&(n.value=[u.query.tag]);const k=_(!0),{data:p}=([c,m]=A(()=>R("articles",()=>j("content").order("date","DESC").all())),c=await c,m(),c),w=v(()=>[...new Set(p.value.map(e=>e.categories).flat().sort())]),b=v(()=>[...new Set(p.value.map(e=>e.tags).flat().sort())]),q=v(()=>p.value.filter(e=>!(a.value.length>0&&!a.value.every(s=>e.categories.includes(s))||n.value.length>0&&!n.value.every(s=>e.tags.includes(s)))));function D(e){n.value.includes(e)?n.value=n.value.filter(s=>s!==e):n.value.push(e)}function N(e){a.value.includes(e)?a.value=a.value.filter(s=>s!==e):a.value.push(e)}return(e,s)=>{const T=E,S=F;return r(),l("section",z,[x("",!0),o("div",G,[o("div",H,[o("div",I,[(r(!0),l(d,null,f(i(q),t=>(r(),l(d,{key:t._id},[o("div",J,g(("formatDate"in e?e.formatDate:i(L))(t.date)),1),o("div",K,[o("div",M,[y(T,{class:"text-orange-500",to:t.path},{default:B(()=>[$(g(t.title),1)]),_:2},1032,["to"]),y(S,{value:t.meta.excerpt,class:"line-clamp-5 text-xs text-gray-400"},null,8,["value"])])])],64))),128))])]),o("div",O,[o("div",P,[s[0]||(s[0]=o("p",{class:"text-xl font-bold"},"Categories",-1)),(r(!0),l(d,null,f(i(w),t=>(r(),l("div",{key:t,class:C([{"bg-orange-500 text-white":i(a).includes(t)},"cursor-pointer p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:h=>N(t)},g(t),11,Q))),128))]),i(k)?(r(),l("div",U,[s[1]||(s[1]=o("p",{class:"text-xl font-bold"},"Tags",-1)),(r(!0),l(d,null,f(i(b),(t,h)=>(r(),l("div",{key:h,class:C([{"bg-orange-500 text-white":i(n).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:Y=>D(t)},g(t),11,W))),128))])):x("",!0)])])])}}};export{ae as default};

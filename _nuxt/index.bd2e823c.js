import M from"./Waveform.ec54bcee.js";import H from"./Spectrogram.6551bb65.js";import S from"./FrequencyBarGraph.f886621f.js";import{g as T,r as p,k as U,o as d,c as u,b as t,a as y,d as f,F as k,$ as D,Z as s}from"./entry.11f8fb72.js";const $={class:"container mx-auto font-mono"},E={class:"text-white bg-background"},I={class:"grid grid-cols-3 gap-4"},L={class:"bg-black/75 p-4 rounded-xl col-span-3 lg:col-span-1"},P=t("div",{class:"font-bold text-xl mb-2"},"Time Domain Waveform",-1),N={class:"bg-black/75 p-4 rounded-xl col-span-3 lg:col-span-1"},O=t("div",{class:"font-bold text-xl mb-2"},"Frequency Spectrogram",-1),R={class:"bg-black/75 p-4 rounded-xl col-span-3 lg:col-span-1"},V=t("div",{class:"font-bold text-xl mb-2"},"Frequency Bar Chart",-1),W={class:"bg-black/75 p-4 rounded-xl col-span-3"},z=t("div",{class:"font-bold text-xl mb-2"},"Frequency Buffer History",-1),G={class:"table-fixed w-full"},K=t("thead",{class:"border-b-2 collapse md:visible"},[t("tr",null,[t("th",{class:"text-left"},"Index"),t("th",{class:"text-left"},"Mean"),t("th",{class:"text-left"},"Min"),t("th",{class:"text-left"},"Max"),t("th",{class:"text-left"},"FFT"),t("th",{class:"text-right"},"Buffer")])],-1),Y={class:"font-bold text-left"},Z={class:"text-left"},j={class:"text-left"},J={class:"text-left"},Q={class:"text-left"},X={class:"text-right truncate"},tt={class:"bg-black/75 p-4 rounded-xl col-span-3"},et=t("div",{class:"font-bold text-xl mb-2"},"Time Domain Buffer History",-1),st={class:"table-fixed w-full"},ot=t("thead",{class:"border-b-2 collapse md:visible"},[t("tr",null,[t("th",{class:"text-left"},"Index"),t("th",{class:"text-left"},"Mean"),t("th",{class:"text-left"},"Min"),t("th",{class:"text-left"},"Max"),t("th",{class:"text-left"},"FFT"),t("th",{class:"text-right"},"Buffer")])],-1),lt={class:"font-bold text-left"},nt={class:"text-left"},it={class:"text-left"},at={class:"text-left"},ct={class:"text-left"},rt={class:"text-right truncate"},m=256,mt=T({__name:"index",setup(dt){let c=null,x=null,o=null,v=null,h=null,n=p([]),_=null,l=p([]);p(!1);const B=()=>{requestAnimationFrame(B),o.getByteTimeDomainData(h),h!==null&&(n.value.push(h.slice()),n.value.length>m&&n.value.shift()),o.getByteFrequencyData(_),_!==null&&(l.value.push(_.slice()),l.value.length>m&&l.value.shift())},q=()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(i=>{c=i,x=new(window.AudioContext||window.webkitAudioContext),o=x.createAnalyser(),v=x.createMediaStreamSource(c),v.connect(o),o.fftSize=2048,h=new Uint8Array(o.frequencyBinCount),_=new Uint8Array(o.frequencyBinCount);for(let a=0;a<m;a++)n.value.push(new Uint8Array(o.frequencyBinCount));for(let a=0;a<m;a++)l.value.push(new Uint8Array(o.frequencyBinCount));B()}).catch(function(i){console.error(i)})},w=()=>{c!==null&&c.active&&c.getAudioTracks().forEach(i=>{i.stop()})};return U(()=>{console.log("disabling"),w()}),(i,a)=>{const F=M,A=H,C=S;return d(),u("div",$,[t("div",E,[t("div",I,[t("div",{class:"col-span-3 space-x-2"},[t("div",{class:"inline-block rounded-lg bg-black px-6 py-2 text-sm font-bold uppercase text-white shadow-lg shadow-green-400/25 transition duration-150 ease-in-out hover:shadow-white/25 hover:cursor-pointer",onClick:q}," Enable "),t("div",{class:"inline-block rounded-lg bg-black px-6 py-2 text-sm font-bold uppercase text-white shadow-lg shadow-red-400/25 transition duration-150 ease-in-out hover:shadow-white/25 hover:cursor-pointer",onClick:w}," Disable ")]),t("div",L,[P,y(F,{timeDomainBufferHistory:f(n),strokeStyle:"rgb(255, 0, 255)",class:"border-2 border-gray-400 h-72"},null,8,["timeDomainBufferHistory"])]),t("div",N,[O,y(A,{frequencyDomainBufferHistory:f(l),class:"border-2 border-gray-400 h-72"},null,8,["frequencyDomainBufferHistory"])]),t("div",R,[V,y(C,{audioBufferHistory:f(l),class:"border-2 border-gray-400 h-72"},null,8,["audioBufferHistory"])]),t("div",W,[z,t("div",null,[t("table",G,[K,t("tbody",null,[(d(!0),u(k,null,D(f(l).slice(-10),(e,r)=>(d(),u("tr",{key:r},[t("td",Y,s(r),1),t("td",Z,s((e.reduce((b,g)=>b+g)/e.length).toFixed(2)),1),t("td",j,s(Math.min(...e)),1),t("td",J,s(Math.max(...e)),1),t("td",Q,s(e.length),1),t("td",X,s(e.slice(0,4))+" ... "+s(e.slice(-4)),1)]))),128))])])])]),t("div",tt,[et,t("div",null,[t("table",st,[ot,t("tbody",null,[(d(!0),u(k,null,D(f(n).slice(-10),(e,r)=>(d(),u("tr",{key:r},[t("td",lt,s(r),1),t("td",nt,s((e.reduce((b,g)=>b+g)/e.length).toFixed(2)),1),t("td",it,s(Math.min(...e)),1),t("td",at,s(Math.max(...e)),1),t("td",ct,s(e.length),1),t("td",rt,s(e.slice(0,4))+" ... "+s(e.slice(-4)),1)]))),128))])])])])])])])}}});export{mt as default};

import{_ as $}from"./DVT_pDMG.js";import{l as A,r as p,k as D,m,c as l,e as a,F as g,h as v,u as c,d as y,o,f as h,i as E,w as F,g as L,t as f,j as R,n as k}from"./BFs4rnpT.js";import{_ as j}from"./BGRV3Aq_.js";import{u as z}from"./BYIIQJeS.js";import{q as G}from"./DP4UaZZS.js";import"./DorZcjyV.js";const H={class:"container mx-auto font-mono text-gray-700 dark:text-white"},I={class:"grid grid-cols-4 gap-4"},J={class:"col-span-4 lg:col-span-3"},K={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},M={class:"col-span-10 lg:col-span-8"},O={class:"flex-col space-y-2"},P={class:"col-span-4 border-l border-gray-300 dark:border-gray-700 pl-4 lg:col-span-1"},Q={class:"my-2 space-y-2"},U=["onClick"],W={key:0,class:"my-2 space-y-2"},X=["onClick"],ne={__name:"index",async setup(Y){let u,x;const d=A(),r=p([]);d.query.category&&(r.value=[d.query.category]);const n=p([]);d.query.tag&&(n.value=[d.query.tag]);const C=p(!0),{data:_}=([u,x]=D(()=>z("articles",()=>G("content").order("date","DESC").all())),u=await u,x(),u),w=m(()=>[...new Set(_.value.map(e=>e.categories).flat().sort())]),b=m(()=>[...new Set(_.value.map(e=>e.tags).flat().sort())]),q=m(()=>_.value.filter(e=>!(r.value.length>0&&!r.value.every(s=>e.categories.includes(s))||n.value.length>0&&!n.value.every(s=>e.tags.includes(s)))));function N(e){n.value.includes(e)?n.value=n.value.filter(s=>s!==e):n.value.push(e)}function T(e){r.value.includes(e)?r.value=r.value.filter(s=>s!==e):r.value.push(e)}return(e,s)=>{const B=$,S=R,V=j;return o(),l("section",H,[a("div",I,[a("div",J,[a("div",K,[(o(!0),l(g,null,v(c(q),t=>{var i;return o(),l(g,{key:t._id},[h(B,{datetime:t.date,class:"col-span-10 lg:col-span-2",year:"numeric",month:"short",day:"2-digit"},null,8,["datetime"]),a("div",M,[a("div",O,[h(S,{class:"text-orange-500",to:t.path},{default:F(()=>[L(f(t.title),1)]),_:2},1032,["to"]),(i=t.meta)!=null&&i.excerpt?(o(),E(V,{key:0,value:t.meta.excerpt,class:"line-clamp-5 text-xs text-gray-600 dark:text-gray-400"},null,8,["value"])):y("",!0)])])],64)}),128))])]),a("div",P,[a("div",Q,[s[0]||(s[0]=a("p",{class:"text-xl font-bold"},"Categories",-1)),(o(!0),l(g,null,v(c(w),t=>(o(),l("div",{key:t,class:k([{"bg-orange-500 text-white":c(r).includes(t)},"cursor-pointer p-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:i=>T(t)},f(t),11,U))),128))]),c(C)?(o(),l("div",W,[s[1]||(s[1]=a("p",{class:"text-xl font-bold"},"Tags",-1)),(o(!0),l(g,null,v(c(b),(t,i)=>(o(),l("div",{key:i,class:k([{"bg-orange-500 text-white":c(n).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:Z=>N(t)},f(t),11,X))),128))])):y("",!0)])])])}}};export{ne as default};

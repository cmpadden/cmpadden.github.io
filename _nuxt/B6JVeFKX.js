import{u as A,j as h,w as B,k as p,c as l,b as e,F as m,r as g,a as c,o as r,i as v,f as b,g as R,t as d,h as S,n as y,_ as j}from"./DNAUWOUZ.js";import{_ as D}from"./C-JB4Wo_.js";import F from"./rxEfqs1V.js";import{u as L}from"./BwvCyXXm.js";import{q as z}from"./OvR4VoG2.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";import"./Beeb9bA6.js";import"./DvDH6DOc.js";const E={class:"container mx-auto"},M={class:"grid grid-cols-4 gap-4"},G={class:"col-span-4 lg:col-span-3"},H={class:"rounded-xl bg-black/50 text-white shadow-xl"},I={class:"relative mb-2 h-full"},J={class:"px-4 py-2"},K={class:"mb-2 text-xl font-bold"},O={class:"flex items-center text-sm"},P={class:"mb-3 px-4"},Q={class:"prose-sm"},U={class:"col-span-4 inline-block lg:col-span-1"},W={class:"mb-3 rounded-xl bg-black/50 text-white"},X=e("p",{class:"mb-0 px-3 py-2 text-xl font-bold"},"Categories",-1),Y=["onClick"],Z={class:"mb-3 rounded-xl bg-black/50 text-white"},ee=e("p",{class:"mb-0 px-3 py-2 text-xl font-bold"},"Tags",-1),te={class:"p-2"},se=["onClick"],me={__name:"index",async setup(oe){let i,x;const u=A(),o=h([]);u.query.category&&(o.value=[u.query.category]);const n=h([]);u.query.tag&&(n.value=[u.query.tag]);const{data:_}=([i,x]=B(()=>L("articles",()=>z().only(["_id","_path","title","description","date","img","author","tags","categories","img","excerpt","summary"]).sort({date:-1}).find())),i=await i,x(),i),k=p(()=>[...new Set(_.value.map(t=>t.categories).flat().sort())]),C=p(()=>[...new Set(_.value.map(t=>t.tags).flat().sort())]),w=p(()=>_.value.filter(t=>!(o.value.length>0&&!o.value.every(a=>t.categories.includes(a))||n.value.length>0&&!n.value.every(a=>t.tags.includes(a)))));function q(t){n.value.includes(t)?n.value=n.value.filter(a=>a!==t):n.value.push(t)}function N(t){o.value.includes(t)?o.value=o.value.filter(a=>a!==t):o.value.push(t)}return(t,a)=>{const T=j,V=D,$=F;return r(),l("section",E,[e("div",M,[e("div",G,[(r(!0),l(m,null,g(c(w),s=>(r(),l("div",{key:s._id},[e("div",H,[e("div",I,[e("div",J,[e("div",K,[v(T,{class:"border-b-2 border-orange-500 hover:text-orange-500",to:s._path},{default:b(()=>[R(d(s.title),1)]),_:2},1032,["to"])]),e("p",O,d(s.date),1)]),e("div",P,[e("p",Q,[v($,{class:"prose prose-sm mx-auto sm:prose lg:prose-lg xl:prose-2xl",value:s},{default:b(()=>[v(V,{value:{body:s.excerpt}},null,8,["value"])]),_:2},1032,["value"])])]),S("",!0)])])]))),128))]),e("div",U,[e("div",W,[X,(r(!0),l(m,null,g(c(k),s=>(r(),l("a",{key:s,class:y([{"bg-orange-500":c(o).includes(s)},"block cursor-pointer select-none border-t border-black px-4 py-1 text-orange-200 hover:bg-black"]),onClick:f=>N(s)},d(s),11,Y))),128))]),e("div",Z,[ee,e("div",te,[(r(!0),l(m,null,g(c(C),(s,f)=>(r(),l("span",{key:f,class:y([{"bg-orange-500":c(n).includes(s)},"mb-2 mr-2 inline-flex h-8 cursor-pointer select-none content-center justify-center bg-black px-3 py-2 text-sm leading-4 text-orange-200"]),onClick:ne=>q(s)},[e("div",null,d(s),1)],10,se))),128))])])])])])}}};export{me as default};

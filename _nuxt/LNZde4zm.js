import{_ as E}from"./DvxHPEUN.js";import{_ as L}from"./CCrSFRCY.js";import{s as M,v as I,r as v,q as G,i as x,x as y,c as g,e as r,F as k,l as C,u as o,t as p,d as N,o as c,m as P,w as H,f as J,n as j,p as K}from"./CwLGEThI.js";import{u as O}from"./B6W9kYMp.js";import{q as U}from"./CW8LrqR9.js";const W={class:"min-h-screen bg-emerald-950 bg-[url('/images/noise.svg')] py-10 text-white"},X={class:"container mx-auto space-y-8"},Y={class:"space-y-4"},Z={class:"grid gap-4"},ee={class:"flex flex-col justify-between space-y-3 bg-black/50 p-4 text-white drop-shadow-lg hover:ring-1 hover:ring-white"},te={class:"space-y-1"},se={class:"flex flex-col gap-1 md:flex-row md:items-center md:gap-3"},re={class:"text-lg font-semibold text-orange-400 md:flex-1 md:text-xl"},ae={key:0,class:"line-clamp-3 text-sm text-gray-100"},oe={class:"flex items-center justify-between text-sm text-gray-300"},ne=["disabled"],ie=["disabled"],le={class:"space-y-6 border-t border-white/20 pt-6"},ue={class:"grid gap-8 lg:grid-cols-2"},ce={class:"mt-3 flex flex-wrap gap-2"},de=["onClick"],ge={key:0},pe={class:"mt-3 flex flex-wrap gap-2"},me=["onClick"],q=8,we={__name:"index",async setup(xe){let _,A;const d=M(),B=I(),i=v([]),l=v([]),a=v(1),$=v(!0),{data:h}=([_,A]=G(()=>O("articles",()=>U("content").order("date","DESC").all())),_=await _,A(),_),z=x(()=>[...new Set(h.value.map(e=>e.categories).flat().sort())]),F=x(()=>[...new Set(h.value.map(e=>e.tags).flat().sort())]),f=x(()=>h.value.filter(e=>!(i.value.length>0&&!i.value.every(t=>e.categories.includes(t))||l.value.length>0&&!l.value.every(t=>e.tags.includes(t))))),m=x(()=>Math.max(1,Math.ceil(f.value.length/q))),V=x(()=>{const e=(a.value-1)*q;return f.value.slice(e,e+q)});function D(e){l.value.includes(e)?l.value=l.value.filter(t=>t!==e):l.value.push(e),a.value=1}function Q(e){i.value.includes(e)?i.value=i.value.filter(t=>t!==e):i.value.push(e),a.value=1}function S(e){if(!e)return[];const t=Array.isArray(e)?e:e.split(",").map(n=>n.trim());return[...new Set(t.filter(Boolean))]}function T(e){return e?Array.isArray(e)?e.join(","):e:""}function R(e){if(!e)return 1;const t=Array.isArray(e)?e[0]:e,n=parseInt(t,10);return Number.isFinite(n)&&n>0?n:1}return y(()=>d.query.category,e=>{i.value=S(e)},{immediate:!0}),y(()=>d.query.tag,e=>{l.value=S(e)},{immediate:!0}),y(()=>d.query.page,e=>{a.value=R(e)},{immediate:!0}),y(f,()=>{a.value>m.value&&(a.value=m.value)}),y([i,l,a],()=>{const e=i.value.join(","),t=l.value.join(","),n=a.value>1?String(a.value):"",b=T(d.query.category),w=T(d.query.tag),s=Array.isArray(d.query.page)?d.query.page[0]:d.query.page||"";if(e===b&&t===w&&n===s)return;const u={...d.query};e?u.category=e:delete u.category,t?u.tag=t:delete u.tag,n?u.page=n:delete u.page,B.replace({query:u})},{deep:!0}),(e,t)=>{const n=E,b=L,w=K;return c(),g("section",W,[r("div",X,[r("div",Y,[r("div",Z,[(c(!0),g(k,null,C(o(V),s=>(c(),P(w,{key:s._id,to:s.path,class:"h-full"},{default:H(()=>[r("div",ee,[r("div",te,[r("div",se,[r("p",re,p(s.title),1),J(n,{datetime:s.date,class:"text-sm text-gray-300 md:text-right",year:"numeric",month:"short",day:"2-digit"},null,8,["datetime"])])]),s.description?(c(),g("p",ae,p(s.description),1)):s.meta?.excerpt?(c(),P(b,{key:1,value:s.meta.excerpt,class:"line-clamp-4 text-sm text-gray-100"},null,8,["value"])):N("",!0)])]),_:2},1032,["to"]))),128))]),r("div",oe,[r("button",{type:"button",class:"border border-white/20 px-3 py-1 text-xs uppercase tracking-wide transition hover:border-orange-400 hover:text-white disabled:cursor-not-allowed disabled:border-white/5 disabled:text-gray-500",disabled:o(a)===1,onClick:t[0]||(t[0]=s=>o(a)>1&&a.value--)}," Previous ",8,ne),r("p",null,"Page "+p(o(a))+" of "+p(o(m)),1),r("button",{type:"button",class:"border border-white/20 px-3 py-1 text-xs uppercase tracking-wide transition hover:border-orange-400 hover:text-white disabled:cursor-not-allowed disabled:border-white/5 disabled:text-gray-500",disabled:o(a)===o(m),onClick:t[1]||(t[1]=s=>o(a)<o(m)&&a.value++)}," Next ",8,ie)])]),r("div",le,[r("div",ue,[r("div",null,[t[2]||(t[2]=r("p",{class:"text-xs uppercase tracking-widest text-gray-300"}," Categories ",-1)),r("div",ce,[(c(!0),g(k,null,C(o(z),s=>(c(),g("button",{key:s,type:"button",class:j(["border border-white/20 px-4 py-1 text-sm transition hover:border-orange-400 hover:text-white",o(i).includes(s)?"bg-orange-500 text-white":"text-gray-200"]),onClick:u=>Q(s)},p(s),11,de))),128))])]),o($)?(c(),g("div",ge,[t[3]||(t[3]=r("p",{class:"text-xs uppercase tracking-widest text-gray-300"},"Tags",-1)),r("div",pe,[(c(!0),g(k,null,C(o(F),(s,u)=>(c(),g("button",{key:u,type:"button",class:j(["border border-white/20 px-4 py-1 text-sm transition hover:border-orange-400 hover:text-white",o(l).includes(s)?"bg-orange-500 text-white":"text-gray-200"]),onClick:ye=>D(s)},p(s),11,me))),128))])])):N("",!0)])])])])}}};export{we as default};

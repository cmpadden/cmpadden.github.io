import{_ as n,o as h,c,d as r}from"./entry.0c5395c9.js";const o={name:"Waveform",props:{canvasWidth:{type:Number,default:750},canvasHeight:{type:Number,default:500},fillStyle:{type:String,default:"rgba(0,0,0)"},strokeStyle:{type:String,default:"rgb(255, 255, 255)"}},mounted(){navigator.mediaDevices.getUserMedia({audio:!0}).then(a=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.source=this.audioCtx.createMediaStreamSource(a),this.source.connect(this.analyser),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.canvas=document.getElementById("waveformCanvas"),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.draw()}).catch(function(a){console.error(a)})},methods:{draw(){requestAnimationFrame(this.draw),this.analyser.getByteTimeDomainData(this.dataArray),this.canvasCtx.fillStyle=this.fillStyle,this.canvasCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.canvasCtx.lineWidth=2,this.canvasCtx.strokeStyle=this.strokeStyle,this.canvasCtx.beginPath();const a=this.canvasWidth*1/this.bufferLength;let e=0;for(let t=0;t<this.bufferLength;t++){const s=this.dataArray[t]/128*this.canvasHeight/2;t===0?this.canvasCtx.moveTo(e,s):this.canvasCtx.lineTo(e,s),e+=a}this.canvasCtx.lineTo(this.canvas.width,this.canvas.height/2),this.canvasCtx.stroke()}}},d=["width","height"];function l(a,e,t,i,s,v){return h(),c("div",null,[r("canvas",{id:"waveformCanvas",width:t.canvasWidth,height:t.canvasHeight},null,8,d)])}const f=n(o,[["render",l]]);export{f as default};

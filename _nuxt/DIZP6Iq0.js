import{u as A,j as g,w as R,k as m,c as r,b as o,F as d,r as v,a as i,h as S,o as l,t as p,i as f,f as h,g as D,l as C,_ as F}from"./D0LQ1v83.js";import{_ as L}from"./DMVibmpy.js";import j from"./0HE0ZwgV.js";import{u as z}from"./DwdDW_kG.js";import{q as E}from"./CBUm18ZY.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";import"./DcrJrGxy.js";import"./IShi1APO.js";const M={class:"container mx-auto font-mono text-white"},G={class:"grid grid-cols-4 gap-4"},H={class:"col-span-4 lg:col-span-3"},I={class:"grid grid-cols-10 gap-y-4 lg:gap-y-6"},J={class:"col-span-10 lg:col-span-2"},K={class:"col-span-10 lg:col-span-8"},O={class:"flex-col space-y-2"},P={class:"col-span-4 border-l border-gray-700 pl-4 lg:col-span-1"},Q={class:"my-2 space-y-2"},U=["onClick"],W={key:0,class:"my-2 space-y-2"},X=["onClick"],ce={__name:"index",async setup(Y){let c,x;const u=A(),a=g([]);u.query.category&&(a.value=[u.query.category]);const n=g([]);u.query.tag&&(n.value=[u.query.tag]);const k=g(!0),{data:_}=([c,x]=R(()=>z("articles",()=>E().only(["_id","_path","title","description","date","img","author","tags","categories","img","excerpt","summary"]).sort({date:-1}).find())),c=await c,x(),c),w=m(()=>[...new Set(_.value.map(e=>e.categories).flat().sort())]),b=m(()=>[...new Set(_.value.map(e=>e.tags).flat().sort())]),q=m(()=>_.value.filter(e=>!(a.value.length>0&&!a.value.every(s=>e.categories.includes(s))||n.value.length>0&&!n.value.every(s=>e.tags.includes(s)))));function N(e){n.value.includes(e)?n.value=n.value.filter(s=>s!==e):n.value.push(e)}function T(e){a.value.includes(e)?a.value=a.value.filter(s=>s!==e):a.value.push(e)}return(e,s)=>{const B=F,V=L,$=j;return l(),r("section",M,[s[2]||(s[2]=o("h1",{class:"my-6 text-2xl font-extrabold"},"Blog",-1)),o("div",G,[o("div",H,[o("div",I,[(l(!0),r(d,null,v(i(q),t=>(l(),r(d,{key:t._id},[o("div",J,p(t.date),1),o("div",K,[o("div",O,[f(B,{class:"text-orange-500",to:t._path},{default:h(()=>[D(p(t.title),1)]),_:2},1032,["to"]),f($,{value:t},{default:h(()=>[f(V,{class:"line-clamp-5 text-xs text-gray-400",value:{body:t.excerpt}},null,8,["value"])]),_:2},1032,["value"])])])],64))),128))])]),o("div",P,[o("div",Q,[s[0]||(s[0]=o("p",{class:"text-xl font-bold"},"Categories",-1)),(l(!0),r(d,null,v(i(w),t=>(l(),r("div",{key:t,class:C([{"bg-orange-500rtext-white":i(a).includes(t)},"cursor-pointer p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:y=>T(t)},p(t),11,U))),128))]),i(k)?(l(),r("div",W,[s[1]||(s[1]=o("p",{class:"text-xl font-bold"},"Tags",-1)),(l(!0),r(d,null,v(i(b),(t,y)=>(l(),r("div",{key:y,class:C([{"bg-orange-500 text-white":i(n).includes(t)},"cursor-pointer select-none p-1 text-sm text-gray-400 hover:bg-orange-500 hover:text-white"]),onClick:Z=>N(t)},p(t),11,X))),128))])):S("",!0)])])])}}};export{ce as default};

import{m as v,c as r,g as l,b as e,l as b,t as d,F as c,r as u,i as _,f as y,T as M,o as n,h as g}from"./BGikLauJ.js";var p={};Object.defineProperty(p,"__esModule",{value:!0});var h=p.identify=void 0;const O=["C","C# / Db","D","D# / Eb","E","F","F# / Gb","G","G# / Ab","A","A# / Bb","B"],x={"0 1":{name:"No 3 Major 7",rootOffset:1},"0 2":{name:"No 3 7",rootOffset:2},"0 3":{name:"Minor",rootOffset:0},"0 4":{name:"",rootOffset:0},"0 5":{name:"5",rootOffset:5},"0 6":{name:"7",rootOffset:2},"0 7":{name:"5",rootOffset:0},"0 8":{name:"",rootOffset:8},"0 9":{name:"Minor",rootOffset:9},"0 10":{name:"No 3 7",rootOffset:0},"0 11":{name:"No 3 Major 7",rootOffset:0},"0 2 7":{name:"Suspended 2",rootOffset:0},"0 3 6 10":{name:"Half-diminished 7",rootOffset:0},"0 3 6 9":{name:"Diminished 7",rootOffset:0},"0 3 6":{name:"Diminished",rootOffset:0},"0 3 7 10":{name:"Minor 7",rootOffset:0},"0 3 7 11":{name:"Minor-major 7",rootOffset:0},"0 3 7 9":{name:"Minor 6",rootOffset:0},"0 3 7":{name:"Minor",rootOffset:0},"0 4 10":{name:"7",rootOffset:0},"0 4 11":{name:"Major 7",rootOffset:0},"0 4 5 7":{name:"Add 11",rootOffset:0},"0 4 6":{name:"Flat 5",rootOffset:0},"0 4 7 10":{name:"Dominant 7",rootOffset:0},"0 4 7 11":{name:"Major 7",rootOffset:0},"0 4 7 9":{name:"Major 6",rootOffset:0},"0 4 7":{name:"",rootOffset:0},"0 4 8 10":{name:"Augmented 7",rootOffset:0},"0 4 8":{name:"Augmented",rootOffset:0},"0 5 7":{name:"Suspended 4",rootOffset:0},"0 5 8":{name:"Minor",rootOffset:5},"0 5 9":{name:"",rootOffset:5},"0 4 9":{name:"Minor",rootOffset:9},"0 3 8":{name:"",rootOffset:8},"0 1 5":{name:"Major 7",rootOffset:1},"0 2 6":{name:"Major 7",rootOffset:2},"0 4 5":{name:"5 Major 7",rootOffset:5},"0 1 2":{name:"No 3 7 Major 7",rootOffset:2},"0 1 3":{name:"Minor Add Flat 9",rootOffset:0},"0 1 6":{name:"5 Sharp 11",rootOffset:6},"0 1 7":{name:"5 Add Flat 9",rootOffset:0},"0 1 8":{name:"5 Major 7",rootOffset:1},"0 1 9":{name:"Sharp 9",rootOffset:9},"0 1 10":{name:"Minor Add 9",rootOffset:10},"0 1 11":{name:"No 3 7 Major 7",rootOffset:1},"0 2 10":{name:"Add 9",rootOffset:10},"0 2 11":{name:"Minor Add Flat 9",rootOffset:11},"0 2 3":{name:"Minor Add 9",rootOffset:0},"0 2 4":{name:"Add 9",rootOffset:0},"0 2 5":{name:"Minor 7",rootOffset:2},"0 2 8":{name:"Flat 5",rootOffset:8},"0 2 9":{name:"5 7",rootOffset:2},"0 3 10":{name:"Minor 7",rootOffset:0},"0 3 4":{name:"Sharp 9",rootOffset:0},"0 3 5":{name:"5 7",rootOffset:5},"0 3 9":{name:"Minor 6",rootOffset:0},"0 5 10":{name:"Suspended 2",rootOffset:10},"0 5 11":{name:"5 Sharp 11",rootOffset:5},"0 5 6":{name:"5 Add Flat 9",rootOffset:5},"0 6 10":{name:"Flat 5",rootOffset:6},"0 6 7":{name:"5 Sharp 11",rootOffset:0},"0 6 8":{name:"7",rootOffset:8},"0 6 9":{name:"Minor 6",rootOffset:9},"0 7 10":{name:"5 7",rootOffset:0},"0 7 11":{name:"5 Major 7",rootOffset:0},"0 7 8":{name:"Major 7",rootOffset:8},"0 7 9":{name:"Minor 7",rootOffset:9},"0 8 10":{name:"Add 9",rootOffset:8},"0 8 11":{name:"Sharp 9",rootOffset:8},"0 9 10":{name:"Minor Add Flat 9",rootOffset:9},"0 9 11":{name:"Minor Add 9",rootOffset:9},"0 10 11":{name:"No 3 7 Major 7",rootOffset:0},"0 1 4":{name:"Sharp 9",rootOffset:9},"0 8 9":{name:"Sharp 9",rootOffset:5},"0 6 11":{name:"7/13",rootOffset:2},"0 3 11":{name:"Sharp 9",rootOffset:8}};function w(i){const o=i.map(t=>typeof t=="number"?t:O.indexOf(t));if(o.some(t=>t<0))throw new Error("Unsupported note letter or number provided");if(new Set(o.map(t=>t%12)).size===1)return{name:O[o[0]%12]};const f=o.sort((t,s)=>t-s)[0]%12,m=[...new Set(o.map(t=>(t-f)%12).sort((t,s)=>t-s))],a=x[m.join(" ")];if(a){const t=(f+a.rootOffset)%12,s=O[t];return{name:a.name!==""?`${s} ${a.name}`:s,interval:m,root:t}}else return{name:void 0}}h=p.identify=w;const A={mounted(){typeof navigator.requestMIDIAccess<"u"&&navigator.requestMIDIAccess().then(i=>{this.midi=i,this.midi.inputs.forEach(o=>{o.onmidimessage=f=>{f.data[0]===144&&(this.activeKeys.set(f.data[1],f.data),this.$forceUpdate()),f.data[0]===128&&(this.activeKeys.delete(f.data[1]),this.$forceUpdate())}})},i=>{console.error(i)})},data(){return{tooltip:!1,midi:void 0,activeKeys:new Map}},computed:{inputs(){if(typeof this.midi<"u")return Array.from(this.midi.inputs.values())},outputs(){if(typeof this.midi<"u")return Array.from(this.midi.outputs.values())}},methods:{orderedNotes(){return Array.from(this.activeKeys.keys()).sort()},chord(){const i=Array.from(this.activeKeys.keys());return h(i).name}}},k={class:"h-2/3 bg-gradient-to-b from-green-900 via-purple-900 to-indigo-900 text-white"},N={key:0,class:"p-4 text-center font-light tracking-wide"},S={key:1},j={class:"flex flex-wrap"},I={class:"absolute bottom-16 right-2"},D={class:"p-3 font-mono text-orange-900"},F={class:"mb-2 font-bold"},E={class:"mb-2"},z={key:0,class:"p-4 text-center italic"},V={key:1},C={class:"flex-1"},B={class:"flex-1"},K={class:"mb-2"},T={key:0,class:"p-4 text-center italic"},P={key:1},U={class:"flex-1"},G={class:"flex-1"},L={class:"absolute bottom-2 right-2"},q={class:"absolute bottom-4 left-4"},H={class:"flex"},R={class:"grid h-screen place-items-center"},W={class:"text-center text-4xl font-semibold tracking-wide"},Y={key:0};function J(i,o,f,m,a,t){return n(),r("div",k,[typeof a.midi>"u"?(n(),r("div",N,o[1]||(o[1]=[l(" Unfortunately, the Web MIDI API is "),e("a",{class:"text-blue-500 underline",href:"https://developer.mozilla.org/en-US/docs/Web/API/MIDIMessageEvent#browser_compatibility"},"not supported",-1),l(" in all browsers... ")]))):(n(),r("div",S,[e("div",j,[e("div",I,[e("div",{class:b([{hidden:!a.tooltip,block:a.tooltip},"z-50 max-w-md break-words rounded-lg border-2 border-green-800 bg-yellow-200 text-sm font-normal leading-normal"])},[e("div",null,[o[5]||(o[5]=e("div",{class:"mb-0 rounded-t-lg border-b border-solid bg-green-600 p-3 font-semibold uppercase text-white opacity-75"}," MIDI Status ",-1)),e("div",D,[e("div",F,[o[2]||(o[2]=l(" Enabled: ")),e("span",null,d(typeof a.midi<"u"?"Yep!":"Nope"),1)]),e("div",E,[o[3]||(o[3]=e("div",{class:"font-bold"},"Inputs:",-1)),t.inputs.length===0?(n(),r("div",z," No input devices detected :( ")):(n(),r("div",V,[(n(!0),r(c,null,u(t.inputs,s=>(n(),r("div",{key:s.id,class:"flex"},[e("div",C,d(s.manufacturer),1),e("div",B,d(s.name),1)]))),128))]))]),e("div",K,[o[4]||(o[4]=e("div",{class:"font-bold"},"Outputs:",-1)),t.outputs.length===0?(n(),r("div",T," No output devices detected :( ")):(n(),r("div",P,[(n(!0),r(c,null,u(t.outputs,s=>(n(),r("div",{key:s.id,class:"flex"},[e("div",U,d(s.manufacturer),1),e("div",G,d(s.name),1)]))),128))]))])])])],2)]),e("div",L,[e("button",{onClick:o[0]||(o[0]=s=>a.tooltip=!a.tooltip),class:"border-3 rounded-lg border-green-600 bg-green-50 px-1 text-green-600 shadow hover:text-green-500 hover:shadow-lg",type:"button"},o[6]||(o[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20",class:"h-10 w-10"},[e("g",{fill:"none"},[e("path",{d:"M2.5 4a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-15zm.5 6h2v3.5a.5.5 0 0 0 1 0V10h2v3.5a.5.5 0 0 0 1 0V10h2v3.5a.5.5 0 0 0 1 0V10h2v3.5a.5.5 0 0 0 1 0V10h2v5H3v-5zm2.75-2.5a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5zm6.25-1a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm-3 .251a.75.75 0 1 1-1.5 0a.75.75 0 0 1 1.5 0z",fill:"currentColor"})])],-1)]))])]),e("div",q,[e("div",H,[(n(!0),r(c,null,u(t.orderedNotes(),s=>(n(),r("div",{key:s,class:"p-4"},d(s),1))),128))])]),e("div",R,[e("div",null,[e("div",W,[_(M,{"enter-active-class":"duration-500 ease-out","enter-class":"opacity-0 transform","enter-to-class":"opacity-100","leave-active-class":"duration-500","leave-class":"opacity-100","leave-to-class":"opacity-0 transform"},{default:y(()=>[a.activeKeys.size>=1?(n(),r("div",Y,d(t.chord()||"?"),1)):g("",!0)]),_:1})])])])]))])}const X=v(A,[["render",J]]);export{X as default};
